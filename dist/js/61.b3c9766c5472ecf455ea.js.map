{"version":3,"sources":["webpack:///./src/views/contents/permission/rolePermissionsDialog.vue","webpack:///src/views/contents/permission/rolePermissionsDialog.vue","webpack:///./src/views/contents/permission/rolePermissionsDialog.vue?e1c9","webpack:///src/views/contents/permission/roleManage.vue","webpack:///./src/views/contents/permission/roleManage.vue","webpack:///./src/views/contents/permission/roleManage.vue?c597","webpack:///./src/views/contents/permission/rolePermissionsDialog.vue?cd6d","webpack:///./src/views/contents/permission/roleManage.vue?1d9b","webpack:///./src/views/contents/permission/rolePermissionsDialog.vue?e9a0","webpack:///./src/views/contents/permission/rolePermissionsDialog.vue?c080","webpack:///./src/views/contents/permission/roleManage.vue?939f","webpack:///./src/views/contents/permission/roleManage.vue?11f7"],"names":["j","Object","h","a","props","data","dialogVisible","form","role","permissions","formLabelWidth","permTree","name","parentId","childPerms","defaultProps","children","label","expandAll","mounted","this","getMenu","methods","closeDialog","$refs","ruleForm","resetFields","$emit","getPermissionsByRole","b","d","ajax","url","type","dataType","contentType","roleId","success","tree","setCheckedKeys","error","$message","message","list","saveRoleSet","e","f","getCheckedKeys","g","id","$confirm","confirmButtonText","cancelButtonText","then","$alert","callback","catch","watch","reportPermissionDialogVisible","addOrEdit","deep","handler","status","$createElement","c","_self","_c","attrs","title","dialogTitle","width","show-close","close-on-click-modal","on","close","model","value","expression","ref","prop","label-width","auto-complete","$set","_v","staticClass","show-checkbox","node-key","default-expand-all","default-checked-keys","slot","click","_s","dialogBtn","exports","k","components","DataTable","TabPage","ReportPermission","Common","dataTable","pageSize","pageSizes","emptyText","filters","flagFilter","0","1","tabPage","slotName","closable","loadLists","openReportPermissionPage","deleteRole","history","dialogClosed","m","data-table","staticStyle","margin-bottom","size","scopedSlots","_u","key","fn","_f","row","flag","reportPermissionDialogClosed","i","locals","default","n","push","version","sources","names","mappings","file","sourcesContent"],"mappings":"4IAmBeA,EAXCC,OAAAC,EAAAC,EAAAF,CCkHhB,CAAAG,MAAA,sFAAAC,KAAA,WAQA,OAAAC,eAAA,EAEAC,KAAA,CAAAC,KAAA,GAFAC,YAAA,IAMAC,eANA,OAOAC,SAAA,CACA,CAEAC,KAFA,GAGAC,SAHA,GAIAC,WAAA,CACA,CACAF,KAAA,OAKAG,aAAA,CACAC,SADA,YAEAC,MAAA,QAEAC,WAAA,IA/BAC,QAAA,WAmCAC,KAAAC,WAEAC,QAAA,CAAAC,YAAA,WAEAH,KAAAI,MAAAC,SAAAC,cACAN,KAAAb,KAAA,CAAAC,KAAA,GAAAC,YAAA,IAIAW,KAAAO,MAAA,iCAPAC,qBAAA,SAAAzB,GASA,IAAA0B,EAAAT,KACMU,EAAA3B,EAAN4B,KAAA,CACAC,IADA,mCAEAC,KAFA,OAGAC,SAHA,OAIAC,YAJA,mBAKA9B,KAAA,CACA+B,OAAAjC,GAEAkC,QAAA,SAAAlC,GACA0B,EAAAtB,KAAAC,KAAAL,EAAAE,KAAAF,EAAAE,KAAAG,KAAA,GACAqB,EAAAL,MAAAc,KAAAC,eAAA,IACAV,EAAAtB,KAAAE,YAAAN,EAAAE,KACAF,EAAAE,KADAI,YAAA,GAGAoB,EAAAL,MAAAc,KAAAC,eAAAV,EAAAtB,KAAAE,cAEA+B,MAAA,SAAArC,GACA0B,EAAAY,SAAA,CACAC,QAAAvC,EADAuC,QAEAT,KAAA,gBA7BAZ,QAAA,WAmCA,IAAAlB,EAAAiB,KACMU,EAAA3B,EAAN4B,KAAA,CACAC,IADA,6BAEAC,KAFA,OAGAC,SAHA,OAIAG,QAAA,SAAAR,GACA1B,EAAAQ,SAAAkB,EAAAxB,KAAAwB,EAAAxB,KAAAsC,KAAA,IAEAH,MAAA,SAAAX,GACA1B,EAAAsC,SAAA,CACAC,QAAAb,EADAa,QAEAT,KAAA,gBA9CAW,YAAA,SAAAzC,GAmDA,IACA0B,EAAAT,KAEAyB,EAAA,eACAC,EAAA1B,KAAAI,MAAAc,KAAAS,iBACAC,EAAA,CACApC,KAAAQ,KAAAb,KAAAC,KADAI,KAEAH,YAAAqC,GAPA,OASA1B,KAAAb,KAAAC,KAAAI,KATAkC,GAiBA,GAAA3C,GAEA,2BACA0C,GAAA,OACAG,EAAAC,GAAA7B,KAAAgB,SAEA,WACAS,GAAA,YAEAzB,KAAA8B,SAAA,iCACAC,kBADA,KAEAC,iBAFA,KAGAnB,KAAA,YAHAoB,KAKA,WACQvB,EAAA3B,EAAR4B,KAAA,CAAAC,IAAAa,EAEAZ,KAFA,OAGAC,SAHA,OAIAC,YAJA,mBAAA9B,KAAA2C,EAAAX,QAAA,SAAAlC,GAOA0B,EAAAyB,OAAAnD,EAAAuC,QAAA,IACAT,KADA,UAEAkB,kBAFA,MAGAI,SAAA,WACA1B,EAAAN,kBAXAiB,MAAA,SAAArC,GAgBA0B,EAAAY,SAAA,CACAC,QAAAvC,EADAuC,QAEAT,KAAA,iBAxBAuB,MA6BA,gBAzCApC,KAAAqB,SAAA,YAdA,IAUArB,KAAAqB,SAAA,YAVA,KA0DAgB,MAAA,CAAAC,8BAAA,SAAAvD,GAEAiB,KAAAd,cAAAH,EACAiB,KAAAgB,QACAhB,KAAAQ,qBAAAR,KAAAgB,SAGAuB,UAAA,CAAAC,MAAA,EAEAC,QAAA,SAAA1D,GACA,GAAAA,EAAA2D,SACA1C,KAAAI,MAAAc,KAAAC,eAAA,IACAnB,KAAAb,KAAA,CAAAC,KAAA,GAAAC,YAAA,SCxRU,eAAgBN,EAAAiB,KAAaS,EAAA1B,EAAA4D,eAA0BC,EAAA7D,EAAA8D,MAAAC,IAAArC,EAAwB,OAAAmC,EAAA,aAAuBG,MAAA,CAAOC,MAAAjE,EAAAwD,UAAAU,YAAAC,MAAA,MAAAC,cAAA,EAAAC,wBAAA,GAAgGC,GAAA,CAAKC,MAAAvE,EAAAoB,aAAwBoD,MAAA,CAAQC,MAAAzE,EAAAG,cAAAiD,SAAA,SAAA1B,GAAmD1B,EAAAG,cAAAuB,GAAsBgD,WAAA,kBAA6B,CAAAb,EAAA,WAAgBc,IAAA,WAAAX,MAAA,CAAsBQ,MAAAxE,EAAAI,OAAkB,CAAAyD,EAAA,gBAAqBG,MAAA,CAAOlD,MAAA,MAAA8D,KAAA,OAAAC,cAAA7E,EAAAO,iBAA8D,CAAAsD,EAAA,YAAiBG,MAAA,CAAAc,gBAAA,OAA6BN,MAAA,CAAQC,MAAAzE,EAAAI,KAAAC,KAAAI,KAAA2C,SAAA,SAAA1B,GAAoD1B,EAAA+E,KAAA/E,EAAAI,KAAAC,KAAA,OAAAqB,IAAqCgD,WAAA,qBAA8B,GAAA1E,EAAAgF,GAAA,KAAAnB,EAAA,gBAAqCoB,YAAA,mBAAAjB,MAAA,CAAsClD,MAAA,QAAA8D,KAAA,cAAAC,cAAA7E,EAAAO,iBAAuE,CAAAsD,EAAA,WAAgBc,IAAA,OAAAM,YAAA,YAAAjB,MAAA,CAA0C9D,KAAAF,EAAAQ,SAAA0E,gBAAA,GAAAC,WAAA,KAAAC,qBAAApF,EAAAe,UAAAsE,uBAAArF,EAAAI,KAAAE,YAAAL,MAAAD,EAAAY,iBAAgK,OAAAZ,EAAAgF,GAAA,KAAAnB,EAAA,OAAgCoB,YAAA,gBAAAjB,MAAA,CAAAsB,KAAA,UAAmDA,KAAA,UAAe,CAAAzB,EAAA,aAAkBS,GAAA,CAAIiB,MAAAvF,EAAAoB,cAAyB,CAAApB,EAAAgF,GAAA,YAAAhF,EAAAgF,GAAA,KAAAnB,EAAA,aAAiDG,MAAA,CAAAlC,KAAA,WAAwBwC,GAAA,CAAKiB,MAAA,WAAyB,OAAAvF,EAAAyC,YAAAzC,EAAAwD,UAAAG,WAA+C,CAAA3D,EAAAgF,GAAA,KAAAhF,EAAAwF,GAAAxF,EAAAwD,UAAAiC,WAAA,iBFQpyC,MAKhB,KACA,WACA,MAIeC,QG4CfC,EAAA,CACAC,WAAA,CACAC,UADAnD,EAAA1C,EAEA8F,QAFAnD,EAAA3C,EAAA+F,iBAAAlG,EAIAmG,OAAArE,EAAA3B,GALAE,KAAA,WAQA,OAAAqD,+BAAA,EAEAtB,OAFA,GAGAuB,UAAA,CACAG,OADA,GAEAO,YAFA,GAGAuB,UAAA,IAEAA,UARA,GASAQ,UAAA,CAAAC,SAAA,IAAAC,UAAA,mBAGAtE,IAHA,oBAIAuE,UAAA,UAIAC,QAAA,CAAAC,WAAA,SAAAtG,GAMA,OAAAuG,EAAA,UAAAC,EAAA,SAAAxG,KA/BAgB,QAAA,WAyCAC,KAAAI,MAAAoF,QAAAjF,MAAA,WANA,CACAV,MADA,OAEAL,KAFA,aAGAiG,SAHA,aAIAC,UAAA,KAIAxF,QAAA,CAAAyF,UAAA,WAEA3F,KAAAI,MAAA4E,UAAAzE,MAAA,cAFAqF,yBAAA,SAAA7G,EAAA0B,GAKAT,KAAAsC,+BAAA,EACAtC,KAAAgB,OAAAjC,IAAA8C,GAAA,GACA7B,KAAAuC,UAAAG,OAAAjC,EACAT,KAAAuC,UAAAU,YAAAxC,EAAA,UACAT,KAAAuC,UAAAiC,UAAA/D,EAAA,WATAoF,WAAA,SAAA9G,GAYA,IAAA0B,EAAAT,KACAA,KAAA8B,SAAA,gCACAC,kBADA,KAEAC,iBAFA,KAGAnB,KAAA,YAHAoB,KAKA,WACQvB,EAAA3B,EAAR4B,KAAA,CACAC,IADA,sBAEAC,KAFA,OAGA5B,KAAA,CACA4C,GAAA9C,EAAA8C,IAEAf,SANA,OAOAC,YAPA,mBAAAE,QAAA,WAQA,IAAAlC,EAAAiB,KACAS,EAAAyB,OAAA,WACArB,KADA,UAEAkB,kBAFA,MAGAI,SAAA,WACA1B,EAAAL,MAAA4E,UAAAzE,MAAA,aACAE,EAAAL,MAAA0F,SAAA/G,EAAAqB,MAAA0F,QAAAvF,MAAA,iBAdAa,MAAA,SAAArC,GAmBA0B,EAAAY,SAAA,CACAC,QAAAvC,EADAuC,QAEAT,KAAA,iBA3BAuB,MAgCA,eA7CA2D,aAAA,WAgDA/F,KAAAsC,+BAAA,EACAtC,KAAAgB,OAAA,GACAhB,KAAA2F,eCpJIK,UAAYnH,OAAAC,EAAAC,EAAAF,CAAA6F,ECRhB,eAA0B3F,EAAAiB,KAAaS,EAAA1B,EAAA4D,eAA0BC,EAAA7D,EAAA8D,MAAAC,IAAArC,EAAwB,OAAAmC,EAAA,YAAsBc,IAAA,WAAc,CAAAd,EAAA,YAAiByB,KAAA,cAAkB,CAAAzB,EAAA,cAAmBc,IAAA,YAAAX,MAAA,CAAuBkD,aAAAlH,EAAAiG,YAA4B,CAAApC,EAAA,OAAYsD,YAAA,CAAAC,gBAAA,QAAoCpD,MAAA,CAAAsB,KAAA,cAA4BA,KAAA,cAAmB,CAAAzB,EAAA,aAAkBoB,YAAA,SAAAjB,MAAA,CAAAlC,KAAA,UAAAuF,KAAA,SAA4D/C,GAAA,CAAKiB,MAAA,WAAyB,OAAAvF,EAAA6G,yBAAA,QAA2C,CAAA7G,EAAAgF,GAAA,gBAAAhF,EAAAgF,GAAA,KAAAnB,EAAA,YAAoDyB,KAAA,WAAe,CAAAzB,EAAA,mBAAwBG,MAAA,CAAAY,KAAA,OAAA9D,MAAA,KAAAqD,MAAA,MAA8CnE,EAAAgF,GAAA,KAAAnB,EAAA,mBAAoCG,MAAA,CAAAlD,MAAA,MAAoBwG,YAAAtH,EAAAuH,GAAA,EAAsBC,IAAA,UAAAC,GAAA,SAAA/F,GAAiC,OAAAmC,EAAA,UAAqBG,MAAA,CAAOlC,KAAA9B,EAAA0H,GAAA,aAAA1H,CAAA0B,EAAAiG,IAAAC,QAA6C,CAAA5H,EAAAgF,GAAAhF,EAAAwF,GAAA,GAAA9D,EAAAiG,IAAAC,KAAA,uBAAyD5H,EAAAgF,GAAA,KAAAnB,EAAA,mBAAoCG,MAAA,CAAAlD,MAAA,KAAAqD,MAAA,IAA+BmD,YAAAtH,EAAAuH,GAAA,EAAsBC,IAAA,UAAAC,GAAA,SAAA/F,GAAiC,OAAAmC,EAAA,aAAwBG,MAAA,CAAAlC,KAAA,OAAAuF,KAAA,SAAoC/C,GAAA,CAAKiB,MAAA,WAAyB,OAAAvF,EAAA6G,yBAAAnF,EAAAiG,IAAA,MAAmD,CAAA3H,EAAAgF,GAAA,QAAAhF,EAAAgF,GAAA,KAAAnB,EAAA,aAA6CG,MAAA,CAAAlC,KAAA,OAAAuF,KAAA,SAAoC/C,GAAA,CAAKiB,MAAA,WAAyB,OAAAvF,EAAA8G,WAAApF,EAAAiG,QAAmC,CAAA3H,EAAAgF,GAAA,gBAAsB,OAAAhF,EAAAgF,GAAA,KAAAnB,EAAA,qBAA8CG,MAAA,CAAOT,8BAAAvD,EAAAuD,8BAAAtB,OAAAjC,EAAAiC,OAAAuB,UAAAxD,EAAAwD,WAAgHc,GAAA,CAAKuD,6BAAA7H,EAAAgH,iBAAiD,QDQh9C,MAKhB,KACA,WACA,OAIetF,EAAA,QAAAuF,EAASvB,6BEhBxB,IAAA/D,EAAckC,EAAQ,KACtB,iBAAAlC,MAAA,EAA4C3B,EAAA8H,EAA5CnG,EAAqD,MACrDA,EAAAoG,SAAA/H,EAAA0F,QAAA/D,EAAAoG,SAGArF,EADUmB,EAAQ,GAA2FmE,SAC7G,WAAArG,GAAA,2BCLA,IAAAA,EAAckC,EAAQ,KACtB,iBAAAlC,MAAA,EAA4C3B,EAAA8H,EAA5CnG,EAAqD,MACrDA,EAAAoG,SAAA/H,EAAA0F,QAAA/D,EAAAoG,SAGArF,EADUmB,EAAQ,GAA2FmE,SAC7G,WAAArG,GAAA,4CCRAA,EAAAkC,EAAA,KAAAA,EAAAoE,EAAAtG,GAAsjB3B,wBCAtjBA,EAAA0F,QAA2B7B,EAAQ,EAARA,EAAA,IAE3BqE,KAAA,CAAclI,EAAA8H,EAAS,o8BAAg8B,GAAv9B,CAAAK,QAAA,EAAAC,QAAA,4DAAAC,MAAA,GAAAC,SAAA,mTAAAC,KAAA,qFAAAC,eAAA,q8PCFA7G,EAAAkC,EAAA,KAAAA,EAAAoE,EAAAtG,GAA2iB3B,wBCA3iBA,EAAA0F,QAA2B7B,EAAQ,EAARA,EAAA,IAE3BqE,KAAA,CAAclI,EAAA8H,EAAS,gNAA4M,GAAnO,CAAAK,QAAA,EAAAC,QAAA,iDAAAC,MAAA,GAAAC,SAAA,6EAAAC,KAAA,0EAAAC,eAAA","file":"dist/js/61.b3c9766c5472ecf455ea.js","sourcesContent":["import { render, staticRenderFns } from \"./rolePermissionsDialog.vue?vue&type=template&id=5fc77f80&scoped=true&\"\nimport script from \"./rolePermissionsDialog.vue?vue&type=script&lang=js&\"\nexport * from \"./rolePermissionsDialog.vue?vue&type=script&lang=js&\"\nimport style0 from \"./rolePermissionsDialog.vue?vue&type=style&index=0&id=5fc77f80&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5fc77f80\",\n  null\n  \n)\n\nexport default component.exports","<!--\r\n * @Description: \r\n * @Author: jinxiaojian\r\n * @Email: jinxiaojian@youxin.com\r\n * @Date: 2019-07-12 16:17:33\r\n * @LastEditTime: 2019-07-16 16:57:25\r\n * @LastEditors: 靳肖健\r\n -->\r\n<template>\r\n  <el-dialog\r\n    :title=\"addOrEdit.dialogTitle\"\r\n    v-model=\"dialogVisible\"\r\n    width=\"30%\"\r\n    :show-close=\"false\"\r\n    @close=\"closeDialog\"\r\n    :close-on-click-modal=\"false\"\r\n  >\r\n    <el-form :model=\"form\" ref=\"ruleForm\">\r\n      <el-form-item label=\"角色：\" prop=\"name\" :label-width=\"formLabelWidth\">\r\n        <el-input v-model=\"form.role.name\" auto-complete=\"off\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item\r\n        label=\"报表权限：\"\r\n        prop=\"permissions\"\r\n        :label-width=\"formLabelWidth\"\r\n        class=\"report checkbox1\"\r\n      >\r\n        <!--<el-checkbox-group v-model=\"form.permissions\">-->\r\n        <!--<ul>-->\r\n        <!--<li v-for=\"perms1 in permTree\">-->\r\n        <!--<el-checkbox :label=\"perms1.id\" :key=\"perms1.id\" class=\"firstCheckbox\">{{perms1.name}}-->\r\n        <!--</el-checkbox>-->\r\n        <!--<template v-if=\"perms1.type == 'MENU'\">-->\r\n        <!--<template v-for=\"perms2 in perms1.childTree\">-->\r\n        <!--<el-checkbox :label=\"perms2.id\" :key=\"perms2.id\" class=\"secondCheckbox\">-->\r\n        <!--{{perms2.name}}-->\r\n        <!--</el-checkbox>-->\r\n        <!--<template v-if=\"perms2.type == 'MENU'\">-->\r\n        <!--<el-checkbox v-for=\"perms3 in perms2.childPerms\" :key=\"perms3.id\" :label=\"perms3.id\"-->\r\n        <!--class=\"thirdCheckbox\">{{perms3.name}}-->\r\n        <!--</el-checkbox>-->\r\n        <!--</template>-->\r\n        <!--</template>-->\r\n        <!--</template>-->\r\n        <!--</li>-->\r\n        <!--</ul>-->\r\n        <!--</el-checkbox-group>-->\r\n        <el-tree\r\n          class=\"self-tree\"\r\n          ref=\"tree\"\r\n          :data=\"permTree\"\r\n          show-checkbox\r\n          node-key=\"id\"\r\n          :default-expand-all=\"expandAll\"\r\n          :default-checked-keys=\"form.permissions\"\r\n          :props=\"defaultProps\"\r\n        ></el-tree>\r\n      </el-form-item>\r\n    </el-form>\r\n    <div slot=\"footer\" class=\"dialog-footer\">\r\n      <el-button @click=\"closeDialog\">&nbsp;&nbsp;取消&nbsp;&nbsp;</el-button>\r\n      <el-button\r\n        type=\"primary\"\r\n        @click=\"saveRoleSet(addOrEdit.status)\"\r\n      >&nbsp;&nbsp;{{addOrEdit.dialogBtn}}&nbsp;&nbsp;</el-button>\r\n    </div>\r\n  </el-dialog>\r\n</template>\r\n<style scoped>\r\n.el-dialog .el-dialog__header {\r\n  text-align: center;\r\n}\r\n\r\n.report .el-form-item__label {\r\n  display: block;\r\n}\r\n\r\n.checkbox1 {\r\n  overflow: hidden;\r\n}\r\n\r\n.checkbox1 li {\r\n  float: left;\r\n  margin-right: 15px;\r\n  width: 100px;\r\n}\r\n\r\n.checkbox1 .el-checkbox-group .el-checkbox {\r\n  height: 20px;\r\n  line-height: 20px;\r\n  margin-bottom: 0px;\r\n  display: block;\r\n  border-left: 1px solid #000;\r\n  padding-left: 5px;\r\n}\r\n\r\n.checkbox1 .el-checkbox-group .firstCheckbox {\r\n  border-left: none;\r\n}\r\n\r\n.checkbox1 .el-checkbox-group .secondCheckbox {\r\n  margin-left: 12px;\r\n}\r\n\r\n.checkbox1 .el-checkbox-group .thirdCheckbox {\r\n  margin-left: 24px;\r\n}\r\n\r\n.btns {\r\n  width: 100%;\r\n  text-align: center;\r\n  margin-top: 20px;\r\n}\r\n\r\n.btns .el-button {\r\n  padding: 10px 50px;\r\n}\r\n</style>\r\n<style>\r\n</style>\r\n<script>\r\nimport Common from \"../../../utils/common\";\r\nexport default {\r\n  props: [\r\n    \"reportPermissionDialogVisible\",\r\n    \"reportPermissionDialogClosed\",\r\n    \"roleId\",\r\n    \"addOrEdit\",\r\n  ],\r\n  data() {\r\n    return {\r\n      dialogVisible: false,\r\n      form: {\r\n        role: {},\r\n        permissions: [], //权限\r\n      },\r\n      formLabelWidth: \"90px\",\r\n      permTree: [\r\n        {\r\n          //权限树\r\n          name: \"\",\r\n          parentId: \"\",\r\n          childPerms: [\r\n            {\r\n              name: \"\",\r\n            },\r\n          ],\r\n        },\r\n      ],\r\n      defaultProps: {\r\n        children: \"childTree\",\r\n        label: \"name\",\r\n      },\r\n      expandAll: true,\r\n    };\r\n  },\r\n  mounted() {\r\n    this.getMenu();\r\n  },\r\n  methods: {\r\n    closeDialog() {\r\n      this.$refs[\"ruleForm\"].resetFields();\r\n      this.form = {\r\n        role: {},\r\n        permissions: [], //权限\r\n      };\r\n      this.$emit(\"reportPermissionDialogClosed\");\r\n    },\r\n    getPermissionsByRole(id) {\r\n      Common.ajax({\r\n        url: \"/web/v1/permission/getTreeByRole\",\r\n        type: \"POST\",\r\n        dataType: \"json\",\r\n        contentType: \"application/json\",\r\n        data: {\r\n          roleId: id,\r\n        },\r\n        success: response => {\r\n          this.form.role = response.data ? response.data.role : \"\";\r\n          this.$refs.tree.setCheckedKeys([]);\r\n          this.form.permissions = response.data\r\n            ? response.data.permissions\r\n            : \"\";\r\n          this.$refs.tree.setCheckedKeys(this.form.permissions);\r\n        },\r\n        error: response => {\r\n          this.$message({\r\n            message: response.message,\r\n            type: \"warning\",\r\n          });\r\n        },\r\n      });\r\n    },\r\n\r\n    getMenu() {\r\n      Common.ajax({\r\n        url: \"/web/v1/permission/getTree\",\r\n        type: \"POST\",\r\n        dataType: \"json\",\r\n        success: response => {\r\n          this.permTree = response.data ? response.data.list : \"\";\r\n        },\r\n        error: response => {\r\n          this.$message({\r\n            message: response.message,\r\n            type: \"warning\",\r\n          });\r\n        },\r\n      });\r\n    },\r\n    saveRoleSet(flag) {\r\n      let self = this;\r\n      let confirmTips = \"\";\r\n      let url = \"web/v1/role/\";\r\n      let checkPers = this.$refs.tree.getCheckedKeys();\r\n      let params = {\r\n        name: this.form.role.name,\r\n        permissions: checkPers,\r\n      };\r\n      if (!this.form.role.name) {\r\n        this.$message(\"请输入角色名称\");\r\n        return false;\r\n      }\r\n      if (!checkPers) {\r\n        this.$message(\"请选择权限名称\");\r\n        return false;\r\n      }\r\n      if (flag == 0) {\r\n        //编辑\r\n        confirmTips = \"您的编辑将对这个角色下的所有用户生效，是否确认?\";\r\n        url += \"edit\";\r\n        params.id = this.roleId;\r\n      } else {\r\n        confirmTips = \"确认新增该角色?\";\r\n        url += \"add\";\r\n      }\r\n      this.$confirm(\"您的编辑将对这个角色下的所有用户生效，是否确认?\", \"提示\", {\r\n        confirmButtonText: \"确认\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\",\r\n      })\r\n        .then(() => {\r\n          Common.ajax({\r\n            url: url,\r\n            type: \"post\",\r\n            dataType: \"json\",\r\n            contentType: \"application/json\",\r\n            data: params,\r\n            success(response) {\r\n              self.$alert(response.message, \"\", {\r\n                type: \"success\",\r\n                confirmButtonText: \"知道了\",\r\n                callback: action => {\r\n                  self.closeDialog();\r\n                },\r\n              });\r\n            },\r\n            error(response) {\r\n              self.$message({\r\n                message: response.message,\r\n                type: \"warning\",\r\n              });\r\n            },\r\n          });\r\n        })\r\n        .catch(() => {});\r\n    },\r\n  },\r\n  watch: {\r\n    reportPermissionDialogVisible(val) {\r\n      this.dialogVisible = val;\r\n      if (this.roleId) {\r\n        this.getPermissionsByRole(this.roleId);\r\n      }\r\n    },\r\n    addOrEdit: {\r\n      deep: true,\r\n      handler: function(val, oldVal) {\r\n        if (val.status == 1) {\r\n          this.$refs.tree.setCheckedKeys([]);\r\n          this.form = {\r\n            role: {},\r\n            permissions: [], //权限\r\n          };\r\n        }\r\n      },\r\n    },\r\n  },\r\n};\r\n</script>\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',{attrs:{\"title\":_vm.addOrEdit.dialogTitle,\"width\":\"30%\",\"show-close\":false,\"close-on-click-modal\":false},on:{\"close\":_vm.closeDialog},model:{value:(_vm.dialogVisible),callback:function ($$v) {_vm.dialogVisible=$$v},expression:\"dialogVisible\"}},[_c('el-form',{ref:\"ruleForm\",attrs:{\"model\":_vm.form}},[_c('el-form-item',{attrs:{\"label\":\"角色：\",\"prop\":\"name\",\"label-width\":_vm.formLabelWidth}},[_c('el-input',{attrs:{\"auto-complete\":\"off\"},model:{value:(_vm.form.role.name),callback:function ($$v) {_vm.$set(_vm.form.role, \"name\", $$v)},expression:\"form.role.name\"}})],1),_vm._v(\" \"),_c('el-form-item',{staticClass:\"report checkbox1\",attrs:{\"label\":\"报表权限：\",\"prop\":\"permissions\",\"label-width\":_vm.formLabelWidth}},[_c('el-tree',{ref:\"tree\",staticClass:\"self-tree\",attrs:{\"data\":_vm.permTree,\"show-checkbox\":\"\",\"node-key\":\"id\",\"default-expand-all\":_vm.expandAll,\"default-checked-keys\":_vm.form.permissions,\"props\":_vm.defaultProps}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":_vm.closeDialog}},[_vm._v(\"  取消  \")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.saveRoleSet(_vm.addOrEdit.status)}}},[_vm._v(\"  \"+_vm._s(_vm.addOrEdit.dialogBtn)+\"  \")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\n * @Description: \r\n * @Author: jinxiaojian\r\n * @Email: jinxiaojian@youxin.com\r\n * @Date: 2019-07-12 16:17:33\r\n * @LastEditTime: 2019-07-17 19:42:02\r\n * @LastEditors: 王娇(wangjiao)\r\n -->\r\n<template>\r\n  <tab-page ref=\"tabPage\">\r\n    <template slot=\"roleManage\">\r\n      <data-table :data-table=\"dataTable\" ref=\"dataTable\">\r\n        <div slot=\"conditions\" style=\"margin-bottom:15px\">\r\n          <el-button\r\n            type=\"primary\"\r\n            size=\"small\"\r\n            class=\"create\"\r\n            @click=\"openReportPermissionPage(0,1)\"\r\n          >&nbsp;&nbsp;新建&nbsp;&nbsp;</el-button>\r\n        </div>\r\n        <template slot=\"columns\">\r\n          <el-table-column prop=\"name\" label=\"角色\" width></el-table-column>\r\n          <el-table-column label=\"状态\">\r\n            <template slot-scope=\"scope\">\r\n              <el-tag :type=\"scope.row.flag | flagFilter\">{{scope.row.flag == 0?'使用中':'已失效'}}</el-tag>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"操作\" width>\r\n            <template slot-scope=\"scope\">\r\n              <el-button type=\"text\" size=\"small\" @click=\"openReportPermissionPage(scope.row,0)\">编辑</el-button>\r\n              <el-button type=\"text\" size=\"small\" @click=\"deleteRole(scope.row)\">删除</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </template>\r\n      </data-table>\r\n      <report-permission\r\n        :reportPermissionDialogVisible=\"reportPermissionDialogVisible\"\r\n        v-on:reportPermissionDialogClosed=\"dialogClosed\"\r\n        :roleId=\"roleId\"\r\n        :addOrEdit=\"addOrEdit\"\r\n      ></report-permission>\r\n    </template>\r\n  </tab-page>\r\n</template>\r\n<style scoped>\r\n.el-table th > .cell {\r\n  text-align: center;\r\n}\r\n\r\n.create {\r\n  float: right;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.mb-10 {\r\n  margin-bottom: 10px;\r\n}\r\n</style>\r\n<script>\r\nimport Common from '../../../utils/common';\r\nimport DataTable from '../../../components/DataTable';\r\nimport TabPage from '../../../components/TabPage';\r\nimport ReportPermission from '../permission/rolePermissionsDialog.vue';\r\nexport default {\r\n  components: {\r\n    DataTable,\r\n    TabPage,\r\n    ReportPermission,\r\n    Common\r\n  },\r\n  data() {\r\n    return {\r\n      reportPermissionDialogVisible: false,\r\n      roleId: '',\r\n      addOrEdit: {\r\n        status: '',\r\n        dialogTitle: '',\r\n        dialogBtn: ''\r\n      },\r\n      dialogBtn: '',\r\n      dataTable: {\r\n        pageSize: 1000,\r\n        pageSizes: [10, 20, 50, 100, 1000],\r\n        url: '/web/v1/role/list',\r\n        emptyText: '没有记录'\r\n      }\r\n    };\r\n  },\r\n  filters: {\r\n    flagFilter(item) {\r\n      const itemsMap = {\r\n        0: 'success',\r\n        1: 'error'\r\n      };\r\n      return itemsMap[item];\r\n    }\r\n  },\r\n  mounted() {\r\n    var defaultPage = {\r\n      label: '角色管理',\r\n      name: 'roleManage',\r\n      slotName: 'roleManage',\r\n      closable: false\r\n    };\r\n    this.$refs.tabPage.$emit('open-tab', defaultPage);\r\n  },\r\n  methods: {\r\n    loadLists() {\r\n      this.$refs.dataTable.$emit('load-data');\r\n    },\r\n    openReportPermissionPage(obj, flag) {\r\n      this.reportPermissionDialogVisible = true;\r\n      this.roleId = obj ? obj.id : '';\r\n      this.addOrEdit.status = flag;\r\n      this.addOrEdit.dialogTitle = flag ? '新建' : '编辑';\r\n      this.addOrEdit.dialogBtn = flag ? '确定' : '保存';\r\n    },\r\n    deleteRole(obj) {\r\n      let self = this;\r\n      this.$confirm('删除后，该角色下的所有用户将被删除，是否确认?', '提示', {\r\n        confirmButtonText: '确认',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      })\r\n        .then(() => {\r\n          Common.ajax({\r\n            url: '/web/v1/role/delete',\r\n            type: 'post',\r\n            data: {\r\n              id: obj.id\r\n            },\r\n            dataType: 'json',\r\n            contentType: 'application/json',\r\n            success(response) {\r\n              self.$alert('删除成功', '', {\r\n                type: 'success',\r\n                confirmButtonText: '知道了',\r\n                callback: action => {\r\n                  self.$refs.dataTable.$emit('load-data');\r\n                  self.$refs.history && this.$refs.history.$emit('load-data');\r\n                }\r\n              });\r\n            },\r\n            error(response) {\r\n              self.$message({\r\n                message: response.message,\r\n                type: 'warning'\r\n              });\r\n            }\r\n          });\r\n        })\r\n        .catch(() => {});\r\n    },\r\n    dialogClosed() {\r\n      this.reportPermissionDialogVisible = false;\r\n      this.roleId = '';\r\n      this.loadLists();\r\n    }\r\n  }\r\n};\r\n</script>\r\n","import { render, staticRenderFns } from \"./roleManage.vue?vue&type=template&id=7a3726d1&scoped=true&\"\nimport script from \"./roleManage.vue?vue&type=script&lang=js&\"\nexport * from \"./roleManage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./roleManage.vue?vue&type=style&index=0&id=7a3726d1&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7a3726d1\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('tab-page',{ref:\"tabPage\"},[_c('template',{slot:\"roleManage\"},[_c('data-table',{ref:\"dataTable\",attrs:{\"data-table\":_vm.dataTable}},[_c('div',{staticStyle:{\"margin-bottom\":\"15px\"},attrs:{\"slot\":\"conditions\"},slot:\"conditions\"},[_c('el-button',{staticClass:\"create\",attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.openReportPermissionPage(0,1)}}},[_vm._v(\"  新建  \")])],1),_vm._v(\" \"),_c('template',{slot:\"columns\"},[_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"角色\",\"width\":\"\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"状态\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tag',{attrs:{\"type\":_vm._f(\"flagFilter\")(scope.row.flag)}},[_vm._v(_vm._s(scope.row.flag == 0?'使用中':'已失效'))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.openReportPermissionPage(scope.row,0)}}},[_vm._v(\"编辑\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.deleteRole(scope.row)}}},[_vm._v(\"删除\")])]}}])})],1)],2),_vm._v(\" \"),_c('report-permission',{attrs:{\"reportPermissionDialogVisible\":_vm.reportPermissionDialogVisible,\"roleId\":_vm.roleId,\"addOrEdit\":_vm.addOrEdit},on:{\"reportPermissionDialogClosed\":_vm.dialogClosed}})],1)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/_css-loader@3.1.0@css-loader/dist/cjs.js?sourceMap!../../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/index.js??vue-loader-options!./rolePermissionsDialog.vue?vue&type=style&index=0&id=5fc77f80&scoped=true&lang=css&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/_vue-style-loader@4.1.2@vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"4604796f\", content, true, {});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/_css-loader@3.1.0@css-loader/dist/cjs.js?sourceMap!../../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/index.js??vue-loader-options!./roleManage.vue?vue&type=style&index=0&id=7a3726d1&scoped=true&lang=css&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/_vue-style-loader@4.1.2@vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"0431344a\", content, true, {});","import mod from \"-!../../../../node_modules/_extract-text-webpack-plugin@4.0.0-beta.0@extract-text-webpack-plugin/dist/loader.js??ref--4-0!../../../../node_modules/_vue-style-loader@4.1.2@vue-style-loader/index.js!../../../../node_modules/_css-loader@3.1.0@css-loader/dist/cjs.js?sourceMap!../../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/index.js??vue-loader-options!./rolePermissionsDialog.vue?vue&type=style&index=0&id=5fc77f80&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/_extract-text-webpack-plugin@4.0.0-beta.0@extract-text-webpack-plugin/dist/loader.js??ref--4-0!../../../../node_modules/_vue-style-loader@4.1.2@vue-style-loader/index.js!../../../../node_modules/_css-loader@3.1.0@css-loader/dist/cjs.js?sourceMap!../../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/index.js??vue-loader-options!./rolePermissionsDialog.vue?vue&type=style&index=0&id=5fc77f80&scoped=true&lang=css&\"","exports = module.exports = require(\"../../../../node_modules/_css-loader@3.1.0@css-loader/dist/runtime/api.js\")(true);\n// Module\nexports.push([module.id, \"\\n.el-dialog .el-dialog__header[data-v-5fc77f80] {\\r\\n  text-align: center;\\n}\\n.report .el-form-item__label[data-v-5fc77f80] {\\r\\n  display: block;\\n}\\n.checkbox1[data-v-5fc77f80] {\\r\\n  overflow: hidden;\\n}\\n.checkbox1 li[data-v-5fc77f80] {\\r\\n  float: left;\\r\\n  margin-right: 15px;\\r\\n  width: 100px;\\n}\\n.checkbox1 .el-checkbox-group .el-checkbox[data-v-5fc77f80] {\\r\\n  height: 20px;\\r\\n  line-height: 20px;\\r\\n  margin-bottom: 0px;\\r\\n  display: block;\\r\\n  border-left: 1px solid #000;\\r\\n  padding-left: 5px;\\n}\\n.checkbox1 .el-checkbox-group .firstCheckbox[data-v-5fc77f80] {\\r\\n  border-left: none;\\n}\\n.checkbox1 .el-checkbox-group .secondCheckbox[data-v-5fc77f80] {\\r\\n  margin-left: 12px;\\n}\\n.checkbox1 .el-checkbox-group .thirdCheckbox[data-v-5fc77f80] {\\r\\n  margin-left: 24px;\\n}\\n.btns[data-v-5fc77f80] {\\r\\n  width: 100%;\\r\\n  text-align: center;\\r\\n  margin-top: 20px;\\n}\\n.btns .el-button[data-v-5fc77f80] {\\r\\n  padding: 10px 50px;\\n}\\r\\n\", \"\",{\"version\":3,\"sources\":[\"src/views/contents/permission/rolePermissionsDialog.vue\"],\"names\":[],\"mappings\":\";AAqEA;EACA,kBAAA;AACA;AAEA;EACA,cAAA;AACA;AAEA;EACA,gBAAA;AACA;AAEA;EACA,WAAA;EACA,kBAAA;EACA,YAAA;AACA;AAEA;EACA,YAAA;EACA,iBAAA;EACA,kBAAA;EACA,cAAA;EACA,2BAAA;EACA,iBAAA;AACA;AAEA;EACA,iBAAA;AACA;AAEA;EACA,iBAAA;AACA;AAEA;EACA,iBAAA;AACA;AAEA;EACA,WAAA;EACA,kBAAA;EACA,gBAAA;AACA;AAEA;EACA,kBAAA;AACA\",\"file\":\"rolePermissionsDialog.vue?vue&type=style&index=0&id=5fc77f80&scoped=true&lang=css&\",\"sourcesContent\":[\"<!--\\r\\n * @Description: \\r\\n * @Author: jinxiaojian\\r\\n * @Email: jinxiaojian@youxin.com\\r\\n * @Date: 2019-07-12 16:17:33\\r\\n * @LastEditTime: 2019-07-16 16:57:25\\r\\n * @LastEditors: 靳肖健\\r\\n -->\\r\\n<template>\\r\\n  <el-dialog\\r\\n    :title=\\\"addOrEdit.dialogTitle\\\"\\r\\n    v-model=\\\"dialogVisible\\\"\\r\\n    width=\\\"30%\\\"\\r\\n    :show-close=\\\"false\\\"\\r\\n    @close=\\\"closeDialog\\\"\\r\\n    :close-on-click-modal=\\\"false\\\"\\r\\n  >\\r\\n    <el-form :model=\\\"form\\\" ref=\\\"ruleForm\\\">\\r\\n      <el-form-item label=\\\"角色：\\\" prop=\\\"name\\\" :label-width=\\\"formLabelWidth\\\">\\r\\n        <el-input v-model=\\\"form.role.name\\\" auto-complete=\\\"off\\\"></el-input>\\r\\n      </el-form-item>\\r\\n      <el-form-item\\r\\n        label=\\\"报表权限：\\\"\\r\\n        prop=\\\"permissions\\\"\\r\\n        :label-width=\\\"formLabelWidth\\\"\\r\\n        class=\\\"report checkbox1\\\"\\r\\n      >\\r\\n        <!--<el-checkbox-group v-model=\\\"form.permissions\\\">-->\\r\\n        <!--<ul>-->\\r\\n        <!--<li v-for=\\\"perms1 in permTree\\\">-->\\r\\n        <!--<el-checkbox :label=\\\"perms1.id\\\" :key=\\\"perms1.id\\\" class=\\\"firstCheckbox\\\">{{perms1.name}}-->\\r\\n        <!--</el-checkbox>-->\\r\\n        <!--<template v-if=\\\"perms1.type == 'MENU'\\\">-->\\r\\n        <!--<template v-for=\\\"perms2 in perms1.childTree\\\">-->\\r\\n        <!--<el-checkbox :label=\\\"perms2.id\\\" :key=\\\"perms2.id\\\" class=\\\"secondCheckbox\\\">-->\\r\\n        <!--{{perms2.name}}-->\\r\\n        <!--</el-checkbox>-->\\r\\n        <!--<template v-if=\\\"perms2.type == 'MENU'\\\">-->\\r\\n        <!--<el-checkbox v-for=\\\"perms3 in perms2.childPerms\\\" :key=\\\"perms3.id\\\" :label=\\\"perms3.id\\\"-->\\r\\n        <!--class=\\\"thirdCheckbox\\\">{{perms3.name}}-->\\r\\n        <!--</el-checkbox>-->\\r\\n        <!--</template>-->\\r\\n        <!--</template>-->\\r\\n        <!--</template>-->\\r\\n        <!--</li>-->\\r\\n        <!--</ul>-->\\r\\n        <!--</el-checkbox-group>-->\\r\\n        <el-tree\\r\\n          class=\\\"self-tree\\\"\\r\\n          ref=\\\"tree\\\"\\r\\n          :data=\\\"permTree\\\"\\r\\n          show-checkbox\\r\\n          node-key=\\\"id\\\"\\r\\n          :default-expand-all=\\\"expandAll\\\"\\r\\n          :default-checked-keys=\\\"form.permissions\\\"\\r\\n          :props=\\\"defaultProps\\\"\\r\\n        ></el-tree>\\r\\n      </el-form-item>\\r\\n    </el-form>\\r\\n    <div slot=\\\"footer\\\" class=\\\"dialog-footer\\\">\\r\\n      <el-button @click=\\\"closeDialog\\\">&nbsp;&nbsp;取消&nbsp;&nbsp;</el-button>\\r\\n      <el-button\\r\\n        type=\\\"primary\\\"\\r\\n        @click=\\\"saveRoleSet(addOrEdit.status)\\\"\\r\\n      >&nbsp;&nbsp;{{addOrEdit.dialogBtn}}&nbsp;&nbsp;</el-button>\\r\\n    </div>\\r\\n  </el-dialog>\\r\\n</template>\\r\\n<style scoped>\\r\\n.el-dialog .el-dialog__header {\\r\\n  text-align: center;\\r\\n}\\r\\n\\r\\n.report .el-form-item__label {\\r\\n  display: block;\\r\\n}\\r\\n\\r\\n.checkbox1 {\\r\\n  overflow: hidden;\\r\\n}\\r\\n\\r\\n.checkbox1 li {\\r\\n  float: left;\\r\\n  margin-right: 15px;\\r\\n  width: 100px;\\r\\n}\\r\\n\\r\\n.checkbox1 .el-checkbox-group .el-checkbox {\\r\\n  height: 20px;\\r\\n  line-height: 20px;\\r\\n  margin-bottom: 0px;\\r\\n  display: block;\\r\\n  border-left: 1px solid #000;\\r\\n  padding-left: 5px;\\r\\n}\\r\\n\\r\\n.checkbox1 .el-checkbox-group .firstCheckbox {\\r\\n  border-left: none;\\r\\n}\\r\\n\\r\\n.checkbox1 .el-checkbox-group .secondCheckbox {\\r\\n  margin-left: 12px;\\r\\n}\\r\\n\\r\\n.checkbox1 .el-checkbox-group .thirdCheckbox {\\r\\n  margin-left: 24px;\\r\\n}\\r\\n\\r\\n.btns {\\r\\n  width: 100%;\\r\\n  text-align: center;\\r\\n  margin-top: 20px;\\r\\n}\\r\\n\\r\\n.btns .el-button {\\r\\n  padding: 10px 50px;\\r\\n}\\r\\n</style>\\r\\n<style>\\r\\n</style>\\r\\n<script>\\r\\nimport Common from \\\"../../../utils/common\\\";\\r\\nexport default {\\r\\n  props: [\\r\\n    \\\"reportPermissionDialogVisible\\\",\\r\\n    \\\"reportPermissionDialogClosed\\\",\\r\\n    \\\"roleId\\\",\\r\\n    \\\"addOrEdit\\\",\\r\\n  ],\\r\\n  data() {\\r\\n    return {\\r\\n      dialogVisible: false,\\r\\n      form: {\\r\\n        role: {},\\r\\n        permissions: [], //权限\\r\\n      },\\r\\n      formLabelWidth: \\\"90px\\\",\\r\\n      permTree: [\\r\\n        {\\r\\n          //权限树\\r\\n          name: \\\"\\\",\\r\\n          parentId: \\\"\\\",\\r\\n          childPerms: [\\r\\n            {\\r\\n              name: \\\"\\\",\\r\\n            },\\r\\n          ],\\r\\n        },\\r\\n      ],\\r\\n      defaultProps: {\\r\\n        children: \\\"childTree\\\",\\r\\n        label: \\\"name\\\",\\r\\n      },\\r\\n      expandAll: true,\\r\\n    };\\r\\n  },\\r\\n  mounted() {\\r\\n    this.getMenu();\\r\\n  },\\r\\n  methods: {\\r\\n    closeDialog() {\\r\\n      this.$refs[\\\"ruleForm\\\"].resetFields();\\r\\n      this.form = {\\r\\n        role: {},\\r\\n        permissions: [], //权限\\r\\n      };\\r\\n      this.$emit(\\\"reportPermissionDialogClosed\\\");\\r\\n    },\\r\\n    getPermissionsByRole(id) {\\r\\n      Common.ajax({\\r\\n        url: \\\"/web/v1/permission/getTreeByRole\\\",\\r\\n        type: \\\"POST\\\",\\r\\n        dataType: \\\"json\\\",\\r\\n        contentType: \\\"application/json\\\",\\r\\n        data: {\\r\\n          roleId: id,\\r\\n        },\\r\\n        success: response => {\\r\\n          this.form.role = response.data ? response.data.role : \\\"\\\";\\r\\n          this.$refs.tree.setCheckedKeys([]);\\r\\n          this.form.permissions = response.data\\r\\n            ? response.data.permissions\\r\\n            : \\\"\\\";\\r\\n          this.$refs.tree.setCheckedKeys(this.form.permissions);\\r\\n        },\\r\\n        error: response => {\\r\\n          this.$message({\\r\\n            message: response.message,\\r\\n            type: \\\"warning\\\",\\r\\n          });\\r\\n        },\\r\\n      });\\r\\n    },\\r\\n\\r\\n    getMenu() {\\r\\n      Common.ajax({\\r\\n        url: \\\"/web/v1/permission/getTree\\\",\\r\\n        type: \\\"POST\\\",\\r\\n        dataType: \\\"json\\\",\\r\\n        success: response => {\\r\\n          this.permTree = response.data ? response.data.list : \\\"\\\";\\r\\n        },\\r\\n        error: response => {\\r\\n          this.$message({\\r\\n            message: response.message,\\r\\n            type: \\\"warning\\\",\\r\\n          });\\r\\n        },\\r\\n      });\\r\\n    },\\r\\n    saveRoleSet(flag) {\\r\\n      let self = this;\\r\\n      let confirmTips = \\\"\\\";\\r\\n      let url = \\\"web/v1/role/\\\";\\r\\n      let checkPers = this.$refs.tree.getCheckedKeys();\\r\\n      let params = {\\r\\n        name: this.form.role.name,\\r\\n        permissions: checkPers,\\r\\n      };\\r\\n      if (!this.form.role.name) {\\r\\n        this.$message(\\\"请输入角色名称\\\");\\r\\n        return false;\\r\\n      }\\r\\n      if (!checkPers) {\\r\\n        this.$message(\\\"请选择权限名称\\\");\\r\\n        return false;\\r\\n      }\\r\\n      if (flag == 0) {\\r\\n        //编辑\\r\\n        confirmTips = \\\"您的编辑将对这个角色下的所有用户生效，是否确认?\\\";\\r\\n        url += \\\"edit\\\";\\r\\n        params.id = this.roleId;\\r\\n      } else {\\r\\n        confirmTips = \\\"确认新增该角色?\\\";\\r\\n        url += \\\"add\\\";\\r\\n      }\\r\\n      this.$confirm(\\\"您的编辑将对这个角色下的所有用户生效，是否确认?\\\", \\\"提示\\\", {\\r\\n        confirmButtonText: \\\"确认\\\",\\r\\n        cancelButtonText: \\\"取消\\\",\\r\\n        type: \\\"warning\\\",\\r\\n      })\\r\\n        .then(() => {\\r\\n          Common.ajax({\\r\\n            url: url,\\r\\n            type: \\\"post\\\",\\r\\n            dataType: \\\"json\\\",\\r\\n            contentType: \\\"application/json\\\",\\r\\n            data: params,\\r\\n            success(response) {\\r\\n              self.$alert(response.message, \\\"\\\", {\\r\\n                type: \\\"success\\\",\\r\\n                confirmButtonText: \\\"知道了\\\",\\r\\n                callback: action => {\\r\\n                  self.closeDialog();\\r\\n                },\\r\\n              });\\r\\n            },\\r\\n            error(response) {\\r\\n              self.$message({\\r\\n                message: response.message,\\r\\n                type: \\\"warning\\\",\\r\\n              });\\r\\n            },\\r\\n          });\\r\\n        })\\r\\n        .catch(() => {});\\r\\n    },\\r\\n  },\\r\\n  watch: {\\r\\n    reportPermissionDialogVisible(val) {\\r\\n      this.dialogVisible = val;\\r\\n      if (this.roleId) {\\r\\n        this.getPermissionsByRole(this.roleId);\\r\\n      }\\r\\n    },\\r\\n    addOrEdit: {\\r\\n      deep: true,\\r\\n      handler: function(val, oldVal) {\\r\\n        if (val.status == 1) {\\r\\n          this.$refs.tree.setCheckedKeys([]);\\r\\n          this.form = {\\r\\n            role: {},\\r\\n            permissions: [], //权限\\r\\n          };\\r\\n        }\\r\\n      },\\r\\n    },\\r\\n  },\\r\\n};\\r\\n</script>\\r\\n\"]}]);\n","import mod from \"-!../../../../node_modules/_extract-text-webpack-plugin@4.0.0-beta.0@extract-text-webpack-plugin/dist/loader.js??ref--4-0!../../../../node_modules/_vue-style-loader@4.1.2@vue-style-loader/index.js!../../../../node_modules/_css-loader@3.1.0@css-loader/dist/cjs.js?sourceMap!../../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/index.js??vue-loader-options!./roleManage.vue?vue&type=style&index=0&id=7a3726d1&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/_extract-text-webpack-plugin@4.0.0-beta.0@extract-text-webpack-plugin/dist/loader.js??ref--4-0!../../../../node_modules/_vue-style-loader@4.1.2@vue-style-loader/index.js!../../../../node_modules/_css-loader@3.1.0@css-loader/dist/cjs.js?sourceMap!../../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/index.js??vue-loader-options!./roleManage.vue?vue&type=style&index=0&id=7a3726d1&scoped=true&lang=css&\"","exports = module.exports = require(\"../../../../node_modules/_css-loader@3.1.0@css-loader/dist/runtime/api.js\")(true);\n// Module\nexports.push([module.id, \"\\n.el-table th > .cell[data-v-7a3726d1] {\\r\\n  text-align: center;\\n}\\n.create[data-v-7a3726d1] {\\r\\n  float: right;\\r\\n  margin-bottom: 20px;\\n}\\n.mb-10[data-v-7a3726d1] {\\r\\n  margin-bottom: 10px;\\n}\\r\\n\", \"\",{\"version\":3,\"sources\":[\"src/views/contents/permission/roleManage.vue\"],\"names\":[],\"mappings\":\";AA6CA;EACA,kBAAA;AACA;AAEA;EACA,YAAA;EACA,mBAAA;AACA;AAEA;EACA,mBAAA;AACA\",\"file\":\"roleManage.vue?vue&type=style&index=0&id=7a3726d1&scoped=true&lang=css&\",\"sourcesContent\":[\"<!--\\r\\n * @Description: \\r\\n * @Author: jinxiaojian\\r\\n * @Email: jinxiaojian@youxin.com\\r\\n * @Date: 2019-07-12 16:17:33\\r\\n * @LastEditTime: 2019-07-17 19:42:02\\r\\n * @LastEditors: 王娇(wangjiao)\\r\\n -->\\r\\n<template>\\r\\n  <tab-page ref=\\\"tabPage\\\">\\r\\n    <template slot=\\\"roleManage\\\">\\r\\n      <data-table :data-table=\\\"dataTable\\\" ref=\\\"dataTable\\\">\\r\\n        <div slot=\\\"conditions\\\" style=\\\"margin-bottom:15px\\\">\\r\\n          <el-button\\r\\n            type=\\\"primary\\\"\\r\\n            size=\\\"small\\\"\\r\\n            class=\\\"create\\\"\\r\\n            @click=\\\"openReportPermissionPage(0,1)\\\"\\r\\n          >&nbsp;&nbsp;新建&nbsp;&nbsp;</el-button>\\r\\n        </div>\\r\\n        <template slot=\\\"columns\\\">\\r\\n          <el-table-column prop=\\\"name\\\" label=\\\"角色\\\" width></el-table-column>\\r\\n          <el-table-column label=\\\"状态\\\">\\r\\n            <template slot-scope=\\\"scope\\\">\\r\\n              <el-tag :type=\\\"scope.row.flag | flagFilter\\\">{{scope.row.flag == 0?'使用中':'已失效'}}</el-tag>\\r\\n            </template>\\r\\n          </el-table-column>\\r\\n          <el-table-column label=\\\"操作\\\" width>\\r\\n            <template slot-scope=\\\"scope\\\">\\r\\n              <el-button type=\\\"text\\\" size=\\\"small\\\" @click=\\\"openReportPermissionPage(scope.row,0)\\\">编辑</el-button>\\r\\n              <el-button type=\\\"text\\\" size=\\\"small\\\" @click=\\\"deleteRole(scope.row)\\\">删除</el-button>\\r\\n            </template>\\r\\n          </el-table-column>\\r\\n        </template>\\r\\n      </data-table>\\r\\n      <report-permission\\r\\n        :reportPermissionDialogVisible=\\\"reportPermissionDialogVisible\\\"\\r\\n        v-on:reportPermissionDialogClosed=\\\"dialogClosed\\\"\\r\\n        :roleId=\\\"roleId\\\"\\r\\n        :addOrEdit=\\\"addOrEdit\\\"\\r\\n      ></report-permission>\\r\\n    </template>\\r\\n  </tab-page>\\r\\n</template>\\r\\n<style scoped>\\r\\n.el-table th > .cell {\\r\\n  text-align: center;\\r\\n}\\r\\n\\r\\n.create {\\r\\n  float: right;\\r\\n  margin-bottom: 20px;\\r\\n}\\r\\n\\r\\n.mb-10 {\\r\\n  margin-bottom: 10px;\\r\\n}\\r\\n</style>\\r\\n<script>\\r\\nimport Common from '../../../utils/common';\\r\\nimport DataTable from '../../../components/DataTable';\\r\\nimport TabPage from '../../../components/TabPage';\\r\\nimport ReportPermission from '../permission/rolePermissionsDialog.vue';\\r\\nexport default {\\r\\n  components: {\\r\\n    DataTable,\\r\\n    TabPage,\\r\\n    ReportPermission,\\r\\n    Common\\r\\n  },\\r\\n  data() {\\r\\n    return {\\r\\n      reportPermissionDialogVisible: false,\\r\\n      roleId: '',\\r\\n      addOrEdit: {\\r\\n        status: '',\\r\\n        dialogTitle: '',\\r\\n        dialogBtn: ''\\r\\n      },\\r\\n      dialogBtn: '',\\r\\n      dataTable: {\\r\\n        pageSize: 1000,\\r\\n        pageSizes: [10, 20, 50, 100, 1000],\\r\\n        url: '/web/v1/role/list',\\r\\n        emptyText: '没有记录'\\r\\n      }\\r\\n    };\\r\\n  },\\r\\n  filters: {\\r\\n    flagFilter(item) {\\r\\n      const itemsMap = {\\r\\n        0: 'success',\\r\\n        1: 'error'\\r\\n      };\\r\\n      return itemsMap[item];\\r\\n    }\\r\\n  },\\r\\n  mounted() {\\r\\n    var defaultPage = {\\r\\n      label: '角色管理',\\r\\n      name: 'roleManage',\\r\\n      slotName: 'roleManage',\\r\\n      closable: false\\r\\n    };\\r\\n    this.$refs.tabPage.$emit('open-tab', defaultPage);\\r\\n  },\\r\\n  methods: {\\r\\n    loadLists() {\\r\\n      this.$refs.dataTable.$emit('load-data');\\r\\n    },\\r\\n    openReportPermissionPage(obj, flag) {\\r\\n      this.reportPermissionDialogVisible = true;\\r\\n      this.roleId = obj ? obj.id : '';\\r\\n      this.addOrEdit.status = flag;\\r\\n      this.addOrEdit.dialogTitle = flag ? '新建' : '编辑';\\r\\n      this.addOrEdit.dialogBtn = flag ? '确定' : '保存';\\r\\n    },\\r\\n    deleteRole(obj) {\\r\\n      let self = this;\\r\\n      this.$confirm('删除后，该角色下的所有用户将被删除，是否确认?', '提示', {\\r\\n        confirmButtonText: '确认',\\r\\n        cancelButtonText: '取消',\\r\\n        type: 'warning'\\r\\n      })\\r\\n        .then(() => {\\r\\n          Common.ajax({\\r\\n            url: '/web/v1/role/delete',\\r\\n            type: 'post',\\r\\n            data: {\\r\\n              id: obj.id\\r\\n            },\\r\\n            dataType: 'json',\\r\\n            contentType: 'application/json',\\r\\n            success(response) {\\r\\n              self.$alert('删除成功', '', {\\r\\n                type: 'success',\\r\\n                confirmButtonText: '知道了',\\r\\n                callback: action => {\\r\\n                  self.$refs.dataTable.$emit('load-data');\\r\\n                  self.$refs.history && this.$refs.history.$emit('load-data');\\r\\n                }\\r\\n              });\\r\\n            },\\r\\n            error(response) {\\r\\n              self.$message({\\r\\n                message: response.message,\\r\\n                type: 'warning'\\r\\n              });\\r\\n            }\\r\\n          });\\r\\n        })\\r\\n        .catch(() => {});\\r\\n    },\\r\\n    dialogClosed() {\\r\\n      this.reportPermissionDialogVisible = false;\\r\\n      this.roleId = '';\\r\\n      this.loadLists();\\r\\n    }\\r\\n  }\\r\\n};\\r\\n</script>\\r\\n\"]}]);\n"],"sourceRoot":""}