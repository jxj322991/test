(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{1057:function(e,r,n){"use strict";n.r(r);var t=n(11),a=n.n(t),l=n(1),i=n(9),s=n(8),o={components:{DataTable:i.a,TabPage:s.a},data:function(){return{deviceCheckAll:!1,deviceOptions:[{value:"iOS",label:"iOS"},{value:"Android",label:"Android"}],ksjkOptions:[{value:"是",label:"是"},{value:"否",label:"否"}],initBeginTime:"",initEndTime:"",queryParams:{intervalMinutes:"",device:"",isksjk:"",beginTime:"",endTime:""},dataTable:{pageSize:50,pageSizes:[10,20,50,100,1e3,5e3,1e4,2e4],url:"/web/v2/market/queryMarket",emptyText:"没有记录",showSummary:!0,summaryMethod:this.getSummaries}}},mounted:function(){this.dataTable.queryParams=this.queryParams;var e=new Date,r=new Date(e.setDate(e.getDate()-7));this.initBeginTime=this.dealDate(r),this.initEndTime=this.dealDate(new Date),this.dataTable.queryParams.beginTime=this.initBeginTime+" 00:00:00",this.dataTable.queryParams.endTime=this.initEndTime+" 23:59:59",this.$refs.tabPage.$emit("open-tab",{label:"市场类总计",name:"h5Statistics",slotName:"h5Statistics",closable:!1})},methods:{loadLists:function(){this.$refs.dataTable.$emit("load-data")},onSubmit:function(){this.dataTable.queryParams=this.queryParams,this.warnTime(this.dataTable.queryParams.beginTime,this.dataTable.queryParams.endTime)||(this.dataTable.queryParams.beginTime=this.dealDate(this.dataTable.queryParams.beginTime)+" 00:00:00",this.dataTable.queryParams.endTime=this.dealDate(this.dataTable.queryParams.endTime)+" 23:59:59",this.dataTable.url="/web/v2/market/queryMarket",this.$refs.dataTable.$emit("load-data"))},warnTime:function(e,r){return e?r?!!(new Date(e).getTime()>new Date(r).getTime())&&(this.$notify({message:"查询开始时间不能大于结束时间",type:"warning"}),!0):(this.$notify({message:"查询结束时间不能为空！",type:"warning"}),!0):(this.$notify({message:"查询开始时间不能为空！",type:"warning"}),!0)},dealTime:function(e){return Object(l.a)(new Date(e),"yyyy-MM-dd hh:mm:ss")},formatterDate:function(e){return Object(l.a)(e.date,"yyyy-MM-dd")},dealDate:function(e){return Object(l.a)(new Date(e),"yyyy-MM-dd")},getSummaries:function(e){var r=e.columns,n=e.data,t=[];return r.forEach(function(e,r){var a;0!==r?(a=13===r||11===r||12===r?n.map(function(r){if(null!==r[e.property])return+r[e.property].replace("%","")}):n.map(function(r){return+r[e.property]})).every(function(e){return isNaN(e)})?t[r]="N/A":(t[r]=a.reduce(function(e,r){return isNaN(+r)?e:e+r},0),(13==r||11==r||12==r)&&(t[r]=(t[r]/n.length).toFixed(2)+" %")):t[r]="总计"}),t},exportExcel:function(){var e={};a()(e,this.dataTable.queryParams),e.pageSize=this.$refs.dataTable.total,e.page=1,this.$refs.dataTable.$emit("export-data",e)},exportDataSuccess:function(){var e=this;Promise.all([n.e(0),n.e(2)]).then(function(){var r=n(1028).export_json_to_excel,t=["日期","设备","快速借款用户","激活","注册","当日进件","当日审核","当日放款","放款金额","注册/激活","进件/注册","审核/进件","T7进件","T7审核","T7放款","T7放款金额"],a=["date","plat","ksjk_existing","activation_count","register_count","jinjian","approval","emitCn","emitMoney","act_reg_rate","jj_reg_rate","review_jinj_rate","jinjian_t7","approval_t7","emitCn_t7","emitMoney_t7"];setTimeout(function(){var n=e.$refs.dataTable.dataListA,l=e.formatJson(a,n);r(t,l,"市场类总计")},300)}.bind(null,n)).catch(n.oe)},formatJson:function(e,r){return r.map(function(r){return e.map(function(e){return"operator"==e?r[e].name:r[e]})})},checkAllSelection:function(e){for(var r=this.$refs[e].optionsCount,n=0;n<r;n++)!function(r,n){setTimeout(function(){n.$refs[e].handleOptionSelect(n.$refs[e].options[r])},0)}(n,this)},handleCheckAllDeviceChange:function(){this.checkAllSelection("deviceSelect"),this.deviceCheckAll=!this.deviceCheckAll},setCheckAllStyle:function(e,r){var n=r+"CheckAll",t=r+"Select";this[n]?e.length<this.$refs[t].optionsCount&&(this[n]=!this[n]):e.length===this.$refs[t].optionsCount&&(this[n]=!this[n])},deviceChange:function(e){this.setCheckAllStyle(e,"device")}}},m=(n(590),n(592),n(3)),c=Object(m.a)(o,function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("div",[n("tab-page",{ref:"tabPage"},[n("template",{slot:"h5Statistics"},[n("data-table",{ref:"dataTable",attrs:{"data-table":e.dataTable},on:{exportDataSuccess:e.exportDataSuccess}},[n("div",{staticStyle:{"margin-bottom":"15px"},attrs:{slot:"conditions"},slot:"conditions"},[n("el-form",{attrs:{inline:!0,model:e.queryParams}},[n("el-form-item",[n("el-date-picker",{staticStyle:{width:"170px"},attrs:{type:"date",placeholder:"选择日期时间",size:"small"},model:{value:e.queryParams.beginTime,callback:function(r){e.$set(e.queryParams,"beginTime",r)},expression:"queryParams.beginTime"}})],1),e._v(" "),n("span",{staticClass:"span-style"},[e._v("至")]),e._v(" "),n("el-form-item",[n("el-date-picker",{staticStyle:{width:"170px"},attrs:{type:"date",placeholder:"选择日期时间",size:"small"},model:{value:e.queryParams.endTime,callback:function(r){e.$set(e.queryParams,"endTime",r)},expression:"queryParams.endTime"}})],1),e._v(" "),n("el-form-item",[n("el-select",{attrs:{placeholder:"分组时间间隔",size:"small",clearable:""},model:{value:e.queryParams.intervalMinutes,callback:function(r){e.$set(e.queryParams,"intervalMinutes",r)},expression:"queryParams.intervalMinutes"}},[n("el-option",{key:"10",attrs:{label:"10(min)",value:"10"}}),e._v(" "),n("el-option",{key:"20",attrs:{label:"20(min)",value:"20"}}),e._v(" "),n("el-option",{key:"30",attrs:{label:"30(min)",value:"30"}}),e._v(" "),n("el-option",{key:"40",attrs:{label:"40(min)",value:"40"}}),e._v(" "),n("el-option",{key:"50",attrs:{label:"50(min)",value:"50"}}),e._v(" "),n("el-option",{key:"60",attrs:{label:"60(min)",value:"60"}})],1)],1),e._v(" "),n("el-form-item",[n("el-select",{attrs:{clearable:"",filterable:"",placeholder:"设备",size:"small"},model:{value:e.queryParams.device,callback:function(r){e.$set(e.queryParams,"device",r)},expression:"queryParams.device"}},e._l(e.deviceOptions,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),n("el-form-item",[n("el-select",{attrs:{clearable:"",filterable:"",placeholder:"快速借款",size:"small"},model:{value:e.queryParams.isksjk,callback:function(r){e.$set(e.queryParams,"isksjk",r)},expression:"queryParams.isksjk"}},e._l(e.ksjkOptions,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),n("el-form-item",[n("el-button",{staticStyle:{"margin-top":"0"},attrs:{type:"primary",size:"small"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1),e._v(" "),n("el-button",{staticClass:"right mb-10",attrs:{type:"primary",size:"small",icon:"el-icon-document"},on:{click:e.exportExcel}},[e._v("导出excel")])],1),e._v(" "),n("template",{slot:"columns"},[n("el-table-column",{attrs:{type:"index",label:"序号",width:"60"}}),e._v(" "),n("el-table-column",{attrs:{sortable:"",prop:"date",label:"日期",width:"120"}}),e._v(" "),n("el-table-column",{attrs:{sortable:"",prop:"plat",label:"设备",width:"100"}}),e._v(" "),n("el-table-column",{attrs:{sortable:"",prop:"ksjk_existing",label:"快速借款用户",width:"120"}}),e._v(" "),n("el-table-column",{attrs:{sortable:"",prop:"activation_count",label:"激活"}}),e._v(" "),n("el-table-column",{attrs:{sortable:"",prop:"register_count",label:"注册"}}),e._v(" "),n("el-table-column",{attrs:{sortable:"",prop:"jinjian",label:"当日进件"}}),e._v(" "),n("el-table-column",{attrs:{sortable:"",prop:"reject",label:"当日拒绝"}}),e._v(" "),n("el-table-column",{attrs:{sortable:"",prop:"approval",label:"当日审核"}}),e._v(" "),n("el-table-column",{attrs:{sortable:"",prop:"emitCn",label:"当日放款"}}),e._v(" "),n("el-table-column",{attrs:{sortable:"",prop:"emitMoney",label:"放款金额"}}),e._v(" "),n("el-table-column",{attrs:{sortable:"",prop:"act_reg_rate",label:"注册/激活",width:"90"}}),e._v(" "),n("el-table-column",{attrs:{sortable:"",prop:"jj_reg_rate",label:"进件/注册",width:"90"}}),e._v(" "),n("el-table-column",{attrs:{sortable:"",prop:"review_jinj_rate",label:"审核/进件",width:"90"}}),e._v(" "),n("el-table-column",{attrs:{sortable:"",prop:"jinjian_t7",label:"T7进件"}}),e._v(" "),n("el-table-column",{attrs:{sortable:"",prop:"approval_t7",label:"T7审核"}}),e._v(" "),n("el-table-column",{attrs:{sortable:"",prop:"emitCn_t7",label:"T7放款"}}),e._v(" "),n("el-table-column",{attrs:{sortable:"",prop:"emitMoney_t7",label:"T7放款金额"}})],1)],2)],1)],2)],1)},[],!1,null,"566d8e06",null);r.default=c.exports},195:function(e,r,n){var t=n(591);"string"==typeof t&&(t=[[e.i,t,""]]),t.locals&&(e.exports=t.locals);(0,n(5).default)("aaed9e5c",t,!0,{})},196:function(e,r,n){var t=n(593);"string"==typeof t&&(t=[[e.i,t,""]]),t.locals&&(e.exports=t.locals);(0,n(5).default)("b3ff70c0",t,!0,{})},590:function(e,r,n){"use strict";var t=n(195);n.n(t).a},591:function(e,r,n){(e.exports=n(4)(!0)).push([e.i,"\n.el-form-item__content .el-button[data-v-566d8e06] {\r\n  margin-top: 20px;\n}\n.el-table--border th[data-v-566d8e06] {\r\n  text-align: center;\n}\n.el-table th .cell[data-v-566d8e06] {\r\n  text-align: center;\n}\n.el-form--inline .el-form-item[data-v-566d8e06] {\r\n  margin-right: 2px;\n}\n.el-form-item[data-v-566d8e06] {\r\n  margin-bottom: 2px;\n}\n.el-dialog__footer[data-v-566d8e06] {\r\n  padding: 10px 0px;\r\n  text-align: center;\n}\n.check-all-select[data-v-566d8e06] {\r\n  padding: 10px;\n}\n.check-all-select span.text-all[data-v-566d8e06] {\r\n  font-size: 14px;\r\n  font-weight: bold;\n}\n.check-all-select label[data-v-566d8e06] {\r\n  float: right;\n}\n.mb-10[data-v-566d8e06] {\r\n  margin-bottom: 10px;\n}\r\n","",{version:3,sources:["src/views/contents/market/marketCategoryNew.vue"],names:[],mappings:";AAyHA;EACA,gBAAA;AACA;AAEA;EACA,kBAAA;AACA;AAEA;EACA,kBAAA;AACA;AAEA;EACA,iBAAA;AACA;AAEA;EACA,kBAAA;AACA;AAEA;EACA,iBAAA;EACA,kBAAA;AACA;AAEA;EACA,aAAA;AACA;AAEA;EACA,eAAA;EACA,iBAAA;AACA;AAEA;EACA,YAAA;AACA;AAEA;EACA,mBAAA;AACA",file:"marketCategoryNew.vue?vue&type=style&index=0&id=566d8e06&scoped=true&lang=css&",sourcesContent:['\x3c!--\r\n * @Description: \r\n * @Author: 焦丙乾(jiaobingqian)\r\n * @Email: jiaobq123@163.com\r\n * @LastEditors: 靳肖健\r\n * @Date: 2019-02-21 15:49:44\r\n * @LastEditTime: 2019-07-16 16:59:10\r\n --\x3e\r\n<template>\r\n  <div>\r\n    <tab-page ref="tabPage">\r\n      <template slot="h5Statistics">\r\n        <data-table @exportDataSuccess="exportDataSuccess" :data-table="dataTable" ref="dataTable">\r\n          <div slot="conditions" style="margin-bottom:15px">\r\n            <el-form :inline="true" :model="queryParams">\r\n              <el-form-item>\r\n                <el-date-picker\r\n                  v-model="queryParams.beginTime"\r\n                  type="date"\r\n                  placeholder="选择日期时间"\r\n                  size="small"\r\n                  style="width:170px"\r\n                ></el-date-picker>\r\n              </el-form-item>\r\n              <span class="span-style">至</span>\r\n              <el-form-item>\r\n                <el-date-picker\r\n                  v-model="queryParams.endTime"\r\n                  type="date"\r\n                  placeholder="选择日期时间"\r\n                  size="small"\r\n                  style="width:170px"\r\n                ></el-date-picker>\r\n              </el-form-item>\r\n              <el-form-item>\r\n                <el-select\r\n                  v-model="queryParams.intervalMinutes"\r\n                  placeholder="分组时间间隔"\r\n                  size="small"\r\n                  clearable\r\n                >\r\n                  <el-option key="10" label="10(min)" value="10"></el-option>\r\n                  <el-option key="20" label="20(min)" value="20"></el-option>\r\n                  <el-option key="30" label="30(min)" value="30"></el-option>\r\n                  <el-option key="40" label="40(min)" value="40"></el-option>\r\n                  <el-option key="50" label="50(min)" value="50"></el-option>\r\n                  <el-option key="60" label="60(min)" value="60"></el-option>\r\n                </el-select>\r\n              </el-form-item>\r\n              <el-form-item>\r\n                <el-select\r\n                  v-model="queryParams.device"\r\n                  clearable\r\n                  filterable\r\n                  placeholder="设备"\r\n                  size="small"\r\n                >\r\n                  <el-option\r\n                    v-for="item in deviceOptions"\r\n                    :key="item.value"\r\n                    :label="item.label"\r\n                    :value="item.value"\r\n                  ></el-option>\r\n                </el-select>\r\n              </el-form-item>\r\n              <el-form-item>\r\n                <el-select\r\n                  v-model="queryParams.isksjk"\r\n                  clearable\r\n                  filterable\r\n                  placeholder="快速借款"\r\n                  size="small"\r\n                >\r\n                  <el-option\r\n                    v-for="item in ksjkOptions"\r\n                    :key="item.value"\r\n                    :label="item.label"\r\n                    :value="item.value"\r\n                  ></el-option>\r\n                </el-select>\r\n              </el-form-item>\r\n              <el-form-item>\r\n                <el-button type="primary" @click="onSubmit" size="small" style="margin-top:0">查询</el-button>\r\n              </el-form-item>\r\n            </el-form>\r\n            <el-button\r\n              class="right mb-10"\r\n              type="primary"\r\n              size="small"\r\n              icon="el-icon-document"\r\n              @click="exportExcel"\r\n            >导出excel</el-button>\r\n          </div>\r\n          <template slot="columns">\r\n            <el-table-column type="index" label="序号" width="60"></el-table-column>\r\n            <el-table-column sortable prop="date" label="日期" width="120"></el-table-column>\r\n\r\n            <el-table-column sortable prop="plat" label="设备" width="100"></el-table-column>\r\n            <el-table-column sortable prop="ksjk_existing" label="快速借款用户" width="120"></el-table-column>\r\n            <el-table-column sortable prop="activation_count" label="激活"></el-table-column>\r\n            <el-table-column sortable prop="register_count" label="注册"></el-table-column>\r\n            <el-table-column sortable prop="jinjian" label="当日进件"></el-table-column>\r\n            <el-table-column sortable prop="reject" label="当日拒绝"></el-table-column>\r\n            <el-table-column sortable prop="approval" label="当日审核"></el-table-column>\r\n            <el-table-column sortable prop="emitCn" label="当日放款"></el-table-column>\r\n            <el-table-column sortable prop="emitMoney" label="放款金额"></el-table-column>\r\n            <el-table-column sortable prop="act_reg_rate" label="注册/激活" width="90"></el-table-column>\r\n            <el-table-column sortable prop="jj_reg_rate" label="进件/注册" width="90"></el-table-column>\r\n            <el-table-column sortable prop="review_jinj_rate" label="审核/进件" width="90"></el-table-column>\r\n\r\n            <el-table-column sortable prop="jinjian_t7" label="T7进件"></el-table-column>\r\n            <el-table-column sortable prop="approval_t7" label="T7审核"></el-table-column>\r\n            <el-table-column sortable prop="emitCn_t7" label="T7放款"></el-table-column>\r\n            <el-table-column sortable prop="emitMoney_t7" label="T7放款金额"></el-table-column>\r\n          </template>\r\n        </data-table>\r\n      </template>\r\n    </tab-page>\r\n  </div>\r\n</template>\r\n<style scoped>\r\n.el-form-item__content .el-button {\r\n  margin-top: 20px;\r\n}\r\n\r\n.el-table--border th {\r\n  text-align: center;\r\n}\r\n\r\n.el-table th .cell {\r\n  text-align: center;\r\n}\r\n\r\n.el-form--inline .el-form-item {\r\n  margin-right: 2px;\r\n}\r\n\r\n.el-form-item {\r\n  margin-bottom: 2px;\r\n}\r\n\r\n.el-dialog__footer {\r\n  padding: 10px 0px;\r\n  text-align: center;\r\n}\r\n\r\n.check-all-select {\r\n  padding: 10px;\r\n}\r\n\r\n.check-all-select span.text-all {\r\n  font-size: 14px;\r\n  font-weight: bold;\r\n}\r\n\r\n.check-all-select label {\r\n  float: right;\r\n}\r\n\r\n.mb-10 {\r\n  margin-bottom: 10px;\r\n}\r\n</style>\r\n<script>\r\n//  import common from \'../../../utils/common\'\r\nimport formatDate from "../../../utils/formatDate";\r\nimport DataTable from "../../../components/DataTable";\r\nimport TabPage from "../../../components/TabPage";\r\nexport default {\r\n  components: {\r\n    DataTable,\r\n    TabPage,\r\n  },\r\n  data() {\r\n    return {\r\n      deviceCheckAll: false,\r\n      deviceOptions: [\r\n        {\r\n          value: "iOS",\r\n          label: "iOS",\r\n        },\r\n        {\r\n          value: "Android",\r\n          label: "Android",\r\n        },\r\n      ],\r\n      ksjkOptions: [\r\n        {\r\n          value: "是",\r\n          label: "是",\r\n        },\r\n        {\r\n          value: "否",\r\n          label: "否",\r\n        },\r\n      ],\r\n      initBeginTime: "",\r\n      initEndTime: "",\r\n\r\n      queryParams: {\r\n        intervalMinutes: "",\r\n        device: "",\r\n        isksjk: "",\r\n        beginTime: "", // 开始时间\r\n        endTime: "", // 结束时间\r\n      },\r\n      dataTable: {\r\n        pageSize: 50,\r\n        pageSizes: [10, 20, 50, 100, 1000, 5000, 10000, 20000],\r\n        url: "/web/v2/market/queryMarket", // 代付管理\r\n        emptyText: "没有记录",\r\n        showSummary: true,\r\n        summaryMethod: this.getSummaries,\r\n      },\r\n    };\r\n  },\r\n  mounted() {\r\n    this.dataTable.queryParams = this.queryParams;\r\n    let date = new Date();\r\n    let beginDate = new Date(date.setDate(date.getDate() - 7));\r\n    this.initBeginTime = this.dealDate(beginDate);\r\n    this.initEndTime = this.dealDate(new Date());\r\n    this.dataTable.queryParams.beginTime = this.initBeginTime + " 00:00:00";\r\n    this.dataTable.queryParams.endTime = this.initEndTime + " 23:59:59";\r\n\r\n    var defaultPage = {\r\n      label: "市场类总计",\r\n      name: "h5Statistics",\r\n      slotName: "h5Statistics",\r\n      closable: false,\r\n    };\r\n    this.$refs.tabPage.$emit("open-tab", defaultPage);\r\n  },\r\n  methods: {\r\n    loadLists() {\r\n      this.$refs.dataTable.$emit("load-data");\r\n    },\r\n    onSubmit: function() {\r\n      this.dataTable.queryParams = this.queryParams;\r\n      var tag = this.warnTime(\r\n        this.dataTable.queryParams.beginTime,\r\n        this.dataTable.queryParams.endTime,\r\n      );\r\n      if (tag) {\r\n        return;\r\n      }\r\n      // console.log(Object.prototype.toString.call(this.dataTable.queryParams.beginTime));\r\n      this.dataTable.queryParams.beginTime =\r\n        this.dealDate(this.dataTable.queryParams.beginTime) + " 00:00:00";\r\n      this.dataTable.queryParams.endTime =\r\n        this.dealDate(this.dataTable.queryParams.endTime) + " 23:59:59";\r\n\r\n      this.dataTable.url = "/web/v2/market/queryMarket";\r\n      this.$refs.dataTable.$emit("load-data");\r\n    },\r\n    warnTime(startTime, endTime) {\r\n      if (!startTime) {\r\n        this.$notify({\r\n          message: "查询开始时间不能为空！",\r\n          type: "warning",\r\n        });\r\n        return true;\r\n      }\r\n      if (!endTime) {\r\n        this.$notify({\r\n          message: "查询结束时间不能为空！",\r\n          type: "warning",\r\n        });\r\n        return true;\r\n      }\r\n      let timeStart = new Date(startTime).getTime();\r\n      let timeEnd = new Date(endTime).getTime();\r\n      if (timeStart > timeEnd) {\r\n        this.$notify({\r\n          //                        title: \'警告\',\r\n          message: "查询开始时间不能大于结束时间",\r\n          type: "warning",\r\n        });\r\n        return true;\r\n      }\r\n      return false;\r\n    },\r\n    dealTime(time) {\r\n      return formatDate(new Date(time), "yyyy-MM-dd hh:mm:ss");\r\n    },\r\n    formatterDate(row, column) {\r\n      return formatDate(row.date, "yyyy-MM-dd");\r\n    },\r\n    dealDate(date) {\r\n      return formatDate(new Date(date), "yyyy-MM-dd");\r\n    },\r\n    getSummaries(param) {\r\n      const { columns, data } = param;\r\n      const sums = [];\r\n      columns.forEach((column, index) => {\r\n        if (index === 0) {\r\n          sums[index] = "总计";\r\n          return;\r\n        }\r\n        var values;\r\n        if (index === 13 || index === 11 || index === 12) {\r\n          values = data.map(item => {\r\n            if (item[column.property] !== null) {\r\n              return Number(item[column.property].replace("%", ""));\r\n            }\r\n          });\r\n        } else {\r\n          values = data.map(item => Number(item[column.property]));\r\n        }\r\n\r\n        if (!values.every(value => isNaN(value))) {\r\n          sums[index] = values.reduce((prev, curr) => {\r\n            const value = Number(curr);\r\n            if (!isNaN(value)) {\r\n              return prev + curr;\r\n            } else {\r\n              return prev;\r\n            }\r\n          }, 0);\r\n          if (index == 13 || index == 11 || index == 12) {\r\n            sums[index] = (sums[index] / data.length).toFixed(2) + " %";\r\n          }\r\n          // sums[index] += \' 元\';\r\n        } else {\r\n          sums[index] = "N/A";\r\n        }\r\n      });\r\n\r\n      return sums;\r\n    },\r\n\r\n    exportExcel() {\r\n      let self = this;\r\n      var exportParams = {};\r\n      Object.assign(exportParams, this.dataTable.queryParams);\r\n      exportParams.pageSize = this.$refs.dataTable.total;\r\n      exportParams.page = 1;\r\n      this.$refs.dataTable.$emit("export-data", exportParams);\r\n    },\r\n    exportDataSuccess() {\r\n      require.ensure([], () => {\r\n        const { export_json_to_excel } = require("vendor/Export2Excel");\r\n        const tHeader = [\r\n          "日期",\r\n          "设备",\r\n          "快速借款用户",\r\n          "激活",\r\n          "注册",\r\n          "当日进件",\r\n          // \'拒绝\',\r\n          "当日审核",\r\n          "当日放款",\r\n          "放款金额",\r\n          "注册/激活",\r\n          "进件/注册",\r\n          "审核/进件",\r\n          "T7进件",\r\n          "T7审核",\r\n          "T7放款",\r\n          "T7放款金额",\r\n        ];\r\n        const filterVal = [\r\n          "date",\r\n          "plat",\r\n          "ksjk_existing",\r\n          "activation_count",\r\n          "register_count",\r\n          "jinjian",\r\n          // \'reject\',\r\n          "approval",\r\n          "emitCn",\r\n          "emitMoney",\r\n          "act_reg_rate",\r\n          "jj_reg_rate",\r\n          "review_jinj_rate",\r\n          "jinjian_t7",\r\n          "approval_t7",\r\n          "emitCn_t7",\r\n          "emitMoney_t7",\r\n        ];\r\n        setTimeout(() => {\r\n          const list = this.$refs.dataTable.dataListA;\r\n          const data = this.formatJson(filterVal, list);\r\n          export_json_to_excel(tHeader, data, "市场类总计");\r\n        }, 300);\r\n      });\r\n    },\r\n    formatJson(filterVal, jsonData) {\r\n      return jsonData.map(v =>\r\n        filterVal.map(j => {\r\n          let returnValue;\r\n          if (j == "operator") {\r\n            returnValue = v[j].name;\r\n          } else {\r\n            returnValue = v[j];\r\n          }\r\n          return returnValue;\r\n        }),\r\n      );\r\n    },\r\n\r\n    checkAllSelection(selectType) {\r\n      let len = this.$refs[selectType].optionsCount;\r\n      for (var i = 0; i < len; i++) {\r\n        (function(index, _this) {\r\n          setTimeout(() => {\r\n            _this.$refs[selectType].handleOptionSelect(\r\n              _this.$refs[selectType].options[index],\r\n            );\r\n          }, 0);\r\n        })(i, this);\r\n      }\r\n    },\r\n    handleCheckAllDeviceChange(event) {\r\n      this.checkAllSelection("deviceSelect");\r\n      this.deviceCheckAll = !this.deviceCheckAll;\r\n    },\r\n    setCheckAllStyle(selectedCount, selectType) {\r\n      let type = selectType + "CheckAll";\r\n      let type_1 = selectType + "Select";\r\n      if (this[type]) {\r\n        if (selectedCount.length < this.$refs[type_1].optionsCount) {\r\n          this[type] = !this[type];\r\n        }\r\n      } else {\r\n        if (selectedCount.length === this.$refs[type_1].optionsCount) {\r\n          this[type] = !this[type];\r\n        }\r\n      }\r\n    },\r\n    deviceChange(values) {\r\n      this.setCheckAllStyle(values, "device");\r\n    },\r\n  },\r\n};\r\n<\/script>\r\n<style>\r\n.span-style {\r\n  display: inline-block;\r\n  margin-top: 8px;\r\n  font-size: 14px;\r\n}\r\n</style>\r\n']}])},592:function(e,r,n){"use strict";var t=n(196);n.n(t).a},593:function(e,r,n){(e.exports=n(4)(!0)).push([e.i,"\n.span-style {\r\n  display: inline-block;\r\n  margin-top: 8px;\r\n  font-size: 14px;\n}\r\n","",{version:3,sources:["src/views/contents/market/marketCategoryNew.vue"],names:[],mappings:";AAqbA;EACA,qBAAA;EACA,eAAA;EACA,eAAA;AACA",file:"marketCategoryNew.vue?vue&type=style&index=1&lang=css&",sourcesContent:['\x3c!--\r\n * @Description: \r\n * @Author: 焦丙乾(jiaobingqian)\r\n * @Email: jiaobq123@163.com\r\n * @LastEditors: 靳肖健\r\n * @Date: 2019-02-21 15:49:44\r\n * @LastEditTime: 2019-07-16 16:59:10\r\n --\x3e\r\n<template>\r\n  <div>\r\n    <tab-page ref="tabPage">\r\n      <template slot="h5Statistics">\r\n        <data-table @exportDataSuccess="exportDataSuccess" :data-table="dataTable" ref="dataTable">\r\n          <div slot="conditions" style="margin-bottom:15px">\r\n            <el-form :inline="true" :model="queryParams">\r\n              <el-form-item>\r\n                <el-date-picker\r\n                  v-model="queryParams.beginTime"\r\n                  type="date"\r\n                  placeholder="选择日期时间"\r\n                  size="small"\r\n                  style="width:170px"\r\n                ></el-date-picker>\r\n              </el-form-item>\r\n              <span class="span-style">至</span>\r\n              <el-form-item>\r\n                <el-date-picker\r\n                  v-model="queryParams.endTime"\r\n                  type="date"\r\n                  placeholder="选择日期时间"\r\n                  size="small"\r\n                  style="width:170px"\r\n                ></el-date-picker>\r\n              </el-form-item>\r\n              <el-form-item>\r\n                <el-select\r\n                  v-model="queryParams.intervalMinutes"\r\n                  placeholder="分组时间间隔"\r\n                  size="small"\r\n                  clearable\r\n                >\r\n                  <el-option key="10" label="10(min)" value="10"></el-option>\r\n                  <el-option key="20" label="20(min)" value="20"></el-option>\r\n                  <el-option key="30" label="30(min)" value="30"></el-option>\r\n                  <el-option key="40" label="40(min)" value="40"></el-option>\r\n                  <el-option key="50" label="50(min)" value="50"></el-option>\r\n                  <el-option key="60" label="60(min)" value="60"></el-option>\r\n                </el-select>\r\n              </el-form-item>\r\n              <el-form-item>\r\n                <el-select\r\n                  v-model="queryParams.device"\r\n                  clearable\r\n                  filterable\r\n                  placeholder="设备"\r\n                  size="small"\r\n                >\r\n                  <el-option\r\n                    v-for="item in deviceOptions"\r\n                    :key="item.value"\r\n                    :label="item.label"\r\n                    :value="item.value"\r\n                  ></el-option>\r\n                </el-select>\r\n              </el-form-item>\r\n              <el-form-item>\r\n                <el-select\r\n                  v-model="queryParams.isksjk"\r\n                  clearable\r\n                  filterable\r\n                  placeholder="快速借款"\r\n                  size="small"\r\n                >\r\n                  <el-option\r\n                    v-for="item in ksjkOptions"\r\n                    :key="item.value"\r\n                    :label="item.label"\r\n                    :value="item.value"\r\n                  ></el-option>\r\n                </el-select>\r\n              </el-form-item>\r\n              <el-form-item>\r\n                <el-button type="primary" @click="onSubmit" size="small" style="margin-top:0">查询</el-button>\r\n              </el-form-item>\r\n            </el-form>\r\n            <el-button\r\n              class="right mb-10"\r\n              type="primary"\r\n              size="small"\r\n              icon="el-icon-document"\r\n              @click="exportExcel"\r\n            >导出excel</el-button>\r\n          </div>\r\n          <template slot="columns">\r\n            <el-table-column type="index" label="序号" width="60"></el-table-column>\r\n            <el-table-column sortable prop="date" label="日期" width="120"></el-table-column>\r\n\r\n            <el-table-column sortable prop="plat" label="设备" width="100"></el-table-column>\r\n            <el-table-column sortable prop="ksjk_existing" label="快速借款用户" width="120"></el-table-column>\r\n            <el-table-column sortable prop="activation_count" label="激活"></el-table-column>\r\n            <el-table-column sortable prop="register_count" label="注册"></el-table-column>\r\n            <el-table-column sortable prop="jinjian" label="当日进件"></el-table-column>\r\n            <el-table-column sortable prop="reject" label="当日拒绝"></el-table-column>\r\n            <el-table-column sortable prop="approval" label="当日审核"></el-table-column>\r\n            <el-table-column sortable prop="emitCn" label="当日放款"></el-table-column>\r\n            <el-table-column sortable prop="emitMoney" label="放款金额"></el-table-column>\r\n            <el-table-column sortable prop="act_reg_rate" label="注册/激活" width="90"></el-table-column>\r\n            <el-table-column sortable prop="jj_reg_rate" label="进件/注册" width="90"></el-table-column>\r\n            <el-table-column sortable prop="review_jinj_rate" label="审核/进件" width="90"></el-table-column>\r\n\r\n            <el-table-column sortable prop="jinjian_t7" label="T7进件"></el-table-column>\r\n            <el-table-column sortable prop="approval_t7" label="T7审核"></el-table-column>\r\n            <el-table-column sortable prop="emitCn_t7" label="T7放款"></el-table-column>\r\n            <el-table-column sortable prop="emitMoney_t7" label="T7放款金额"></el-table-column>\r\n          </template>\r\n        </data-table>\r\n      </template>\r\n    </tab-page>\r\n  </div>\r\n</template>\r\n<style scoped>\r\n.el-form-item__content .el-button {\r\n  margin-top: 20px;\r\n}\r\n\r\n.el-table--border th {\r\n  text-align: center;\r\n}\r\n\r\n.el-table th .cell {\r\n  text-align: center;\r\n}\r\n\r\n.el-form--inline .el-form-item {\r\n  margin-right: 2px;\r\n}\r\n\r\n.el-form-item {\r\n  margin-bottom: 2px;\r\n}\r\n\r\n.el-dialog__footer {\r\n  padding: 10px 0px;\r\n  text-align: center;\r\n}\r\n\r\n.check-all-select {\r\n  padding: 10px;\r\n}\r\n\r\n.check-all-select span.text-all {\r\n  font-size: 14px;\r\n  font-weight: bold;\r\n}\r\n\r\n.check-all-select label {\r\n  float: right;\r\n}\r\n\r\n.mb-10 {\r\n  margin-bottom: 10px;\r\n}\r\n</style>\r\n<script>\r\n//  import common from \'../../../utils/common\'\r\nimport formatDate from "../../../utils/formatDate";\r\nimport DataTable from "../../../components/DataTable";\r\nimport TabPage from "../../../components/TabPage";\r\nexport default {\r\n  components: {\r\n    DataTable,\r\n    TabPage,\r\n  },\r\n  data() {\r\n    return {\r\n      deviceCheckAll: false,\r\n      deviceOptions: [\r\n        {\r\n          value: "iOS",\r\n          label: "iOS",\r\n        },\r\n        {\r\n          value: "Android",\r\n          label: "Android",\r\n        },\r\n      ],\r\n      ksjkOptions: [\r\n        {\r\n          value: "是",\r\n          label: "是",\r\n        },\r\n        {\r\n          value: "否",\r\n          label: "否",\r\n        },\r\n      ],\r\n      initBeginTime: "",\r\n      initEndTime: "",\r\n\r\n      queryParams: {\r\n        intervalMinutes: "",\r\n        device: "",\r\n        isksjk: "",\r\n        beginTime: "", // 开始时间\r\n        endTime: "", // 结束时间\r\n      },\r\n      dataTable: {\r\n        pageSize: 50,\r\n        pageSizes: [10, 20, 50, 100, 1000, 5000, 10000, 20000],\r\n        url: "/web/v2/market/queryMarket", // 代付管理\r\n        emptyText: "没有记录",\r\n        showSummary: true,\r\n        summaryMethod: this.getSummaries,\r\n      },\r\n    };\r\n  },\r\n  mounted() {\r\n    this.dataTable.queryParams = this.queryParams;\r\n    let date = new Date();\r\n    let beginDate = new Date(date.setDate(date.getDate() - 7));\r\n    this.initBeginTime = this.dealDate(beginDate);\r\n    this.initEndTime = this.dealDate(new Date());\r\n    this.dataTable.queryParams.beginTime = this.initBeginTime + " 00:00:00";\r\n    this.dataTable.queryParams.endTime = this.initEndTime + " 23:59:59";\r\n\r\n    var defaultPage = {\r\n      label: "市场类总计",\r\n      name: "h5Statistics",\r\n      slotName: "h5Statistics",\r\n      closable: false,\r\n    };\r\n    this.$refs.tabPage.$emit("open-tab", defaultPage);\r\n  },\r\n  methods: {\r\n    loadLists() {\r\n      this.$refs.dataTable.$emit("load-data");\r\n    },\r\n    onSubmit: function() {\r\n      this.dataTable.queryParams = this.queryParams;\r\n      var tag = this.warnTime(\r\n        this.dataTable.queryParams.beginTime,\r\n        this.dataTable.queryParams.endTime,\r\n      );\r\n      if (tag) {\r\n        return;\r\n      }\r\n      // console.log(Object.prototype.toString.call(this.dataTable.queryParams.beginTime));\r\n      this.dataTable.queryParams.beginTime =\r\n        this.dealDate(this.dataTable.queryParams.beginTime) + " 00:00:00";\r\n      this.dataTable.queryParams.endTime =\r\n        this.dealDate(this.dataTable.queryParams.endTime) + " 23:59:59";\r\n\r\n      this.dataTable.url = "/web/v2/market/queryMarket";\r\n      this.$refs.dataTable.$emit("load-data");\r\n    },\r\n    warnTime(startTime, endTime) {\r\n      if (!startTime) {\r\n        this.$notify({\r\n          message: "查询开始时间不能为空！",\r\n          type: "warning",\r\n        });\r\n        return true;\r\n      }\r\n      if (!endTime) {\r\n        this.$notify({\r\n          message: "查询结束时间不能为空！",\r\n          type: "warning",\r\n        });\r\n        return true;\r\n      }\r\n      let timeStart = new Date(startTime).getTime();\r\n      let timeEnd = new Date(endTime).getTime();\r\n      if (timeStart > timeEnd) {\r\n        this.$notify({\r\n          //                        title: \'警告\',\r\n          message: "查询开始时间不能大于结束时间",\r\n          type: "warning",\r\n        });\r\n        return true;\r\n      }\r\n      return false;\r\n    },\r\n    dealTime(time) {\r\n      return formatDate(new Date(time), "yyyy-MM-dd hh:mm:ss");\r\n    },\r\n    formatterDate(row, column) {\r\n      return formatDate(row.date, "yyyy-MM-dd");\r\n    },\r\n    dealDate(date) {\r\n      return formatDate(new Date(date), "yyyy-MM-dd");\r\n    },\r\n    getSummaries(param) {\r\n      const { columns, data } = param;\r\n      const sums = [];\r\n      columns.forEach((column, index) => {\r\n        if (index === 0) {\r\n          sums[index] = "总计";\r\n          return;\r\n        }\r\n        var values;\r\n        if (index === 13 || index === 11 || index === 12) {\r\n          values = data.map(item => {\r\n            if (item[column.property] !== null) {\r\n              return Number(item[column.property].replace("%", ""));\r\n            }\r\n          });\r\n        } else {\r\n          values = data.map(item => Number(item[column.property]));\r\n        }\r\n\r\n        if (!values.every(value => isNaN(value))) {\r\n          sums[index] = values.reduce((prev, curr) => {\r\n            const value = Number(curr);\r\n            if (!isNaN(value)) {\r\n              return prev + curr;\r\n            } else {\r\n              return prev;\r\n            }\r\n          }, 0);\r\n          if (index == 13 || index == 11 || index == 12) {\r\n            sums[index] = (sums[index] / data.length).toFixed(2) + " %";\r\n          }\r\n          // sums[index] += \' 元\';\r\n        } else {\r\n          sums[index] = "N/A";\r\n        }\r\n      });\r\n\r\n      return sums;\r\n    },\r\n\r\n    exportExcel() {\r\n      let self = this;\r\n      var exportParams = {};\r\n      Object.assign(exportParams, this.dataTable.queryParams);\r\n      exportParams.pageSize = this.$refs.dataTable.total;\r\n      exportParams.page = 1;\r\n      this.$refs.dataTable.$emit("export-data", exportParams);\r\n    },\r\n    exportDataSuccess() {\r\n      require.ensure([], () => {\r\n        const { export_json_to_excel } = require("vendor/Export2Excel");\r\n        const tHeader = [\r\n          "日期",\r\n          "设备",\r\n          "快速借款用户",\r\n          "激活",\r\n          "注册",\r\n          "当日进件",\r\n          // \'拒绝\',\r\n          "当日审核",\r\n          "当日放款",\r\n          "放款金额",\r\n          "注册/激活",\r\n          "进件/注册",\r\n          "审核/进件",\r\n          "T7进件",\r\n          "T7审核",\r\n          "T7放款",\r\n          "T7放款金额",\r\n        ];\r\n        const filterVal = [\r\n          "date",\r\n          "plat",\r\n          "ksjk_existing",\r\n          "activation_count",\r\n          "register_count",\r\n          "jinjian",\r\n          // \'reject\',\r\n          "approval",\r\n          "emitCn",\r\n          "emitMoney",\r\n          "act_reg_rate",\r\n          "jj_reg_rate",\r\n          "review_jinj_rate",\r\n          "jinjian_t7",\r\n          "approval_t7",\r\n          "emitCn_t7",\r\n          "emitMoney_t7",\r\n        ];\r\n        setTimeout(() => {\r\n          const list = this.$refs.dataTable.dataListA;\r\n          const data = this.formatJson(filterVal, list);\r\n          export_json_to_excel(tHeader, data, "市场类总计");\r\n        }, 300);\r\n      });\r\n    },\r\n    formatJson(filterVal, jsonData) {\r\n      return jsonData.map(v =>\r\n        filterVal.map(j => {\r\n          let returnValue;\r\n          if (j == "operator") {\r\n            returnValue = v[j].name;\r\n          } else {\r\n            returnValue = v[j];\r\n          }\r\n          return returnValue;\r\n        }),\r\n      );\r\n    },\r\n\r\n    checkAllSelection(selectType) {\r\n      let len = this.$refs[selectType].optionsCount;\r\n      for (var i = 0; i < len; i++) {\r\n        (function(index, _this) {\r\n          setTimeout(() => {\r\n            _this.$refs[selectType].handleOptionSelect(\r\n              _this.$refs[selectType].options[index],\r\n            );\r\n          }, 0);\r\n        })(i, this);\r\n      }\r\n    },\r\n    handleCheckAllDeviceChange(event) {\r\n      this.checkAllSelection("deviceSelect");\r\n      this.deviceCheckAll = !this.deviceCheckAll;\r\n    },\r\n    setCheckAllStyle(selectedCount, selectType) {\r\n      let type = selectType + "CheckAll";\r\n      let type_1 = selectType + "Select";\r\n      if (this[type]) {\r\n        if (selectedCount.length < this.$refs[type_1].optionsCount) {\r\n          this[type] = !this[type];\r\n        }\r\n      } else {\r\n        if (selectedCount.length === this.$refs[type_1].optionsCount) {\r\n          this[type] = !this[type];\r\n        }\r\n      }\r\n    },\r\n    deviceChange(values) {\r\n      this.setCheckAllStyle(values, "device");\r\n    },\r\n  },\r\n};\r\n<\/script>\r\n<style>\r\n.span-style {\r\n  display: inline-block;\r\n  margin-top: 8px;\r\n  font-size: 14px;\r\n}\r\n</style>\r\n']}])}}]);
//# sourceMappingURL=53.d6cbba33a3de92c8b46c.js.map