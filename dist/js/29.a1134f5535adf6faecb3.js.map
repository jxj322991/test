{"version":3,"sources":["webpack:///./src/assets/images/bg.png","webpack:///./src/views/firstLogin.vue","webpack:///src/views/firstLogin.vue","webpack:///./src/views/firstLogin.vue?2ab0","webpack:///./src/views/firstLogin.vue?d9e1","webpack:///./src/utils/common.js","webpack:///./src/views/firstLogin.vue?a784","webpack:///./src/views/firstLogin.vue?0e7a","webpack:///delegated ../node_modules/_babel-runtime@6.26.0@babel-runtime/helpers/typeof.js from dll-reference vendor_b35904a9f84fabbc839d"],"names":["a","exports","c","p","i","Object","h","data","this","title","labelPosition","passwordForm","password","newPassword","checkNewPassWord","passwordFormRules","required","message","trigger","validator","b","d","Error","length","test","$refs","validateField","mounted","email","e","getEmail","methods","submit","validate","g","$router","ajax","url","type","timeout","contentType","success","console","log","setRequiresAlterPassword","push","path","f","Notification","error","status","clearPassword","passwd","resetPasswordForm","resetFields","$createElement","_self","_c","staticClass","attrs","span","_v","_s","ref","model","rules","label-position","label-width","label","prop","auto-complete","value","callback","$set","expression","nativeOn","keyup","indexOf","_k","keyCode","key","on","click","locals","default","Common","api","auth","options","_timestamp","Date","_authTokenObj","getOldToken","_authToken","uploadFiles","$","headers","Authorization","Timestamp","traditional","async","processData","dataType","response","alert","location","XMLHttpRequest","complete","l","arr","obj","resultQuery","searchParam","hasOwnProperty","k","jQuery","n","version","sources","names","mappings","file","sourcesContent"],"mappings":"8EAAAA,EAAAC,QAAiBC,EAAAC,EAAuB,8GCQxCC,EAAgBC,OAAAC,EAAAN,EAAAK,CC6BhB,CAAAE,KAAA,WACA,IAAAP,EAAAQ,KA+CA,OACAC,MADA,QAEAC,cAFA,QAGAC,aAAA,CACAC,SADA,GAEAC,YAFA,GAGAC,iBAAA,IAEAC,kBAAA,CACAH,SAAA,CACA,CAAAI,UAAA,EAAAC,QAAA,SAAAC,QADA,QAEA,CAAAC,UAnDA,SAAAC,EAAAlB,EAAAmB,GACA,KAAAnB,IACAF,EAAAW,aAAAG,iBAGAO,MA8CAH,QAHA,SAKAL,YAAA,CACA,CAAAG,UAAA,EAAAC,QAAA,SAAAC,QADA,QAEA,CAAAC,UA/CA,SAAAC,EAAAlB,EAAAmB,GACA,QAAAnB,EACAmB,EAAA,IAAAC,MAAA,eACA,CAIA,EAAApB,EAAAqB,SAFA,gBAEAC,KAAAtB,KADA,mBACAsB,KAAAtB,GACAmB,EAAA,IAAAC,MAAA,oBAEA,KAAAtB,EAAAW,aAAAG,kBACAd,EAAAyB,MAAAd,aAAAe,cAAA,oBAEAL,OAkCAH,QAPA,SASAJ,iBAAA,CACA,CAAAE,UAAA,EAAAC,QAAA,SAAAC,QADA,QAEA,CAAAC,UAlCA,SAAAC,EAAAlB,EAAAmB,GACA,KAAAnB,EACAmB,EAAA,IAAAC,MAAA,YACApB,IAAAF,EAAAW,aAAAE,YAGAQ,IAFAA,EAAA,IAAAC,MAAA,gBA8BAJ,QAFA,QAGA,CAAAC,UA1BA,SAAAC,EAAAlB,EAAAmB,GACAnB,IAAAF,EAAAW,aAAAE,aACAQ,KAwBAH,QAHA,cAjEAS,QAAA,WA0EAnB,KAAAG,aAAAiB,MAAAC,EAAA7B,EAAA8B,YAEAC,QAAA,CACAC,OAAA,eAAAhC,EAAAQ,KACAA,KAAAiB,MAAAd,aAAAsB,SAAA,SAAAb,GACA,IAAAA,EAoCA,SApCA,IACAlB,EAAAF,EAAAW,aACAuB,EAAAlC,EAAAmC,QACoBd,EAAArB,EAApBoC,KAAA,CACAC,IADA,6BAEAC,KAFA,OAAA/B,KAAAL,EAAAqC,QAAA,IAKAC,YALA,mBAMAC,QAAA,SAAAzC,GACA0C,QAAAC,IAAA3C,GAC4B6B,EAAA7B,EAA5B4C,0BAA4B,GAC5B5C,EAAAO,MAAAP,GAEAkC,EAAAW,KAAA,CAAAC,KAAA,WACgCC,EAAAC,aAAhCP,QAAA,CACAhC,MADA,KAEAQ,QAAAjB,EAAAiB,SAAA,QAIgC8B,EAAAC,aAAhCC,MAAA,CACAxC,MADA,KAEAQ,QAAAjB,EAAAiB,SAAAjB,EAAAkD,QAAA,UAIAD,MAAA,SAAAjD,GACA,IAAAoB,EAAApB,EAAAiB,QAAAjB,EAAAiB,QAAA,OAC4B8B,EAAAC,aAA5BC,MAAA,CACAxC,MADA,KAEAQ,QAAAG,UASA+B,cAAA,WACA3C,KAAA4C,OAAA,IA5CAC,kBAAA,WA+CA7C,KAAAiB,MAAAd,aAAA2C,iBChKA,eAA0BtD,EAAAQ,KAAaY,EAAApB,EAAAuD,eAA0BrD,EAAAF,EAAAwD,MAAAC,IAAArC,EAAwB,OAAAlB,EAAA,OAAiBwD,YAAA,QAAmB,CAAAxD,EAAA,OAAYwD,YAAA,aAAwB,CAAAxD,EAAA,UAAAA,EAAA,UAA4ByD,MAAA,CAAAC,KAAA,KAAkB,CAAA1D,EAAA,MAAWwD,YAAA,cAAyB,CAAA1D,EAAA6D,GAAA,yBAAA7D,EAAA8D,GAAA9D,EAAAS,OAAA,8BAAAT,EAAA6D,GAAA,KAAA3D,EAAA,WAA4G6D,IAAA,eAAAJ,MAAA,CAA0BK,MAAAhE,EAAAW,aAAAsD,MAAAjE,EAAAe,kBAAAmD,iBAAAlE,EAAAU,cAAAyD,cAAA,UAAiH,CAAAjE,EAAA,gBAAqByD,MAAA,CAAAS,MAAA,MAAAC,KAAA,aAAwC,CAAAnE,EAAA,YAAiByD,MAAA,CAAArB,KAAA,WAAAgC,gBAAA,OAA+CN,MAAA,CAAQO,MAAAvE,EAAAW,aAAAC,SAAA4D,SAAA,SAAApD,GAA2DpB,EAAAyE,KAAAzE,EAAAW,aAAA,WAAAS,IAA4CsD,WAAA,4BAAqC,GAAA1E,EAAA6D,GAAA,KAAA3D,EAAA,gBAAqCyD,MAAA,CAAAS,MAAA,MAAAC,KAAA,gBAA2C,CAAAnE,EAAA,YAAiByD,MAAA,CAAArB,KAAA,WAAAgC,gBAAA,OAA+CN,MAAA,CAAQO,MAAAvE,EAAAW,aAAAE,YAAA2D,SAAA,SAAApD,GAA8DpB,EAAAyE,KAAAzE,EAAAW,aAAA,cAAAS,IAA+CsD,WAAA,+BAAwC,GAAA1E,EAAA6D,GAAA,KAAA3D,EAAA,gBAAqCyD,MAAA,CAAAS,MAAA,QAAAC,KAAA,qBAAkD,CAAAnE,EAAA,YAAiByD,MAAA,CAAArB,KAAA,WAAAgC,gBAAA,OAA+CK,SAAA,CAAWC,MAAA,SAAAxD,GAAA,OAAyBA,EAAAkB,KAAAuC,QAAA,QAAA7E,EAAA8E,GAAA1D,EAAA2D,QAAA,WAAA3D,EAAA4D,IAAA,SAAsF,KAAehF,EAAAgC,WAAqBgC,MAAA,CAAQO,MAAAvE,EAAAW,aAAAG,iBAAA0D,SAAA,SAAApD,GAAmEpB,EAAAyE,KAAAzE,EAAAW,aAAA,mBAAAS,IAAoDsD,WAAA,oCAA6C,OAAA1E,EAAA6D,GAAA,KAAA3D,EAAA,UAAmCwD,YAAA,eAA0B,CAAAxD,EAAA,UAAeyD,MAAA,CAAAC,KAAA,KAAkB,CAAA1D,EAAA,aAAkByD,MAAA,CAAArB,KAAA,WAAwB2C,GAAA,CAAKC,MAAA,WAAyB,OAAAlF,EAAAqD,uBAAiC,CAAArD,EAAA6D,GAAA,QAAA7D,EAAA6D,GAAA,KAAA3D,EAAA,aAA6CyD,MAAA,CAAArB,KAAA,WAAwB2C,GAAA,CAAKC,MAAA,WAAyB,OAAAlF,EAAAgC,YAAsB,CAAAhC,EAAA6D,GAAA,uBFQzzD,MAKhB,KACA,WACA,MAIezC,EAAA,QAAAhB,EAAAH,6BGhBf,IAAAoB,EAAcnB,EAAQ,KACtB,iBAAAmB,MAAA,EAA4CrB,EAAAI,EAA5CiB,EAAqD,MACrDA,EAAA8D,SAAAnF,EAAAC,QAAAoB,EAAA8D,SAGAtD,EADU3B,EAAQ,GAAqFkF,SACvG,WAAA/D,GAAA,qGCFMgE,EAAU,SAAArF,EAAAoB,GAgHZ,OA/GAkE,kBACAA,OAAW,SAAApF,GACPoF,QAAYC,IAAZD,WADwB,IAIxBjE,EADIgB,EAAMmD,EAAVnD,IAEIoD,GAAc,IAAlBC,KACA,MAAGrD,kBAAuB,CACtB,IAAIsD,EAAgBJ,IAApBK,cACAH,EAAaE,EAAbF,UACAI,EAAaF,EAAbE,WAGAA,EAAaP,EAAbO,MAEAL,EAAJM,cACKN,EAAHlD,MACE,OAAGkD,qBACGtD,IAAOsD,EAAPjF,MAQN,WAAI2B,IAAOsD,EAAPjF,QAAmCiF,OAAe3D,IAAe2D,EAA9BA,QAW3CO,OAAO,CACHC,QAAQ,CAAAC,cAAA5E,EAEJ6E,UAAA5F,GAHD+B,IAAAU,EAMHT,KAAMkD,QANH,MAAAW,aAAA,EAQH5F,KAAMiF,EARHjF,MAQGiF,GACNY,MAAOZ,EATJY,QASIZ,EACPa,iBAAcb,mBAA2CA,EAVtDa,YAWH7D,iBAAcgD,kBAAoCO,eAApCP,YAAiEA,EAX5EhD,YAYH8D,SAAUd,YAZP,OAaH/C,QAAS,SAAAzC,GAAoB,OACrBuG,UAAJ,MAAuBA,eACnB,GAAIA,UAEFC,aAAaD,EAAbC,SACAjB,qBACAkB,0BACSjB,EAAJvC,MACLuC,WAEAgB,aAAaD,EAAbC,gBAAqCD,EAArCC,cAKNhB,WAAmBA,EAAnBA,QAAmBA,KAGvBvC,MAAO,SAAAjD,GACCwF,EAAJvC,QACOyD,EAAHH,SACIf,QAAckB,EAAdlB,UAGAA,QAAc,CACVvE,QAAS,WAMzB0F,SAAUnB,EA5CPmB,eA4COnB,EACVjD,QAAQiD,WAAiB,QAGjCF,eAAkB,SAAAtF,EAAAoB,GACd,sBAAGf,kCACC,MAAM,IAAAiB,MAAN,oBAEJ,IAAI,IAAIlB,EAAJ,EAAQwG,EAAEC,EAAdtF,OAAArB,EAAAmB,EAAAnB,IACI,GAAG4G,GAAH1F,EAAAlB,GACI,SAGR,UAEJoF,cAAkB,SAAAtF,GAChB,uBAAGK,kCACD,MAAM,IAAAiB,MAAN,oBAF6B,IAI/BF,EAAApB,EACI+G,EAAJ,IACA,IAAI,IAAJ1F,KAAAD,EACM4F,EAAJC,eAAID,KACFD,GAAc3G,WAAd2G,KAIJ,OAAA7G,GAGFF,EAhHY,CAADkH,GAAA,GAiHAC,EAjHfnH,GAmHAoB,EAAApB,EAAAkH,wCCzHA7F,EAAAnB,EAAA,KAAAA,EAAAkH,EAAA/F,GAA6gBrB,uBCA7gBoB,EAAApB,EAAAC,QAA2BC,EAAQ,EAARA,EAAA,OAG3B2B,EADa3B,EAAQ,GACrBmB,CAAsCnB,EAAQ,MAE9CkB,EAAAyB,KAAA,CAAc7C,EAAAI,EAAS,4NAAAyB,EAAwM,m+BAAghC,GAA/uC,CAAAwF,QAAA,EAAAC,QAAA,6BAAAC,MAAA,GAAAC,SAAA,yaAAAC,KAAA,0EAAAC,eAAA,ooRCLA1H,EAAAC,QAAAC,EAAA,GAAAA,CAAA","file":"dist/js/29.a1134f5535adf6faecb3.js","sourcesContent":["module.exports = __webpack_public_path__ + \"dist/img/bg.a97556c.png\";","import { render, staticRenderFns } from \"./firstLogin.vue?vue&type=template&id=1beea8fd&scoped=true&\"\nimport script from \"./firstLogin.vue?vue&type=script&lang=js&\"\nexport * from \"./firstLogin.vue?vue&type=script&lang=js&\"\nimport style0 from \"./firstLogin.vue?vue&type=style&index=0&id=1beea8fd&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.7.1@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1beea8fd\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n    <div class=\"page\">\r\n        <div class=\"container\">\r\n            <el-row>\r\n                <el-col :span=\"24\">\r\n                    <h2 class=\"page-title\">\r\n                        {{title}}\r\n                    </h2>\r\n                </el-col>\r\n            </el-row>\r\n            <el-form :model=\"passwordForm\" :rules=\"passwordFormRules\" ref=\"passwordForm\" :label-position=\"labelPosition\"\r\n                     label-width=\"100px\">\r\n                <el-form-item label=\"原密码\" prop=\"password\">\r\n                    <el-input type=\"password\" v-model=\"passwordForm.password\" auto-complete=\"off\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"新密码\" prop=\"newPassword\">\r\n                    <el-input type=\"password\" v-model=\"passwordForm.newPassword\" auto-complete=\"off\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"确认新密码\" prop=\"checkNewPassWord\">\r\n                    <el-input type=\"password\" v-model=\"passwordForm.checkNewPassWord\" auto-complete=\"off\" v-on:keyup.enter.native=\"submit()\"></el-input>\r\n                </el-form-item>\r\n\r\n            </el-form>\r\n            <el-row class=\"text-center\">\r\n                <el-col :span=\"24\">\r\n                    <el-button type=\"primary\" @click=\"resetPasswordForm()\">重置</el-button>\r\n                    <el-button type=\"primary\" @click=\"submit()\">提交</el-button>\r\n                </el-col>\r\n            </el-row>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import Common from '../utils/common'\r\n    import auth from '../utils/authenticate'\r\n    import {Notification} from 'element-ui';\r\n    export default {\r\n        data() {\r\n            /**\r\n             *\r\n             * @param rule\r\n             * @param value\r\n             * @param callback\r\n             */\r\n            var validatePassword = (rule, value, callback) => {\r\n                if (value !== '') {\r\n                    if (this.passwordForm.checkNewPassWord !== '') {\r\n                        //Common.ajax\r\n                    }\r\n                    callback();\r\n                }\r\n            };\r\n            var validateNewPassword = (rule, value, callback) => {\r\n                if (value === '') {\r\n                    callback(new Error('请输入新密码'));\r\n                } else {\r\n                    var reg = /^[0-9a-zA-Z]+$/;\r\n                    var regu = /\\w*[0-9]+\\w*$/;\r\n                    var regu2 = /\\w*[a-zA-Z]+\\w*$/;\r\n                    if (value.length < 7 || !regu.test(value) || !regu2.test(value)) {\r\n                        callback(new Error('密码须为大于6位的数字和字母'));\r\n                    } else {\r\n                        if (this.passwordForm.checkNewPassWord !== '') {\r\n                            this.$refs.passwordForm.validateField('checkNewPassWord');\r\n                        }\r\n                        callback();\r\n                    }\r\n                }\r\n            };\r\n            var validatePass2 = (rule, value, callback) => {\r\n                if (value === '') {\r\n                    callback(new Error('请再次输入密码'));\r\n                } else if (value !== this.passwordForm.newPassword) {\r\n                    callback(new Error('两次输入密码不一致!'));\r\n                } else {\r\n                    callback();\r\n                }\r\n            };\r\n            var validatePass3 = (rule, value, callback) => {\r\n                if (value === this.passwordForm.newPassword) {\r\n                    callback();\r\n                }\r\n            };\r\n\r\n            return {\r\n                title: '请设置密码',\r\n                labelPosition: 'right',\r\n                passwordForm: {\r\n                    password: '',\r\n                    newPassword: '',\r\n                    checkNewPassWord: '',\r\n                },\r\n                passwordFormRules: {\r\n                    password: [\r\n                        {required: true, message: '请输入原密码', trigger: 'blur'},\r\n                        {validator: validatePassword, trigger: 'blur'},\r\n                    ],\r\n                    newPassword: [\r\n                        {required: true, message: '请输入新密码', trigger: 'blur'},\r\n                        {validator: validateNewPassword, trigger: 'blur'},\r\n                    ],\r\n                    checkNewPassWord: [\r\n                        {required: true, message: '请确认新密码', trigger: 'blur'},\r\n                        {validator: validatePass2, trigger: 'blur'},\r\n                        {validator: validatePass3, trigger: 'change'},\r\n                    ],\r\n                }\r\n            }\r\n        },\r\n        mounted(){\r\n            this.passwordForm.email = auth.getEmail();\r\n        },\r\n        methods: {\r\n            submit: function () {\r\n                this.$refs['passwordForm'].validate((valid) => {\r\n                    if (valid) {\r\n                        var params = this.passwordForm;\r\n                        var router = this.$router;\r\n                        Common.ajax({\r\n                            url: \"/web/v1/user/resetPassword\",\r\n                            type: \"POST\",\r\n                            data: params,\r\n                            timeout: 1000,\r\n                            contentType: \"application/json\",\r\n                            success: function (response) {\r\n                                console.log(response);\r\n                                auth.setRequiresAlterPassword(false);\r\n                                var res = response.data || response;\r\n                                if (res) {\r\n                                    router.push({path: '/admin'})\r\n                                    Notification.success({\r\n                                        title: '登录',\r\n                                        message: response.message || '成功'\r\n                                    });\r\n                                }\r\n                                else {\r\n                                    Notification.error({\r\n                                        title: '错误',\r\n                                        message: response.message || response.status || '登录失败'\r\n                                    });\r\n                                }\r\n                            },\r\n                            error: function (response) {\r\n                                var message = (response.message) ? response.message : \"未知错误\";\r\n                                Notification.error({\r\n                                    title: '错误',\r\n                                    message: message\r\n                                });\r\n                            }\r\n                        });\r\n                    } else {\r\n                        return false;\r\n                    }\r\n                });\r\n            },\r\n            clearPassword: function () {\r\n                this.passwd = \"\";\r\n            },\r\n            resetPasswordForm() {\r\n                this.$refs['passwordForm'].resetFields();\r\n            }\r\n        },\r\n    }\r\n\r\n</script>\r\n\r\n<style scoped>\r\n    body {\r\n        font-family: \"Microsoft YaHei\";\r\n        font-size: 12px;\r\n    }\r\n\r\n    .page {\r\n        position: absolute;\r\n        width: 99%;\r\n        height: 98%;\r\n        font-size: 12px;\r\n        background: url('../assets/images/bg.png') 0 0 repeat;\r\n    }\r\n\r\n    .container {\r\n        box-sizing: border-box;\r\n        width: 400px;\r\n        height: 350px;\r\n        padding: 20px 60px 20px 10px;\r\n        margin-left: -200px;\r\n        margin-top: -180px;\r\n        position: absolute;\r\n        left: 50%;\r\n        top: 50%;\r\n        border: 1px solid #e8ebf2;\r\n        border-radius: 2px;\r\n        filter: progid:DXImageTransform.Microsoft.Shadow(color='#e8ebf2', Direction=135, Strength=5); /*for ie6,7,8*/\r\n        background-color: #fff;\r\n        -moz-box-shadow: 0 2px 16px #e8ebf2, 0 0 1px #e8ebf2, 0 0 1px #e8ebf2; /*firefox*/\r\n        -webkit-box-shadow: 0 2px 16px #e8ebf2, 0 0 1px #e8ebf2, 0 0 1px #e8ebf2; /*webkit*/\r\n        box-shadow: 0 2px 16px #e8ebf2, 0 0 1px #e8ebf2, 0 0 1px #e8ebf2; /*opera或ie9*/\r\n    }\r\n\r\n    .page-title {\r\n        text-align: center;\r\n        padding-left: 60px;\r\n        font-size: 20px;\r\n        font-weight: bold;\r\n        color: #1a1d22;\r\n        line-height: 50px;\r\n    }\r\n\r\n    .text-center {\r\n        text-align: center;\r\n        padding-left: 60px;\r\n    }\r\n\r\n\r\n</style>\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page\"},[_c('div',{staticClass:\"container\"},[_c('el-row',[_c('el-col',{attrs:{\"span\":24}},[_c('h2',{staticClass:\"page-title\"},[_vm._v(\"\\n                    \"+_vm._s(_vm.title)+\"\\n                \")])])],1),_vm._v(\" \"),_c('el-form',{ref:\"passwordForm\",attrs:{\"model\":_vm.passwordForm,\"rules\":_vm.passwordFormRules,\"label-position\":_vm.labelPosition,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"原密码\",\"prop\":\"password\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"auto-complete\":\"off\"},model:{value:(_vm.passwordForm.password),callback:function ($$v) {_vm.$set(_vm.passwordForm, \"password\", $$v)},expression:\"passwordForm.password\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"新密码\",\"prop\":\"newPassword\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"auto-complete\":\"off\"},model:{value:(_vm.passwordForm.newPassword),callback:function ($$v) {_vm.$set(_vm.passwordForm, \"newPassword\", $$v)},expression:\"passwordForm.newPassword\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"确认新密码\",\"prop\":\"checkNewPassWord\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"auto-complete\":\"off\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.submit()}},model:{value:(_vm.passwordForm.checkNewPassWord),callback:function ($$v) {_vm.$set(_vm.passwordForm, \"checkNewPassWord\", $$v)},expression:\"passwordForm.checkNewPassWord\"}})],1)],1),_vm._v(\" \"),_c('el-row',{staticClass:\"text-center\"},[_c('el-col',{attrs:{\"span\":24}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.resetPasswordForm()}}},[_vm._v(\"重置\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submit()}}},[_vm._v(\"提交\")])],1)],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/_css-loader@3.1.0@css-loader/dist/cjs.js?sourceMap!../../node_modules/_vue-loader@15.7.1@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_vue-loader@15.7.1@vue-loader/lib/index.js??vue-loader-options!./firstLogin.vue?vue&type=style&index=0&id=1beea8fd&scoped=true&lang=css&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/_vue-style-loader@4.1.2@vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"34454658\", content, true, {});","/**\r\n * Created by 焦丙乾(jiaobingqian) on 17/3/3.\r\n */\r\nimport jQuery from 'jquery'\r\nimport auth from './authenticate'\r\n\r\nconst Common = (function(api,$){\r\n    api.title=\"好分期报表系统\";\r\n    api.ajax = function(options){\r\n        api.token = auth.getToken();\r\n        //var url = '/api' + options.url;\r\n        var url = options.url;\r\n        var _authToken;\r\n        var _timestamp = +new Date();\r\n        if(url.indexOf(\"api/\")>=0){\r\n            var _authTokenObj = auth.getOldToken();\r\n            _timestamp = _authTokenObj.timestamp;\r\n            _authToken = _authTokenObj.token;\r\n            \r\n        }else{\r\n            _authToken = api.token;\r\n        }\r\n        if(!options.uploadFiles){\r\n          if(options.type){\r\n            if(options.type.toLowerCase() =='get'){\r\n              if( typeof options.data === 'object' ){\r\n                // url += api.formatQuery(options.data);\r\n                // options.data = {};\r\n              }\r\n            }else{\r\n              if( typeof options.data === 'object' ) options.data = JSON.stringify(options.data);\r\n            }\r\n          }else{\r\n            if( typeof options.data === 'object' ) options.data = JSON.stringify(options.data);\r\n          }\r\n        }\r\n        \r\n        // if(options.type && options.type.toUpperCase() =='POST'){\r\n        //   if( typeof options.data === 'object' ) options.data = JSON.stringify(options.data);\r\n        // }else{\r\n        //   //url += api.formatQuery(options.data);\r\n        //   //options.data = {};\r\n        // }\r\n      \r\n        $.ajax({\r\n            headers:{\r\n                'Authorization':_authToken,\r\n                'Timestamp':_timestamp,\r\n            },\r\n            url: url,\r\n            type: options.type || \"GET\",\r\n            traditional: true,\r\n            data: options.data || {},\r\n            async: options.async || true,\r\n            processData: (options.processData === undefined ? true : options.processData),\r\n            contentType: (options.contentType === undefined ? $.ajaxSettings.contentType : options.contentType),\r\n            dataType: options.dataType || 'json',\r\n            success: function (response) {\r\n                if (response.status && response.status !== '0') {\r\n                    if (response.status == -1) {\r\n                      // 登陆失效\r\n                      alert(`警告: ${response.message}`);\r\n                      auth.setAsLoggedOut();\r\n                      location.href = '/#/login';\r\n                    } else if (options.error) {\r\n                      options.error(response);\r\n                    } else {\r\n                      alert(`警告: ${response.message}\\n错误：${response.status}`);\r\n                    }\r\n                    return;\r\n                }\r\n                \r\n                options.success && options.success(response);\r\n\r\n            },\r\n            error: function (XMLHttpRequest, textStatus, errorThrown) {\r\n                if (options.error) {\r\n                    if(XMLHttpRequest.response) {\r\n                        options.error(XMLHttpRequest.response);\r\n                    }\r\n                    else{\r\n                        options.error({\r\n                            message: '请求失败'\r\n                        });\r\n                    }\r\n                } else {\r\n                }\r\n            },\r\n            complete: options.complete || undefined,\r\n            timeout:options.timeout||null\r\n        });\r\n    };\r\n    api.hasDuplicate= function(obj,arr){\r\n        if(Object.prototype.toString.call(arr) !== \"[object Array]\"){\r\n            throw new Error('invalid argument');\r\n        }\r\n        for(let i=0,l=arr.length;i<l;i++){\r\n            if(obj == arr[i]){\r\n                return true;\r\n            }\r\n        }\r\n        return false\r\n    };\r\n    api.formatQuery = function(param){\r\n      if(Object.prototype.toString.call(param) !== \"[object Object]\"){\r\n        throw new Error('invalid argument');\r\n      }\r\n      let searchParam = param;\r\n      let resultQuery = '?';//session=' + api.session;\r\n      for(var i in searchParam){\r\n        if (searchParam.hasOwnProperty(i)) { //filter,只输出man的私有属性\r\n          resultQuery+= i+'='+searchParam[i]+'&';\r\n        }\r\n      }\r\n      \r\n      return resultQuery;\r\n    };\r\n\r\n    return api;\r\n})(Common||{}, jQuery);\r\n\r\nexport default Common;\r\n\r\n","import mod from \"-!../../node_modules/_extract-text-webpack-plugin@4.0.0-beta.0@extract-text-webpack-plugin/dist/loader.js??ref--4-0!../../node_modules/_vue-style-loader@4.1.2@vue-style-loader/index.js!../../node_modules/_css-loader@3.1.0@css-loader/dist/cjs.js?sourceMap!../../node_modules/_vue-loader@15.7.1@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_vue-loader@15.7.1@vue-loader/lib/index.js??vue-loader-options!./firstLogin.vue?vue&type=style&index=0&id=1beea8fd&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/_extract-text-webpack-plugin@4.0.0-beta.0@extract-text-webpack-plugin/dist/loader.js??ref--4-0!../../node_modules/_vue-style-loader@4.1.2@vue-style-loader/index.js!../../node_modules/_css-loader@3.1.0@css-loader/dist/cjs.js?sourceMap!../../node_modules/_vue-loader@15.7.1@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_vue-loader@15.7.1@vue-loader/lib/index.js??vue-loader-options!./firstLogin.vue?vue&type=style&index=0&id=1beea8fd&scoped=true&lang=css&\"","exports = module.exports = require(\"../../node_modules/_css-loader@3.1.0@css-loader/dist/runtime/api.js\")(true);\n// Imports\nvar getUrl = require(\"../../node_modules/_css-loader@3.1.0@css-loader/dist/runtime/getUrl.js\");\nvar ___CSS_LOADER_URL___0___ = getUrl(require(\"../assets/images/bg.png\"));\n// Module\nexports.push([module.id, \"\\nbody[data-v-1beea8fd] {\\n    font-family: \\\"Microsoft YaHei\\\";\\n    font-size: 12px;\\n}\\n.page[data-v-1beea8fd] {\\n    position: absolute;\\n    width: 99%;\\n    height: 98%;\\n    font-size: 12px;\\n    background: url(\" + ___CSS_LOADER_URL___0___ + \") 0 0 repeat;\\n}\\n.container[data-v-1beea8fd] {\\n    box-sizing: border-box;\\n    width: 400px;\\n    height: 350px;\\n    padding: 20px 60px 20px 10px;\\n    margin-left: -200px;\\n    margin-top: -180px;\\n    position: absolute;\\n    left: 50%;\\n    top: 50%;\\n    border: 1px solid #e8ebf2;\\n    border-radius: 2px;\\n    filter: progid:DXImageTransform.Microsoft.Shadow(color='#e8ebf2', Direction=135, Strength=5); /*for ie6,7,8*/\\n    background-color: #fff;\\n    -moz-box-shadow: 0 2px 16px #e8ebf2, 0 0 1px #e8ebf2, 0 0 1px #e8ebf2; /*firefox*/\\n    -webkit-box-shadow: 0 2px 16px #e8ebf2, 0 0 1px #e8ebf2, 0 0 1px #e8ebf2; /*webkit*/\\n    box-shadow: 0 2px 16px #e8ebf2, 0 0 1px #e8ebf2, 0 0 1px #e8ebf2; /*opera或ie9*/\\n}\\n.page-title[data-v-1beea8fd] {\\n    text-align: center;\\n    padding-left: 60px;\\n    font-size: 20px;\\n    font-weight: bold;\\n    color: #1a1d22;\\n    line-height: 50px;\\n}\\n.text-center[data-v-1beea8fd] {\\n    text-align: center;\\n    padding-left: 60px;\\n}\\n\\n\\n\", \"\",{\"version\":3,\"sources\":[\"src/views/firstLogin.vue\"],\"names\":[],\"mappings\":\";AAwKA;IACA,8BAAA;IACA,eAAA;AACA;AAEA;IACA,kBAAA;IACA,UAAA;IACA,WAAA;IACA,eAAA;IACA,oDAAA;AACA;AAEA;IACA,sBAAA;IACA,YAAA;IACA,aAAA;IACA,4BAAA;IACA,mBAAA;IACA,kBAAA;IACA,kBAAA;IACA,SAAA;IACA,QAAA;IACA,yBAAA;IACA,kBAAA;IACA,4FAAA,EAAA,cAAA;IACA,sBAAA;IACA,qEAAA,EAAA,UAAA;IACA,wEAAA,EAAA,SAAA;IACA,gEAAA,EAAA,YAAA;AACA;AAEA;IACA,kBAAA;IACA,kBAAA;IACA,eAAA;IACA,iBAAA;IACA,cAAA;IACA,iBAAA;AACA;AAEA;IACA,kBAAA;IACA,kBAAA;AACA\",\"file\":\"firstLogin.vue?vue&type=style&index=0&id=1beea8fd&scoped=true&lang=css&\",\"sourcesContent\":[\"<template>\\r\\n    <div class=\\\"page\\\">\\r\\n        <div class=\\\"container\\\">\\r\\n            <el-row>\\r\\n                <el-col :span=\\\"24\\\">\\r\\n                    <h2 class=\\\"page-title\\\">\\r\\n                        {{title}}\\r\\n                    </h2>\\r\\n                </el-col>\\r\\n            </el-row>\\r\\n            <el-form :model=\\\"passwordForm\\\" :rules=\\\"passwordFormRules\\\" ref=\\\"passwordForm\\\" :label-position=\\\"labelPosition\\\"\\r\\n                     label-width=\\\"100px\\\">\\r\\n                <el-form-item label=\\\"原密码\\\" prop=\\\"password\\\">\\r\\n                    <el-input type=\\\"password\\\" v-model=\\\"passwordForm.password\\\" auto-complete=\\\"off\\\"></el-input>\\r\\n                </el-form-item>\\r\\n                <el-form-item label=\\\"新密码\\\" prop=\\\"newPassword\\\">\\r\\n                    <el-input type=\\\"password\\\" v-model=\\\"passwordForm.newPassword\\\" auto-complete=\\\"off\\\"></el-input>\\r\\n                </el-form-item>\\r\\n                <el-form-item label=\\\"确认新密码\\\" prop=\\\"checkNewPassWord\\\">\\r\\n                    <el-input type=\\\"password\\\" v-model=\\\"passwordForm.checkNewPassWord\\\" auto-complete=\\\"off\\\" v-on:keyup.enter.native=\\\"submit()\\\"></el-input>\\r\\n                </el-form-item>\\r\\n\\r\\n            </el-form>\\r\\n            <el-row class=\\\"text-center\\\">\\r\\n                <el-col :span=\\\"24\\\">\\r\\n                    <el-button type=\\\"primary\\\" @click=\\\"resetPasswordForm()\\\">重置</el-button>\\r\\n                    <el-button type=\\\"primary\\\" @click=\\\"submit()\\\">提交</el-button>\\r\\n                </el-col>\\r\\n            </el-row>\\r\\n        </div>\\r\\n    </div>\\r\\n</template>\\r\\n\\r\\n<script>\\r\\n    import Common from '../utils/common'\\r\\n    import auth from '../utils/authenticate'\\r\\n    import {Notification} from 'element-ui';\\r\\n    export default {\\r\\n        data() {\\r\\n            /**\\r\\n             *\\r\\n             * @param rule\\r\\n             * @param value\\r\\n             * @param callback\\r\\n             */\\r\\n            var validatePassword = (rule, value, callback) => {\\r\\n                if (value !== '') {\\r\\n                    if (this.passwordForm.checkNewPassWord !== '') {\\r\\n                        //Common.ajax\\r\\n                    }\\r\\n                    callback();\\r\\n                }\\r\\n            };\\r\\n            var validateNewPassword = (rule, value, callback) => {\\r\\n                if (value === '') {\\r\\n                    callback(new Error('请输入新密码'));\\r\\n                } else {\\r\\n                    var reg = /^[0-9a-zA-Z]+$/;\\r\\n                    var regu = /\\\\w*[0-9]+\\\\w*$/;\\r\\n                    var regu2 = /\\\\w*[a-zA-Z]+\\\\w*$/;\\r\\n                    if (value.length < 7 || !regu.test(value) || !regu2.test(value)) {\\r\\n                        callback(new Error('密码须为大于6位的数字和字母'));\\r\\n                    } else {\\r\\n                        if (this.passwordForm.checkNewPassWord !== '') {\\r\\n                            this.$refs.passwordForm.validateField('checkNewPassWord');\\r\\n                        }\\r\\n                        callback();\\r\\n                    }\\r\\n                }\\r\\n            };\\r\\n            var validatePass2 = (rule, value, callback) => {\\r\\n                if (value === '') {\\r\\n                    callback(new Error('请再次输入密码'));\\r\\n                } else if (value !== this.passwordForm.newPassword) {\\r\\n                    callback(new Error('两次输入密码不一致!'));\\r\\n                } else {\\r\\n                    callback();\\r\\n                }\\r\\n            };\\r\\n            var validatePass3 = (rule, value, callback) => {\\r\\n                if (value === this.passwordForm.newPassword) {\\r\\n                    callback();\\r\\n                }\\r\\n            };\\r\\n\\r\\n            return {\\r\\n                title: '请设置密码',\\r\\n                labelPosition: 'right',\\r\\n                passwordForm: {\\r\\n                    password: '',\\r\\n                    newPassword: '',\\r\\n                    checkNewPassWord: '',\\r\\n                },\\r\\n                passwordFormRules: {\\r\\n                    password: [\\r\\n                        {required: true, message: '请输入原密码', trigger: 'blur'},\\r\\n                        {validator: validatePassword, trigger: 'blur'},\\r\\n                    ],\\r\\n                    newPassword: [\\r\\n                        {required: true, message: '请输入新密码', trigger: 'blur'},\\r\\n                        {validator: validateNewPassword, trigger: 'blur'},\\r\\n                    ],\\r\\n                    checkNewPassWord: [\\r\\n                        {required: true, message: '请确认新密码', trigger: 'blur'},\\r\\n                        {validator: validatePass2, trigger: 'blur'},\\r\\n                        {validator: validatePass3, trigger: 'change'},\\r\\n                    ],\\r\\n                }\\r\\n            }\\r\\n        },\\r\\n        mounted(){\\r\\n            this.passwordForm.email = auth.getEmail();\\r\\n        },\\r\\n        methods: {\\r\\n            submit: function () {\\r\\n                this.$refs['passwordForm'].validate((valid) => {\\r\\n                    if (valid) {\\r\\n                        var params = this.passwordForm;\\r\\n                        var router = this.$router;\\r\\n                        Common.ajax({\\r\\n                            url: \\\"/web/v1/user/resetPassword\\\",\\r\\n                            type: \\\"POST\\\",\\r\\n                            data: params,\\r\\n                            timeout: 1000,\\r\\n                            contentType: \\\"application/json\\\",\\r\\n                            success: function (response) {\\r\\n                                console.log(response);\\r\\n                                auth.setRequiresAlterPassword(false);\\r\\n                                var res = response.data || response;\\r\\n                                if (res) {\\r\\n                                    router.push({path: '/admin'})\\r\\n                                    Notification.success({\\r\\n                                        title: '登录',\\r\\n                                        message: response.message || '成功'\\r\\n                                    });\\r\\n                                }\\r\\n                                else {\\r\\n                                    Notification.error({\\r\\n                                        title: '错误',\\r\\n                                        message: response.message || response.status || '登录失败'\\r\\n                                    });\\r\\n                                }\\r\\n                            },\\r\\n                            error: function (response) {\\r\\n                                var message = (response.message) ? response.message : \\\"未知错误\\\";\\r\\n                                Notification.error({\\r\\n                                    title: '错误',\\r\\n                                    message: message\\r\\n                                });\\r\\n                            }\\r\\n                        });\\r\\n                    } else {\\r\\n                        return false;\\r\\n                    }\\r\\n                });\\r\\n            },\\r\\n            clearPassword: function () {\\r\\n                this.passwd = \\\"\\\";\\r\\n            },\\r\\n            resetPasswordForm() {\\r\\n                this.$refs['passwordForm'].resetFields();\\r\\n            }\\r\\n        },\\r\\n    }\\r\\n\\r\\n</script>\\r\\n\\r\\n<style scoped>\\r\\n    body {\\r\\n        font-family: \\\"Microsoft YaHei\\\";\\r\\n        font-size: 12px;\\r\\n    }\\r\\n\\r\\n    .page {\\r\\n        position: absolute;\\r\\n        width: 99%;\\r\\n        height: 98%;\\r\\n        font-size: 12px;\\r\\n        background: url('../assets/images/bg.png') 0 0 repeat;\\r\\n    }\\r\\n\\r\\n    .container {\\r\\n        box-sizing: border-box;\\r\\n        width: 400px;\\r\\n        height: 350px;\\r\\n        padding: 20px 60px 20px 10px;\\r\\n        margin-left: -200px;\\r\\n        margin-top: -180px;\\r\\n        position: absolute;\\r\\n        left: 50%;\\r\\n        top: 50%;\\r\\n        border: 1px solid #e8ebf2;\\r\\n        border-radius: 2px;\\r\\n        filter: progid:DXImageTransform.Microsoft.Shadow(color='#e8ebf2', Direction=135, Strength=5); /*for ie6,7,8*/\\r\\n        background-color: #fff;\\r\\n        -moz-box-shadow: 0 2px 16px #e8ebf2, 0 0 1px #e8ebf2, 0 0 1px #e8ebf2; /*firefox*/\\r\\n        -webkit-box-shadow: 0 2px 16px #e8ebf2, 0 0 1px #e8ebf2, 0 0 1px #e8ebf2; /*webkit*/\\r\\n        box-shadow: 0 2px 16px #e8ebf2, 0 0 1px #e8ebf2, 0 0 1px #e8ebf2; /*opera或ie9*/\\r\\n    }\\r\\n\\r\\n    .page-title {\\r\\n        text-align: center;\\r\\n        padding-left: 60px;\\r\\n        font-size: 20px;\\r\\n        font-weight: bold;\\r\\n        color: #1a1d22;\\r\\n        line-height: 50px;\\r\\n    }\\r\\n\\r\\n    .text-center {\\r\\n        text-align: center;\\r\\n        padding-left: 60px;\\r\\n    }\\r\\n\\r\\n\\r\\n</style>\\r\\n\"]}]);\n","module.exports = (__webpack_require__(45))(3);"],"sourceRoot":""}