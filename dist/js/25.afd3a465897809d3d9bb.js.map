{"version":3,"sources":["webpack:///./src/utils/formatDate.js","webpack:///./src/data/personas/provinceline.js","webpack:///./src/data/personas/provinceMap.js","webpack:///src/views/contents/loan/personas/province.vue","webpack:///./src/views/contents/loan/personas/province.vue","webpack:///./src/views/contents/loan/personas/province.vue?28e9","webpack:///./src/views/contents/loan/personas/province.vue?b4c5","webpack:///./src/utils/common.js","webpack:///./src/views/contents/loan/personas/province.vue?57db","webpack:///./src/views/contents/loan/personas/province.vue?c89b","webpack:///delegated ../node_modules/_babel-runtime@6.26.0@babel-runtime/helpers/typeof.js from dll-reference vendor_b35904a9f84fabbc839d"],"names":["t","a","formatDate","Object","e","Error","o","M+","Date","getMonth","d+","getDate","h+","getHours","m+","getMinutes","s+","getSeconds","q+","Math","S","getMilliseconds","s","test","format","RegExp","getFullYear","substr","max","sum","i","l","temp","obj","length","p","name","value","f","title","text","subtext","left","tooltip","trigger","legend","orient","data","visualMap","min","top","calculable","inRange","color","toolbox","show","feature","dataView","readOnly","mark","restore","saveAsImage","roamController","x","mapTypeControl","series","type","mapType","roam","label","normal","emphasis","dataMap","b","baseOption","timeline","axisType","autoPlay","playInterval","grid","right","bottom","containLabel","xAxis","axisLabel","interval","splitLine","yAxis","itemStyle","options","c","registerMap","d","k","D","setDate","buttonDisabled","mapData","lineData","deviceOptions","searchParam","personaType","device","dateRange","date","activeName","showDetail","isEven","methods","handleClick","index","this","removeLabel","stopPropagation","initSeries","setSeries","features","replace","push","customerCount","passTotalCount","parseFloat","customerRate","split","passTotalRate","getDevices","ajax","url","contentType","success","list","error","search","status","n","forEach","totalCount","data_max","r","data_sum","mounted","$createElement","_self","_c","on","tab-click","model","callback","expression","attrs","staticClass","staticStyle","width","slot","placeholder","$set","_l","key","_v","icon","click","ref","id","auto-resize","_e","exports","locals","default","Common","api","auth","_timestamp","_authTokenObj","getOldToken","_authToken","uploadFiles","$","headers","Authorization","Timestamp","traditional","async","processData","dataType","response","alert","location","XMLHttpRequest","message","complete","timeout","arr","resultQuery","hasOwnProperty","jQuery","version","sources","names","mappings","file","sourcesContent"],"mappings":"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","file":"dist/js/25.afd3a465897809d3d9bb.js","sourcesContent":["/**\r\n * Created by 焦丙乾(jiaobingqian) on 2017/2/8.\r\n */\r\n// export const toDate = function(date) {\r\n//   return isDate(date) ? new Date(date) : null;\r\n// };\r\n//\r\n// export const isDate = function(date) {\r\n//   if (date === null || date === undefined) return false;\r\n//   if (isNaN(new Date(date).getTime())) return false;\r\n//   return true;\r\n// };\r\nconst formatDate = function(_datetime,format){\r\n    /* * 使用例子:format=\"yyyy-MM-dd hh:mm:ss\"; */\r\n    if(Object.prototype.toString.call(_datetime) !==\"[object Date]\" && typeof _datetime !='string'){\r\n      throw  new Error(\"参数类型不合法！\");\r\n    }\r\n  \r\n    var o = {\r\n        \"M+\" : new Date(_datetime).getMonth() + 1,// month\r\n        \"d+\" : new Date(_datetime).getDate(), // day\r\n        \"h+\" : new Date(_datetime).getHours(), // hour\r\n        \"m+\" : new Date(_datetime).getMinutes(), // minute\r\n        \"s+\" : new Date(_datetime).getSeconds(), // second\r\n        \"q+\" : Math.floor((new Date(_datetime).getMonth() + 3) / 3), // quarter\r\n        \"S\" : new Date(_datetime).getMilliseconds() // millisecond\r\n    }\r\n    if (/(y+)/.test(format)) {\r\n        format = format.replace(RegExp.$1, (new Date(_datetime).getFullYear() + \"\").substr(4 - RegExp.$1.length));\r\n    }\r\n    for (var k in o) {\r\n        if (new RegExp(\"(\" + k + \")\").test(format)) {\r\n            format = format.replace(RegExp.$1, RegExp.$1.length == 1 ? o[k] : (\"00\" + o[k]).substr((\"\" + o[k]).length));\r\n        }\r\n    }\r\n    return format;\r\n}\r\n\r\nexport default formatDate;\r\n","/**\r\n * Created by 焦丙乾(jiaobingqian) on 2017/3/7.\r\n */\r\nvar dataMap = {};\r\nfunction dataFormatter(obj) {\r\n  var pList = ['北京','天津','河北','山西','内蒙古','辽宁','吉林','黑龙江','上海','江苏','浙江','安徽','福建','江西','山东','河南','湖北','湖南','广东','广西','海南','重庆','四川','贵州','云南','西藏','陕西','甘肃','青海','宁夏','新疆'];\r\n  var temp;\r\n  var max = 0;\r\n  var sum = 0;\r\n  temp = obj.data;\r\n  for (var i = 0, l = temp.length; i < l; i++) {\r\n    max = Math.max(max, temp[i]);\r\n    sum += temp[i];\r\n    obj.data[i] = {\r\n      name : pList[i],\r\n      value : temp[i]\r\n    }\r\n  }\r\n  obj['data_max'] = Math.floor(max / 100) * 100;\r\n  obj['data_sum'] = sum;\r\n  return obj;\r\n}\r\n\r\ndataMap.dataCustomer = dataFormatter({\r\n  //max : 60000,\r\n  data:[62.93,10.28,55.76,37.55,19.88,26.7,18.83,82,15.69,49.27,18.85,10.65,10.18,12.82,41.85,21.03,12.26,19.56,50.28,11.87,22.66,11.37,26.68,51.84,83.12,65.83,12.3,50.37,16.44,22.21,10.05],\r\n});\r\n\r\ndataMap.dataAuditSuccess = dataFormatter({\r\n  //max : 3200,\r\n  data:[10.65,62.93,10.28,55.76,37.88,19.88,26.7,18.83,82,15.69,49.27,18.85,10.18,12.82,41.85,21.03,12.26,19.56,50.28,11.87,22.66,11.37,26.68,51.84,83.12,65.83,12.3,50.37,16.44,22.21,10.05],\r\n});\r\n//console.log('ddd',dataMap.dataCustomer['data']);\r\nexport  default {\r\n  baseOption: {\r\n    timeline: {\r\n      // y: 0,\r\n      show:false,\r\n      axisType: 'category',\r\n      // realtime: false,\r\n      //loop: false,\r\n      autoPlay: false,\r\n      // currentIndex: 2,\r\n      playInterval: 1000,\r\n      // controlStyle: {\r\n      //     position: 'left'\r\n      // },\r\n      data: ['data'],\r\n      label: \"当前时间范围内\"\r\n    },\r\n    title: {\r\n      subtext: '用户画像'\r\n    },\r\n    tooltip: {\r\n      trigger: 'axis',\r\n      //formatter:'{b}<br />{a0}: {c0}%<br />{a1}: {c1}%'\r\n    },\r\n    legend: {\r\n      x: 'right',\r\n      data: ['客户占比', '审核通过占比',],\r\n    },\r\n    calculable : true,\r\n    grid: {\r\n      top: 80,\r\n      left: '3%',\r\n      right: '4%',\r\n      bottom: '5%',\r\n      containLabel: true\r\n    },\r\n    xAxis: [\r\n      {\r\n        type:'category',\r\n        axisLabel:{'interval':0},\r\n        data:[\r\n          // '北京','\\n天津','河北','\\n山西','内蒙古','\\n辽宁','吉林','\\n黑龙江',\r\n          // '上海','\\n江苏','浙江','\\n安徽','福建','\\n江西','山东','\\n河南',\r\n          // '湖北','\\n湖南','广东','\\n广西','海南','\\n重庆','四川','\\n贵州',\r\n          // '云南','\\n西藏','陕西','\\n甘肃','青海','\\n宁夏','新疆'\r\n  \r\n//           \"福建省\",\r\n// \"新疆维吾尔自治区\",\r\n// \"宁夏回族自治区\",\r\n// \"广东省\",\r\n// \"重庆市\",\r\n// \"甘肃省\",\r\n// \"四川省\",\r\n// \"河南省\",\r\n// \"安徽省\",\r\n// \"江苏省\",\r\n// \"北京市\",\r\n// \"湖南省\",\r\n// \"浙江省\",\r\n// \"广西壮族自治区\",\r\n// \"贵州省\",\r\n// \"陕西省\",\r\n// \"山西省\",\r\n// \"黑龙江省\",\r\n// \"青海省\",\r\n// \"西藏自治区\",\r\n// \"海南省\",\r\n// \"天津市\",\r\n// \"辽宁省\",\r\n// \"江西省\",\r\n// \"内蒙古自治区\",\r\n// \"吉林省\",\r\n// \"河北省\",\r\n// \"云南省\",\r\n// \"山东省\",\r\n// \"上海市\",\r\n// \"湖北省\"\r\n        ],\r\n        splitLine: {show: false},\r\n        \r\n      }\r\n    ],\r\n    yAxis: [\r\n      {\r\n        type: 'value',\r\n        name: '占比（%）',\r\n        // max: 53500\r\n        //max: 100\r\n      }\r\n    ],\r\n    series: [\r\n      {name: '客户占比', type: 'bar',\r\n        // markLine : {\r\n        //   lineStyle: {\r\n        //     normal: {\r\n        //       type: 'dashed'\r\n        //     }\r\n        //   },\r\n        //   data : [\r\n        //     [{type : 'min'}, {type : 'max'}]\r\n        //   ]\r\n        // }\r\n      },\r\n      {name: '审核通过占比',\r\n        type: 'bar',\r\n        itemStyle: {\r\n          normal: {\r\n            color: '#1196EE'\r\n          }\r\n        },\r\n      },\r\n    ]\r\n  },\r\n  options: [\r\n    {\r\n      title : {text: '全国省份(客户/审核通过)占比情况'},\r\n      series : [\r\n        {data: []},\r\n        {data: []},\r\n        // {data: dataMap.dataCustomer['data']},\r\n        // {data: dataMap.dataAuditSuccess['data']},\r\n      ]\r\n    }\r\n  ]\r\n};\r\n","function randomData() {\r\n  return Math.round(Math.random()*1000);\r\n}\r\n\r\nexport default {\r\n  title: {\r\n    text: '全国省份(总客户数，客户数，审核通过数)用户画像',\r\n    subtext: '用户画像',\r\n    left: 'center'\r\n  },\r\n  tooltip: {\r\n    trigger: 'item'\r\n  },\r\n  legend: {\r\n    orient: 'vertical',\r\n    left: 'left',\r\n    data:['客户数','审核通过数']\r\n  },\r\n  visualMap: {\r\n    min: 0,\r\n    max: 5000,\r\n    left: 'left',\r\n    top: 'bottom',\r\n    text: ['总客户数','低'],           // 文本，默认为数值文本\r\n    calculable: true,\r\n    inRange: {\r\n      color: ['lightskyblue','red', '#0066FF','#4575b4','yellow','green']\r\n    },\r\n    //range: [200, 2000],\r\n  },\r\n  toolbox: {\r\n    show: true,\r\n    orient: 'vertical',\r\n    left: 'right',\r\n    top: 'center',\r\n    feature: {\r\n      dataView: {readOnly: false},\r\n      // restore: {},\r\n      // saveAsImage: {},\r\n      // brush: {\r\n      //   type: ['rect', 'polygon', 'clear']\r\n      // },\r\n      mark : {show: true},\r\n      restore : {show: true},\r\n      saveAsImage : {show: true}\r\n    }\r\n  },\r\n  roamController: {\r\n    show: true,\r\n    x: 'right',\r\n    mapTypeControl: {\r\n      'china': true\r\n    }\r\n  },\r\n  series: [\r\n    {\r\n     name: '客户数',\r\n     type: 'map',\r\n     mapType: 'china',\r\n     roam: true,\r\n     label: {\r\n     normal: {\r\n     show: true\r\n     },\r\n     emphasis: {\r\n     show: true\r\n     }\r\n     },\r\n     data:[\r\n     // {name: '北京',value: 0 },\r\n     // {name: '天津',value: 0 },\r\n     // {name: '上海',value: 0 },\r\n     // {name: '重庆',value: 0 },\r\n     // {name: '河北',value: 0 },\r\n     // {name: '河南',value: 0 },\r\n     // {name: '云南',value: 0 },\r\n     // {name: '辽宁',value: 0 },\r\n     // {name: '黑龙江',value: 0 },\r\n     // {name: '湖南',value: 0 },\r\n     // {name: '安徽',value: 0 },\r\n     // {name: '山东',value: 0 },\r\n     // {name: '新疆',value: 0 },\r\n     // {name: '江苏',value: 0 },\r\n     // {name: '浙江',value: 0 },\r\n     // {name: '江西',value: 0 },\r\n     // {name: '湖北',value: 0 },\r\n     // {name: '广西',value: 0 },\r\n     // {name: '甘肃',value: 0 },\r\n     // {name: '山西',value: 0 },\r\n     // {name: '内蒙古',value: 0 },\r\n     // {name: '陕西',value: 0 },\r\n     // {name: '吉林',value: 0 },\r\n     // {name: '福建',value: 0 },\r\n     // {name: '贵州',value: 0 },\r\n     // {name: '广东',value: 0 },\r\n     // {name: '青海',value: 0 },\r\n     // {name: '西藏',value: 0 },\r\n     // {name: '四川',value: 0 },\r\n     // {name: '宁夏',value: 0 },\r\n     // {name: '海南',value: 0 },\r\n     // {name: '台湾',value: 0 },\r\n     // {name: '香港',value: 0 },\r\n     // {name: '澳门',value: 0 }\r\n     ]\r\n     },\r\n    {\r\n      name: '审核通过数',\r\n      type: 'map',\r\n      mapType: 'china',\r\n      roam: true,\r\n      label: {\r\n        normal: {\r\n          show: true\r\n        },\r\n        emphasis: {\r\n          show: true\r\n        }\r\n      },\r\n      data:[\r\n        // {name: '北京',value: 0 },\r\n        // {name: '天津',value: 0 },\r\n        // {name: '上海',value: 0 },\r\n        // {name: '重庆',value: 0 },\r\n        // {name: '河北',value: 0 },\r\n        // {name: '河南',value: 0 },\r\n        // {name: '云南',value: 0 },\r\n        // {name: '辽宁',value: 0 },\r\n        // {name: '黑龙江',value: 0 },\r\n        // {name: '湖南',value: 0 },\r\n        // {name: '安徽',value: 0 },\r\n        // {name: '山东',value: 0 },\r\n        // {name: '新疆',value: 0 },\r\n        // {name: '江苏',value: 0 },\r\n        // {name: '浙江',value: 0 },\r\n        // {name: '江西',value: 0 },\r\n        // {name: '湖北',value: 0 },\r\n        // {name: '广西',value: 0 },\r\n        // {name: '甘肃',value: 0 },\r\n        // {name: '山西',value: 0 },\r\n        // {name: '内蒙古',value: 0 },\r\n        // {name: '陕西',value: 0 },\r\n        // {name: '吉林',value: 0 },\r\n        // {name: '福建',value: 0 },\r\n        // {name: '贵州',value: 0 },\r\n        // {name: '广东',value: 0 },\r\n        // {name: '青海',value: 0 },\r\n        // {name: '西藏',value: 0 },\r\n        // {name: '四川',value: 0 },\r\n        // {name: '宁夏',value: 0 },\r\n        // {name: '海南',value: 0 },\r\n        // {name: '台湾',value: 0 },\r\n        // {name: '香港',value: 0 },\r\n        // {name: '澳门',value: 0 }\r\n      ]\r\n    },\r\n  ]\r\n}\r\n","<template>\r\n  <el-tabs v-model=\"activeName\" @tab-click=\"handleClick\">\r\n    <el-tab-pane label=\"用户画像\" name=\"first\">\r\n      <div class=\"p_6\">\r\n        <div class=\"search-wrapper\">\r\n          <div class=\"search-content\">\r\n            <el-select v-model=\"searchParam.device\" slot=\"prepend\" placeholder=\"手机设备\" style=\"width: 100px;\">\r\n              <el-option\r\n                v-for=\"item in deviceOptions\"\r\n                :key=\"item.value\"\r\n                :label=\"item.name\"\r\n                :value=\"item.value\">\r\n              </el-option>\r\n            </el-select>\r\n            <!--<el-date-picker-->\r\n              <!--v-model=\"searchParam.dateRange\"-->\r\n              <!--type=\"daterange\"-->\r\n              <!--placeholder=\"选择日期范围\">-->\r\n            <!--</el-date-picker>-->\r\n            <el-date-picker\r\n              v-model=\"searchParam.date\"\r\n              type=\"date\"\r\n              placeholder=\"选择日期\">\r\n            </el-date-picker>\r\n          </div>\r\n          <div class=\"search-btn\">\r\n            <el-button slot=\"append\" icon=\"search\" @click=\"search\" style=\"width:80px; \">查询</el-button>\r\n          </div>\r\n        </div>\r\n        <main>\r\n          <figure class=\"\">\r\n            <chart id=\"map\" :options=\"mapData\" ref=\"map\" auto-resize></chart>\r\n          </figure>\r\n          <hr>\r\n          <figure class=\"\">\r\n            <chart id=\"timeline\" :options=\"lineData\" ref=\"timeline\"></chart>\r\n          </figure>\r\n        </main>\r\n      </div>\r\n    </el-tab-pane>\r\n    <div v-if=\"showDetail\">\r\n      <el-tab-pane name=\"second\">\r\n\r\n      </el-tab-pane>\r\n    </div>\r\n  </el-tabs>\r\n</template>\r\n<style>\r\n  .dark-bg {\r\n    background-color: #404a59;\r\n  }\r\n\r\n  .echarts {\r\n    width: 100%;\r\n    /*height: 800px;*/\r\n  }\r\n</style>\r\n<script>\r\n  import Common from '../../../../utils/common'\r\n  import auth from '../../../../utils/authenticate'\r\n  import {Notification} from 'element-ui';\r\n  import formatDate from '../../../../utils/formatDate.js'\r\n  //引入Echats图表组件\r\n  import VueECharts from 'vue-echarts/components/ECharts.vue'\r\n\r\n  import 'echarts/lib/chart/map'\r\n  // Map of China\r\n  import chinaMap from '../../../../assets/data/chinaCenter.json'\r\n  // registering map data\r\n  VueECharts.registerMap('china', chinaMap)\r\n  /*\r\n   // custom theme\r\n   import theme from './data/theme.json'\r\n   // registering custom theme\r\n   VueECharts.registerTheme('ovilia-green', theme)\r\n   */\r\n\r\n  // import ECharts modules manually to reduce bundle size\r\n\r\n  import 'echarts/lib/chart/scatter'\r\n  import 'echarts/lib/chart/effectScatter'\r\n  import 'echarts/lib/component/toolbox'\r\n  import 'echarts/lib/component/tooltip'\r\n  // built-in theme\r\n  import 'echarts/theme/dark'\r\n\r\n  import chinaMapData from '../../../../data/personas/provinceMap'\r\n  import lineData from '../../../../data/personas/provinceline'\r\n  export default{\r\n\r\n    data(){\r\n      let date = new Date();\r\n      let prevMonth = new Date(date.setDate(date.getDate() - 7));\r\n      let now = new Date();\r\n\r\n      return {\r\n        buttonDisabled: false,\r\n        mapData: chinaMapData,\r\n        lineData,\r\n        deviceOptions: [{\r\n          value: 'ALL',\r\n          name: 'ALL',\r\n        }, {\r\n          value: 'iPhone',\r\n          name: 'iOS',\r\n        }, {\r\n          value: 'Android',\r\n          name: 'Android'\r\n        }],\r\n        searchParam: {\r\n          personaType: \"province\",\r\n          device: \"ALL\",\r\n          dateRange: [prevMonth, now],\r\n          date:now\r\n        },\r\n        activeName: 'first',\r\n        showDetail: false,\r\n        name: 'detail',\r\n        isEven: false,\r\n\r\n      }\r\n    },\r\n    methods: {\r\n      handleClick(tab, event) {\r\n        let index = tab.index;\r\n        if (index == 0) {\r\n          this.activeName = 'first';\r\n        }\r\n      },\r\n      removeLabel(event){\r\n        //console.log(event);\r\n        event.stopPropagation();\r\n        this.activeName = 'first';\r\n        this.showDetail = false;\r\n\r\n      },\r\n      initSeries(){\r\n        //console.log('series', this);\r\n        this.mapData.series[0].data = [];\r\n        this.mapData.series[1].data = [];\r\n\r\n        this.isEven=false;\r\n        this.lineData.baseOption.xAxis[0].data = [];\r\n\r\n        this.lineData.options[0].series[0].data = [];\r\n        this.lineData.options[0].series[1].data = [];\r\n      },\r\n      setSeries(obj){\r\n        let provinceName = obj.features.replace(/(^\\s+)|(\\s+$)/g,\"\");\r\n        provinceName = provinceName.substr(0,2);\r\n        if(provinceName ==='内蒙') provinceName = '内蒙古';\r\n        if(provinceName ==='黑龙') provinceName = '黑龙江';\r\n\r\n        let mapProvinceName = provinceName;\r\n        provinceName = this.isEven ? '\\n'+provinceName : provinceName;\r\n        this.isEven = !this.isEven;\r\n        this.lineData.baseOption.xAxis[0].data.push(provinceName);\r\n\r\n        //客户数据\r\n        this.mapData.series[0].data.push({\r\n          name: mapProvinceName,\r\n          value: obj.customerCount\r\n        });\r\n        //审核通过数\r\n        this.mapData.series[1].data.push({\r\n          name: mapProvinceName,\r\n          value: obj.passTotalCount\r\n        });\r\n\r\n        //客户占比\r\n        this.lineData.options[0].series[0].data.push({\r\n          name: provinceName,\r\n          value: parseFloat(obj.customerRate.split('%')[0])//obj.customerRate\r\n        });\r\n        //审核通过占比\r\n        this.lineData.options[0].series[1].data.push({\r\n          name: provinceName,\r\n          value: parseFloat(obj.passTotalRate.split('%')[0])//obj.passTotalRate\r\n        });\r\n        ////console.log('lineData:',this.lineData.options[0].series[0].data);\r\n      },\r\n      getDevices(){\r\n        Common.ajax({\r\n          url: '/api/requestParam/device',\r\n          type: 'GET',\r\n          contentType: 'application/json',\r\n          success: (response) => {\r\n            if (response.data && response.data.list) {\r\n              this.deviceOptions = response.data.list;\r\n            }\r\n          },\r\n          error: (err) => {\r\n            this.deviceOptions = [{\r\n              value: 'ALL',\r\n              name: 'ALL',\r\n            }, {\r\n              value: 'iPhone',\r\n              name: 'IOS',\r\n            }, {\r\n              value: 'Android',\r\n              name: 'Android'\r\n            }];\r\n          }\r\n        });\r\n      },\r\n\r\n      search(){\r\n        this.buttonDisabled = true;\r\n        this.initSeries();\r\n        let self = this;\r\n        let date = self.searchParam.date;\r\n        Common.ajax({\r\n          url: \"/api/loan/persona\",\r\n          type: \"POST\",\r\n          data: {\r\n            personaType: 'province',\r\n            date: formatDate(date, 'yyyy-MM-dd'),\r\n            //endTime: formatDate(dateRange[1], 'yyyy-MM-dd')\r\n          },\r\n          contentType: \"application/json\",\r\n          success: (response) => {\r\n            if (!response.status) {\r\n              let list = response.data.list;\r\n              let totalCount;\r\n\r\n              var maxCustomer = 0;\r\n              var sumCustomer = 0;\r\n              var maxPass = 0;\r\n              var sumPass = 0;\r\n\r\n              list.forEach((obj, index, arr) => {\r\n                if (!totalCount) {\r\n                  totalCount = obj.totalCount;\r\n                  this.mapData.visualMap.max = obj.totalCount;\r\n\r\n//                  totalCount = obj.customerCount;\r\n//                  this.mapData.visualMap.max = obj.customerCount;\r\n                }\r\n\r\n                maxCustomer = Math.max(maxCustomer, obj.customerRate.split('%')[0]);\r\n                sumCustomer += parseFloat(obj.customerRate.split('%')[0]);\r\n\r\n                maxPass = Math.max(maxPass, obj.customerRate.split('%')[0]);\r\n                sumPass += parseFloat(obj.passTotalRate.split('%')[0]);\r\n\r\n                this.setSeries(obj);\r\n\r\n                ////console.log('max,sum',maxCustomer,sumCustomer);\r\n              });\r\n\r\n              //console.log(this.mapData.series[0].data,this.mapData.series[1].data);\r\n              //console.log(maxCustomer,sumCustomer,maxPass,sumPass);\r\n              //console.log('xArias',this.lineData.baseOption.xAxis[0].data);\r\n\r\n              this.lineData.options[0].series[0].data['data_max'] = Math.floor(maxCustomer / 100) * 100;\r\n              this.lineData.options[0].series[0].data['data_sum'] = sumCustomer;\r\n\r\n              this.lineData.options[0].series[1].data['data_max'] = Math.floor(maxPass / 100) * 100;\r\n              this.lineData.options[0].series[1].data['data_sum'] = sumPass;\r\n\r\n\r\n              this.lineData.baseOption.yAxis.max = Math.max(maxCustomer,maxPass);\r\n              //console.log('max',this.lineData.baseOption.yAxis.max);\r\n//              this.$refs.map.hideLoading();\r\n//              this.$refs.map.mergeOptions(this.mapData)\r\n              //console.log('mapSeries',this.mapData.series);\r\n              this.buttonDisabled = false;\r\n            }\r\n          },\r\n          error: () => {\r\n            this.buttonDisabled = false;\r\n          }\r\n        });\r\n      },\r\n    },\r\n    mounted(){\r\n//      this.$refs.map.showLoading({\r\n//        text: '正在加载',\r\n//        color: '#4ea397',\r\n//        maskColor: 'rgba(255, 255, 255, 0.4)'\r\n//      })\r\n      this.getDevices();\r\n      this.search();\r\n    }\r\n  }\r\n</script>\r\n\r\n","import { render, staticRenderFns } from \"./province.vue?vue&type=template&id=a8cfc6d6&\"\nimport script from \"./province.vue?vue&type=script&lang=js&\"\nexport * from \"./province.vue?vue&type=script&lang=js&\"\nimport style0 from \"./province.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-tabs',{on:{\"tab-click\":_vm.handleClick},model:{value:(_vm.activeName),callback:function ($$v) {_vm.activeName=$$v},expression:\"activeName\"}},[_c('el-tab-pane',{attrs:{\"label\":\"用户画像\",\"name\":\"first\"}},[_c('div',{staticClass:\"p_6\"},[_c('div',{staticClass:\"search-wrapper\"},[_c('div',{staticClass:\"search-content\"},[_c('el-select',{staticStyle:{\"width\":\"100px\"},attrs:{\"slot\":\"prepend\",\"placeholder\":\"手机设备\"},slot:\"prepend\",model:{value:(_vm.searchParam.device),callback:function ($$v) {_vm.$set(_vm.searchParam, \"device\", $$v)},expression:\"searchParam.device\"}},_vm._l((_vm.deviceOptions),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.name,\"value\":item.value}})}),1),_vm._v(\" \"),_c('el-date-picker',{attrs:{\"type\":\"date\",\"placeholder\":\"选择日期\"},model:{value:(_vm.searchParam.date),callback:function ($$v) {_vm.$set(_vm.searchParam, \"date\", $$v)},expression:\"searchParam.date\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"search-btn\"},[_c('el-button',{staticStyle:{\"width\":\"80px\"},attrs:{\"slot\":\"append\",\"icon\":\"search\"},on:{\"click\":_vm.search},slot:\"append\"},[_vm._v(\"查询\")])],1)]),_vm._v(\" \"),_c('main',[_c('figure',{},[_c('chart',{ref:\"map\",attrs:{\"id\":\"map\",\"options\":_vm.mapData,\"auto-resize\":\"\"}})],1),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('figure',{},[_c('chart',{ref:\"timeline\",attrs:{\"id\":\"timeline\",\"options\":_vm.lineData}})],1)])])]),_vm._v(\" \"),(_vm.showDetail)?_c('div',[_c('el-tab-pane',{attrs:{\"name\":\"second\"}})],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/_css-loader@3.1.0@css-loader/dist/cjs.js?sourceMap!../../../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/index.js??vue-loader-options!./province.vue?vue&type=style&index=0&lang=css&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../node_modules/_vue-style-loader@4.1.2@vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"c5e442f4\", content, true, {});","/**\r\n * Created by 焦丙乾(jiaobingqian) on 17/3/3.\r\n */\r\nimport jQuery from 'jquery'\r\nimport auth from './authenticate'\r\n\r\nconst Common = (function(api,$){\r\n    api.title=\"好分期报表系统\";\r\n    api.ajax = function(options){\r\n        api.token = auth.getToken();\r\n        //var url = '/api' + options.url;\r\n        var url = options.url;\r\n        var _authToken;\r\n        var _timestamp = +new Date();\r\n        if(url.indexOf(\"api/\")>=0){\r\n            var _authTokenObj = auth.getOldToken();\r\n            _timestamp = _authTokenObj.timestamp;\r\n            _authToken = _authTokenObj.token;\r\n            \r\n        }else{\r\n            _authToken = api.token;\r\n        }\r\n        if(!options.uploadFiles){\r\n          if(options.type){\r\n            if(options.type.toLowerCase() =='get'){\r\n              if( typeof options.data === 'object' ){\r\n                // url += api.formatQuery(options.data);\r\n                // options.data = {};\r\n              }\r\n            }else{\r\n              if( typeof options.data === 'object' ) options.data = JSON.stringify(options.data);\r\n            }\r\n          }else{\r\n            if( typeof options.data === 'object' ) options.data = JSON.stringify(options.data);\r\n          }\r\n        }\r\n        \r\n        // if(options.type && options.type.toUpperCase() =='POST'){\r\n        //   if( typeof options.data === 'object' ) options.data = JSON.stringify(options.data);\r\n        // }else{\r\n        //   //url += api.formatQuery(options.data);\r\n        //   //options.data = {};\r\n        // }\r\n      \r\n        $.ajax({\r\n            headers:{\r\n                'Authorization':_authToken,\r\n                'Timestamp':_timestamp,\r\n            },\r\n            url: url,\r\n            type: options.type || \"GET\",\r\n            traditional: true,\r\n            data: options.data || {},\r\n            async: options.async || true,\r\n            processData: (options.processData === undefined ? true : options.processData),\r\n            contentType: (options.contentType === undefined ? $.ajaxSettings.contentType : options.contentType),\r\n            dataType: options.dataType || 'json',\r\n            success: function (response) {\r\n                if (response.status && response.status !== '0') {\r\n                    if (response.status == -1) {\r\n                      // 登陆失效\r\n                      alert(`警告: ${response.message}`);\r\n                      auth.setAsLoggedOut();\r\n                      location.href = '/#/login';\r\n                    } else if (options.error) {\r\n                      options.error(response);\r\n                    } else {\r\n                      alert(`警告: ${response.message}\\n错误：${response.status}`);\r\n                    }\r\n                    return;\r\n                }\r\n                \r\n                options.success && options.success(response);\r\n\r\n            },\r\n            error: function (XMLHttpRequest, textStatus, errorThrown) {\r\n                if (options.error) {\r\n                    if(XMLHttpRequest.response) {\r\n                        options.error(XMLHttpRequest.response);\r\n                    }\r\n                    else{\r\n                        options.error({\r\n                            message: '请求失败'\r\n                        });\r\n                    }\r\n                } else {\r\n                }\r\n            },\r\n            complete: options.complete || undefined,\r\n            timeout:options.timeout||null\r\n        });\r\n    };\r\n    api.hasDuplicate= function(obj,arr){\r\n        if(Object.prototype.toString.call(arr) !== \"[object Array]\"){\r\n            throw new Error('invalid argument');\r\n        }\r\n        for(let i=0,l=arr.length;i<l;i++){\r\n            if(obj == arr[i]){\r\n                return true;\r\n            }\r\n        }\r\n        return false\r\n    };\r\n    api.formatQuery = function(param){\r\n      if(Object.prototype.toString.call(param) !== \"[object Object]\"){\r\n        throw new Error('invalid argument');\r\n      }\r\n      let searchParam = param;\r\n      let resultQuery = '?';//session=' + api.session;\r\n      for(var i in searchParam){\r\n        if (searchParam.hasOwnProperty(i)) { //filter,只输出man的私有属性\r\n          resultQuery+= i+'='+searchParam[i]+'&';\r\n        }\r\n      }\r\n      \r\n      return resultQuery;\r\n    };\r\n\r\n    return api;\r\n})(Common||{}, jQuery);\r\n\r\nexport default Common;\r\n\r\n","import mod from \"-!../../../../../node_modules/_extract-text-webpack-plugin@4.0.0-beta.0@extract-text-webpack-plugin/dist/loader.js??ref--4-0!../../../../../node_modules/_vue-style-loader@4.1.2@vue-style-loader/index.js!../../../../../node_modules/_css-loader@3.1.0@css-loader/dist/cjs.js?sourceMap!../../../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/index.js??vue-loader-options!./province.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../node_modules/_extract-text-webpack-plugin@4.0.0-beta.0@extract-text-webpack-plugin/dist/loader.js??ref--4-0!../../../../../node_modules/_vue-style-loader@4.1.2@vue-style-loader/index.js!../../../../../node_modules/_css-loader@3.1.0@css-loader/dist/cjs.js?sourceMap!../../../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/index.js??vue-loader-options!./province.vue?vue&type=style&index=0&lang=css&\"","exports = module.exports = require(\"../../../../../node_modules/_css-loader@3.1.0@css-loader/dist/runtime/api.js\")(true);\n// Module\nexports.push([module.id, \"\\n.dark-bg {\\n  background-color: #404a59;\\n}\\n.echarts {\\n  width: 100%;\\n  /*height: 800px;*/\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"src/views/contents/loan/personas/province.vue\"],\"names\":[],\"mappings\":\";AAgDA;EACA,yBAAA;AACA;AAEA;EACA,WAAA;EACA,iBAAA;AACA\",\"file\":\"province.vue?vue&type=style&index=0&lang=css&\",\"sourcesContent\":[\"<template>\\r\\n  <el-tabs v-model=\\\"activeName\\\" @tab-click=\\\"handleClick\\\">\\r\\n    <el-tab-pane label=\\\"用户画像\\\" name=\\\"first\\\">\\r\\n      <div class=\\\"p_6\\\">\\r\\n        <div class=\\\"search-wrapper\\\">\\r\\n          <div class=\\\"search-content\\\">\\r\\n            <el-select v-model=\\\"searchParam.device\\\" slot=\\\"prepend\\\" placeholder=\\\"手机设备\\\" style=\\\"width: 100px;\\\">\\r\\n              <el-option\\r\\n                v-for=\\\"item in deviceOptions\\\"\\r\\n                :key=\\\"item.value\\\"\\r\\n                :label=\\\"item.name\\\"\\r\\n                :value=\\\"item.value\\\">\\r\\n              </el-option>\\r\\n            </el-select>\\r\\n            <!--<el-date-picker-->\\r\\n              <!--v-model=\\\"searchParam.dateRange\\\"-->\\r\\n              <!--type=\\\"daterange\\\"-->\\r\\n              <!--placeholder=\\\"选择日期范围\\\">-->\\r\\n            <!--</el-date-picker>-->\\r\\n            <el-date-picker\\r\\n              v-model=\\\"searchParam.date\\\"\\r\\n              type=\\\"date\\\"\\r\\n              placeholder=\\\"选择日期\\\">\\r\\n            </el-date-picker>\\r\\n          </div>\\r\\n          <div class=\\\"search-btn\\\">\\r\\n            <el-button slot=\\\"append\\\" icon=\\\"search\\\" @click=\\\"search\\\" style=\\\"width:80px; \\\">查询</el-button>\\r\\n          </div>\\r\\n        </div>\\r\\n        <main>\\r\\n          <figure class=\\\"\\\">\\r\\n            <chart id=\\\"map\\\" :options=\\\"mapData\\\" ref=\\\"map\\\" auto-resize></chart>\\r\\n          </figure>\\r\\n          <hr>\\r\\n          <figure class=\\\"\\\">\\r\\n            <chart id=\\\"timeline\\\" :options=\\\"lineData\\\" ref=\\\"timeline\\\"></chart>\\r\\n          </figure>\\r\\n        </main>\\r\\n      </div>\\r\\n    </el-tab-pane>\\r\\n    <div v-if=\\\"showDetail\\\">\\r\\n      <el-tab-pane name=\\\"second\\\">\\r\\n\\r\\n      </el-tab-pane>\\r\\n    </div>\\r\\n  </el-tabs>\\r\\n</template>\\r\\n<style>\\r\\n  .dark-bg {\\r\\n    background-color: #404a59;\\r\\n  }\\r\\n\\r\\n  .echarts {\\r\\n    width: 100%;\\r\\n    /*height: 800px;*/\\r\\n  }\\r\\n</style>\\r\\n<script>\\r\\n  import Common from '../../../../utils/common'\\r\\n  import auth from '../../../../utils/authenticate'\\r\\n  import {Notification} from 'element-ui';\\r\\n  import formatDate from '../../../../utils/formatDate.js'\\r\\n  //引入Echats图表组件\\r\\n  import VueECharts from 'vue-echarts/components/ECharts.vue'\\r\\n\\r\\n  import 'echarts/lib/chart/map'\\r\\n  // Map of China\\r\\n  import chinaMap from '../../../../assets/data/chinaCenter.json'\\r\\n  // registering map data\\r\\n  VueECharts.registerMap('china', chinaMap)\\r\\n  /*\\r\\n   // custom theme\\r\\n   import theme from './data/theme.json'\\r\\n   // registering custom theme\\r\\n   VueECharts.registerTheme('ovilia-green', theme)\\r\\n   */\\r\\n\\r\\n  // import ECharts modules manually to reduce bundle size\\r\\n\\r\\n  import 'echarts/lib/chart/scatter'\\r\\n  import 'echarts/lib/chart/effectScatter'\\r\\n  import 'echarts/lib/component/toolbox'\\r\\n  import 'echarts/lib/component/tooltip'\\r\\n  // built-in theme\\r\\n  import 'echarts/theme/dark'\\r\\n\\r\\n  import chinaMapData from '../../../../data/personas/provinceMap'\\r\\n  import lineData from '../../../../data/personas/provinceline'\\r\\n  export default{\\r\\n\\r\\n    data(){\\r\\n      let date = new Date();\\r\\n      let prevMonth = new Date(date.setDate(date.getDate() - 7));\\r\\n      let now = new Date();\\r\\n\\r\\n      return {\\r\\n        buttonDisabled: false,\\r\\n        mapData: chinaMapData,\\r\\n        lineData,\\r\\n        deviceOptions: [{\\r\\n          value: 'ALL',\\r\\n          name: 'ALL',\\r\\n        }, {\\r\\n          value: 'iPhone',\\r\\n          name: 'iOS',\\r\\n        }, {\\r\\n          value: 'Android',\\r\\n          name: 'Android'\\r\\n        }],\\r\\n        searchParam: {\\r\\n          personaType: \\\"province\\\",\\r\\n          device: \\\"ALL\\\",\\r\\n          dateRange: [prevMonth, now],\\r\\n          date:now\\r\\n        },\\r\\n        activeName: 'first',\\r\\n        showDetail: false,\\r\\n        name: 'detail',\\r\\n        isEven: false,\\r\\n\\r\\n      }\\r\\n    },\\r\\n    methods: {\\r\\n      handleClick(tab, event) {\\r\\n        let index = tab.index;\\r\\n        if (index == 0) {\\r\\n          this.activeName = 'first';\\r\\n        }\\r\\n      },\\r\\n      removeLabel(event){\\r\\n        //console.log(event);\\r\\n        event.stopPropagation();\\r\\n        this.activeName = 'first';\\r\\n        this.showDetail = false;\\r\\n\\r\\n      },\\r\\n      initSeries(){\\r\\n        //console.log('series', this);\\r\\n        this.mapData.series[0].data = [];\\r\\n        this.mapData.series[1].data = [];\\r\\n\\r\\n        this.isEven=false;\\r\\n        this.lineData.baseOption.xAxis[0].data = [];\\r\\n\\r\\n        this.lineData.options[0].series[0].data = [];\\r\\n        this.lineData.options[0].series[1].data = [];\\r\\n      },\\r\\n      setSeries(obj){\\r\\n        let provinceName = obj.features.replace(/(^\\\\s+)|(\\\\s+$)/g,\\\"\\\");\\r\\n        provinceName = provinceName.substr(0,2);\\r\\n        if(provinceName ==='内蒙') provinceName = '内蒙古';\\r\\n        if(provinceName ==='黑龙') provinceName = '黑龙江';\\r\\n\\r\\n        let mapProvinceName = provinceName;\\r\\n        provinceName = this.isEven ? '\\\\n'+provinceName : provinceName;\\r\\n        this.isEven = !this.isEven;\\r\\n        this.lineData.baseOption.xAxis[0].data.push(provinceName);\\r\\n\\r\\n        //客户数据\\r\\n        this.mapData.series[0].data.push({\\r\\n          name: mapProvinceName,\\r\\n          value: obj.customerCount\\r\\n        });\\r\\n        //审核通过数\\r\\n        this.mapData.series[1].data.push({\\r\\n          name: mapProvinceName,\\r\\n          value: obj.passTotalCount\\r\\n        });\\r\\n\\r\\n        //客户占比\\r\\n        this.lineData.options[0].series[0].data.push({\\r\\n          name: provinceName,\\r\\n          value: parseFloat(obj.customerRate.split('%')[0])//obj.customerRate\\r\\n        });\\r\\n        //审核通过占比\\r\\n        this.lineData.options[0].series[1].data.push({\\r\\n          name: provinceName,\\r\\n          value: parseFloat(obj.passTotalRate.split('%')[0])//obj.passTotalRate\\r\\n        });\\r\\n        ////console.log('lineData:',this.lineData.options[0].series[0].data);\\r\\n      },\\r\\n      getDevices(){\\r\\n        Common.ajax({\\r\\n          url: '/api/requestParam/device',\\r\\n          type: 'GET',\\r\\n          contentType: 'application/json',\\r\\n          success: (response) => {\\r\\n            if (response.data && response.data.list) {\\r\\n              this.deviceOptions = response.data.list;\\r\\n            }\\r\\n          },\\r\\n          error: (err) => {\\r\\n            this.deviceOptions = [{\\r\\n              value: 'ALL',\\r\\n              name: 'ALL',\\r\\n            }, {\\r\\n              value: 'iPhone',\\r\\n              name: 'IOS',\\r\\n            }, {\\r\\n              value: 'Android',\\r\\n              name: 'Android'\\r\\n            }];\\r\\n          }\\r\\n        });\\r\\n      },\\r\\n\\r\\n      search(){\\r\\n        this.buttonDisabled = true;\\r\\n        this.initSeries();\\r\\n        let self = this;\\r\\n        let date = self.searchParam.date;\\r\\n        Common.ajax({\\r\\n          url: \\\"/api/loan/persona\\\",\\r\\n          type: \\\"POST\\\",\\r\\n          data: {\\r\\n            personaType: 'province',\\r\\n            date: formatDate(date, 'yyyy-MM-dd'),\\r\\n            //endTime: formatDate(dateRange[1], 'yyyy-MM-dd')\\r\\n          },\\r\\n          contentType: \\\"application/json\\\",\\r\\n          success: (response) => {\\r\\n            if (!response.status) {\\r\\n              let list = response.data.list;\\r\\n              let totalCount;\\r\\n\\r\\n              var maxCustomer = 0;\\r\\n              var sumCustomer = 0;\\r\\n              var maxPass = 0;\\r\\n              var sumPass = 0;\\r\\n\\r\\n              list.forEach((obj, index, arr) => {\\r\\n                if (!totalCount) {\\r\\n                  totalCount = obj.totalCount;\\r\\n                  this.mapData.visualMap.max = obj.totalCount;\\r\\n\\r\\n//                  totalCount = obj.customerCount;\\r\\n//                  this.mapData.visualMap.max = obj.customerCount;\\r\\n                }\\r\\n\\r\\n                maxCustomer = Math.max(maxCustomer, obj.customerRate.split('%')[0]);\\r\\n                sumCustomer += parseFloat(obj.customerRate.split('%')[0]);\\r\\n\\r\\n                maxPass = Math.max(maxPass, obj.customerRate.split('%')[0]);\\r\\n                sumPass += parseFloat(obj.passTotalRate.split('%')[0]);\\r\\n\\r\\n                this.setSeries(obj);\\r\\n\\r\\n                ////console.log('max,sum',maxCustomer,sumCustomer);\\r\\n              });\\r\\n\\r\\n              //console.log(this.mapData.series[0].data,this.mapData.series[1].data);\\r\\n              //console.log(maxCustomer,sumCustomer,maxPass,sumPass);\\r\\n              //console.log('xArias',this.lineData.baseOption.xAxis[0].data);\\r\\n\\r\\n              this.lineData.options[0].series[0].data['data_max'] = Math.floor(maxCustomer / 100) * 100;\\r\\n              this.lineData.options[0].series[0].data['data_sum'] = sumCustomer;\\r\\n\\r\\n              this.lineData.options[0].series[1].data['data_max'] = Math.floor(maxPass / 100) * 100;\\r\\n              this.lineData.options[0].series[1].data['data_sum'] = sumPass;\\r\\n\\r\\n\\r\\n              this.lineData.baseOption.yAxis.max = Math.max(maxCustomer,maxPass);\\r\\n              //console.log('max',this.lineData.baseOption.yAxis.max);\\r\\n//              this.$refs.map.hideLoading();\\r\\n//              this.$refs.map.mergeOptions(this.mapData)\\r\\n              //console.log('mapSeries',this.mapData.series);\\r\\n              this.buttonDisabled = false;\\r\\n            }\\r\\n          },\\r\\n          error: () => {\\r\\n            this.buttonDisabled = false;\\r\\n          }\\r\\n        });\\r\\n      },\\r\\n    },\\r\\n    mounted(){\\r\\n//      this.$refs.map.showLoading({\\r\\n//        text: '正在加载',\\r\\n//        color: '#4ea397',\\r\\n//        maskColor: 'rgba(255, 255, 255, 0.4)'\\r\\n//      })\\r\\n      this.getDevices();\\r\\n      this.search();\\r\\n    }\\r\\n  }\\r\\n</script>\\r\\n\\r\\n\"]}]);\n","module.exports = (__webpack_require__(45))(3);"],"sourceRoot":""}