(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{1032:function(e,r,n){"use strict";n.r(r);var t=n(2),o=n(9),s=n(8),a=(n(512),n(3)),i=Object(a.a)({props:["reportPermissionDialogVisible","reportPermissionDialogClosed","roleId","addOrEdit"],data:function(){return{dialogVisible:!1,form:{role:{},permissions:[]},formLabelWidth:"90px",permTree:[{name:"",parentId:"",childPerms:[{name:""}]}],defaultProps:{children:"childTree",label:"name"},expandAll:!0}},mounted:function(){this.getMenu()},methods:{closeDialog:function(){this.$refs.ruleForm.resetFields(),this.form={role:{},permissions:[]},this.$emit("reportPermissionDialogClosed")},getPermissionsByRole:function(e){var r=this;t.a.ajax({url:"/web/v1/permission/getTreeByRole",type:"POST",dataType:"json",contentType:"application/json",data:{roleId:e},success:function(e){r.form.role=e.data?e.data.role:"",r.$refs.tree.setCheckedKeys([]),r.form.permissions=e.data?e.data.permissions:"",r.$refs.tree.setCheckedKeys(r.form.permissions)},error:function(e){r.$message({message:e.message,type:"warning"})}})},getMenu:function(){var e=this;t.a.ajax({url:"/web/v1/permission/getTree",type:"POST",dataType:"json",success:function(r){e.permTree=r.data?r.data.list:""},error:function(r){e.$message({message:r.message,type:"warning"})}})},saveRoleSet:function(e){var r=this,n="web/v1/role/",o=this.$refs.tree.getCheckedKeys(),s={name:this.form.role.name,permissions:o};return this.form.role.name?o?(0==e?("您的编辑将对这个角色下的所有用户生效，是否确认?",n+="edit",s.id=this.roleId):("确认新增该角色?",n+="add"),void this.$confirm("您的编辑将对这个角色下的所有用户生效，是否确认?","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(function(){t.a.ajax({url:n,type:"post",dataType:"json",contentType:"application/json",data:s,success:function(e){r.$alert(e.message,"",{type:"success",confirmButtonText:"知道了",callback:function(){r.closeDialog()}})},error:function(e){r.$message({message:e.message,type:"warning"})}})}).catch(function(){})):(this.$message("请选择权限名称"),!1):(this.$message("请输入角色名称"),!1)}},watch:{reportPermissionDialogVisible:function(e){this.dialogVisible=e,this.roleId&&this.getPermissionsByRole(this.roleId)},addOrEdit:{deep:!0,handler:function(e){1==e.status&&(this.$refs.tree.setCheckedKeys([]),this.form={role:{},permissions:[]})}}}},function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("el-dialog",{attrs:{title:e.addOrEdit.dialogTitle,width:"30%","show-close":!1,"close-on-click-modal":!1},on:{close:e.closeDialog},model:{value:e.dialogVisible,callback:function(r){e.dialogVisible=r},expression:"dialogVisible"}},[n("el-form",{ref:"ruleForm",attrs:{model:e.form}},[n("el-form-item",{attrs:{label:"角色：",prop:"name","label-width":e.formLabelWidth}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.role.name,callback:function(r){e.$set(e.form.role,"name",r)},expression:"form.role.name"}})],1),e._v(" "),n("el-form-item",{staticClass:"report checkbox1",attrs:{label:"报表权限：",prop:"permissions","label-width":e.formLabelWidth}},[n("el-tree",{ref:"tree",staticClass:"self-tree",attrs:{data:e.permTree,"show-checkbox":"","node-key":"id","default-expand-all":e.expandAll,"default-checked-keys":e.form.permissions,props:e.defaultProps}})],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.closeDialog}},[e._v("  取消  ")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(){return e.saveRoleSet(e.addOrEdit.status)}}},[e._v("  "+e._s(e.addOrEdit.dialogBtn)+"  ")])],1)],1)},[],!1,null,"5fc77f80",null).exports,l={components:{DataTable:o.a,TabPage:s.a,ReportPermission:i,Common:t.a},data:function(){return{reportPermissionDialogVisible:!1,roleId:"",addOrEdit:{status:"",dialogTitle:"",dialogBtn:""},dialogBtn:"",dataTable:{pageSize:1e3,pageSizes:[10,20,50,100,1e3],url:"/web/v1/role/list",emptyText:"没有记录"}}},filters:{flagFilter:function(e){return{0:"success",1:"error"}[e]}},mounted:function(){this.$refs.tabPage.$emit("open-tab",{label:"角色管理",name:"roleManage",slotName:"roleManage",closable:!1})},methods:{loadLists:function(){this.$refs.dataTable.$emit("load-data")},openReportPermissionPage:function(e,r){this.reportPermissionDialogVisible=!0,this.roleId=e?e.id:"",this.addOrEdit.status=r,this.addOrEdit.dialogTitle=r?"新建":"编辑",this.addOrEdit.dialogBtn=r?"确定":"保存"},deleteRole:function(e){var r=this;this.$confirm("删除后，该角色下的所有用户将被删除，是否确认?","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(function(){t.a.ajax({url:"/web/v1/role/delete",type:"post",data:{id:e.id},dataType:"json",contentType:"application/json",success:function(){var e=this;r.$alert("删除成功","",{type:"success",confirmButtonText:"知道了",callback:function(){r.$refs.dataTable.$emit("load-data"),r.$refs.history&&e.$refs.history.$emit("load-data")}})},error:function(e){r.$message({message:e.message,type:"warning"})}})}).catch(function(){})},dialogClosed:function(){this.reportPermissionDialogVisible=!1,this.roleId="",this.loadLists()}}},c=(n(514),Object(a.a)(l,function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("tab-page",{ref:"tabPage"},[n("template",{slot:"roleManage"},[n("data-table",{ref:"dataTable",attrs:{"data-table":e.dataTable}},[n("div",{staticStyle:{"margin-bottom":"15px"},attrs:{slot:"conditions"},slot:"conditions"},[n("el-button",{staticClass:"create",attrs:{type:"primary",size:"small"},on:{click:function(){return e.openReportPermissionPage(0,1)}}},[e._v("  新建  ")])],1),e._v(" "),n("template",{slot:"columns"},[n("el-table-column",{attrs:{prop:"name",label:"角色",width:""}}),e._v(" "),n("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(r){return[n("el-tag",{attrs:{type:e._f("flagFilter")(r.row.flag)}},[e._v(e._s(0==r.row.flag?"使用中":"已失效"))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:""},scopedSlots:e._u([{key:"default",fn:function(r){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(){return e.openReportPermissionPage(r.row,0)}}},[e._v("编辑")]),e._v(" "),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(){return e.deleteRole(r.row)}}},[e._v("删除")])]}}])})],1)],2),e._v(" "),n("report-permission",{attrs:{reportPermissionDialogVisible:e.reportPermissionDialogVisible,roleId:e.roleId,addOrEdit:e.addOrEdit},on:{reportPermissionDialogClosed:e.dialogClosed}})],1)],2)},[],!1,null,"7a3726d1",null));r.default=c.exports},156:function(e,r,n){var t=n(513);"string"==typeof t&&(t=[[e.i,t,""]]),t.locals&&(e.exports=t.locals);(0,n(5).default)("4604796f",t,!0,{})},157:function(e,r,n){var t=n(515);"string"==typeof t&&(t=[[e.i,t,""]]),t.locals&&(e.exports=t.locals);(0,n(5).default)("0431344a",t,!0,{})},512:function(e,r,n){"use strict";var t=n(156);n.n(t).a},513:function(e,r,n){(e.exports=n(4)(!0)).push([e.i,"\n.el-dialog .el-dialog__header[data-v-5fc77f80] {\r\n  text-align: center;\n}\n.report .el-form-item__label[data-v-5fc77f80] {\r\n  display: block;\n}\n.checkbox1[data-v-5fc77f80] {\r\n  overflow: hidden;\n}\n.checkbox1 li[data-v-5fc77f80] {\r\n  float: left;\r\n  margin-right: 15px;\r\n  width: 100px;\n}\n.checkbox1 .el-checkbox-group .el-checkbox[data-v-5fc77f80] {\r\n  height: 20px;\r\n  line-height: 20px;\r\n  margin-bottom: 0px;\r\n  display: block;\r\n  border-left: 1px solid #000;\r\n  padding-left: 5px;\n}\n.checkbox1 .el-checkbox-group .firstCheckbox[data-v-5fc77f80] {\r\n  border-left: none;\n}\n.checkbox1 .el-checkbox-group .secondCheckbox[data-v-5fc77f80] {\r\n  margin-left: 12px;\n}\n.checkbox1 .el-checkbox-group .thirdCheckbox[data-v-5fc77f80] {\r\n  margin-left: 24px;\n}\n.btns[data-v-5fc77f80] {\r\n  width: 100%;\r\n  text-align: center;\r\n  margin-top: 20px;\n}\n.btns .el-button[data-v-5fc77f80] {\r\n  padding: 10px 50px;\n}\r\n","",{version:3,sources:["src/views/contents/permission/rolePermissionsDialog.vue"],names:[],mappings:";AAqEA;EACA,kBAAA;AACA;AAEA;EACA,cAAA;AACA;AAEA;EACA,gBAAA;AACA;AAEA;EACA,WAAA;EACA,kBAAA;EACA,YAAA;AACA;AAEA;EACA,YAAA;EACA,iBAAA;EACA,kBAAA;EACA,cAAA;EACA,2BAAA;EACA,iBAAA;AACA;AAEA;EACA,iBAAA;AACA;AAEA;EACA,iBAAA;AACA;AAEA;EACA,iBAAA;AACA;AAEA;EACA,WAAA;EACA,kBAAA;EACA,gBAAA;AACA;AAEA;EACA,kBAAA;AACA",file:"rolePermissionsDialog.vue?vue&type=style&index=0&id=5fc77f80&scoped=true&lang=css&",sourcesContent:['\x3c!--\r\n * @Description: \r\n * @Author: jinxiaojian\r\n * @Email: jinxiaojian@youxin.com\r\n * @Date: 2019-07-12 16:17:33\r\n * @LastEditTime: 2019-07-16 16:57:25\r\n * @LastEditors: 靳肖健\r\n --\x3e\r\n<template>\r\n  <el-dialog\r\n    :title="addOrEdit.dialogTitle"\r\n    v-model="dialogVisible"\r\n    width="30%"\r\n    :show-close="false"\r\n    @close="closeDialog"\r\n    :close-on-click-modal="false"\r\n  >\r\n    <el-form :model="form" ref="ruleForm">\r\n      <el-form-item label="角色：" prop="name" :label-width="formLabelWidth">\r\n        <el-input v-model="form.role.name" auto-complete="off"></el-input>\r\n      </el-form-item>\r\n      <el-form-item\r\n        label="报表权限："\r\n        prop="permissions"\r\n        :label-width="formLabelWidth"\r\n        class="report checkbox1"\r\n      >\r\n        \x3c!--<el-checkbox-group v-model="form.permissions">--\x3e\r\n        \x3c!--<ul>--\x3e\r\n        \x3c!--<li v-for="perms1 in permTree">--\x3e\r\n        \x3c!--<el-checkbox :label="perms1.id" :key="perms1.id" class="firstCheckbox">{{perms1.name}}--\x3e\r\n        \x3c!--</el-checkbox>--\x3e\r\n        \x3c!--<template v-if="perms1.type == \'MENU\'">--\x3e\r\n        \x3c!--<template v-for="perms2 in perms1.childTree">--\x3e\r\n        \x3c!--<el-checkbox :label="perms2.id" :key="perms2.id" class="secondCheckbox">--\x3e\r\n        \x3c!--{{perms2.name}}--\x3e\r\n        \x3c!--</el-checkbox>--\x3e\r\n        \x3c!--<template v-if="perms2.type == \'MENU\'">--\x3e\r\n        \x3c!--<el-checkbox v-for="perms3 in perms2.childPerms" :key="perms3.id" :label="perms3.id"--\x3e\r\n        \x3c!--class="thirdCheckbox">{{perms3.name}}--\x3e\r\n        \x3c!--</el-checkbox>--\x3e\r\n        \x3c!--</template>--\x3e\r\n        \x3c!--</template>--\x3e\r\n        \x3c!--</template>--\x3e\r\n        \x3c!--</li>--\x3e\r\n        \x3c!--</ul>--\x3e\r\n        \x3c!--</el-checkbox-group>--\x3e\r\n        <el-tree\r\n          class="self-tree"\r\n          ref="tree"\r\n          :data="permTree"\r\n          show-checkbox\r\n          node-key="id"\r\n          :default-expand-all="expandAll"\r\n          :default-checked-keys="form.permissions"\r\n          :props="defaultProps"\r\n        ></el-tree>\r\n      </el-form-item>\r\n    </el-form>\r\n    <div slot="footer" class="dialog-footer">\r\n      <el-button @click="closeDialog">&nbsp;&nbsp;取消&nbsp;&nbsp;</el-button>\r\n      <el-button\r\n        type="primary"\r\n        @click="saveRoleSet(addOrEdit.status)"\r\n      >&nbsp;&nbsp;{{addOrEdit.dialogBtn}}&nbsp;&nbsp;</el-button>\r\n    </div>\r\n  </el-dialog>\r\n</template>\r\n<style scoped>\r\n.el-dialog .el-dialog__header {\r\n  text-align: center;\r\n}\r\n\r\n.report .el-form-item__label {\r\n  display: block;\r\n}\r\n\r\n.checkbox1 {\r\n  overflow: hidden;\r\n}\r\n\r\n.checkbox1 li {\r\n  float: left;\r\n  margin-right: 15px;\r\n  width: 100px;\r\n}\r\n\r\n.checkbox1 .el-checkbox-group .el-checkbox {\r\n  height: 20px;\r\n  line-height: 20px;\r\n  margin-bottom: 0px;\r\n  display: block;\r\n  border-left: 1px solid #000;\r\n  padding-left: 5px;\r\n}\r\n\r\n.checkbox1 .el-checkbox-group .firstCheckbox {\r\n  border-left: none;\r\n}\r\n\r\n.checkbox1 .el-checkbox-group .secondCheckbox {\r\n  margin-left: 12px;\r\n}\r\n\r\n.checkbox1 .el-checkbox-group .thirdCheckbox {\r\n  margin-left: 24px;\r\n}\r\n\r\n.btns {\r\n  width: 100%;\r\n  text-align: center;\r\n  margin-top: 20px;\r\n}\r\n\r\n.btns .el-button {\r\n  padding: 10px 50px;\r\n}\r\n</style>\r\n<style>\r\n</style>\r\n<script>\r\nimport Common from "../../../utils/common";\r\nexport default {\r\n  props: [\r\n    "reportPermissionDialogVisible",\r\n    "reportPermissionDialogClosed",\r\n    "roleId",\r\n    "addOrEdit",\r\n  ],\r\n  data() {\r\n    return {\r\n      dialogVisible: false,\r\n      form: {\r\n        role: {},\r\n        permissions: [], //权限\r\n      },\r\n      formLabelWidth: "90px",\r\n      permTree: [\r\n        {\r\n          //权限树\r\n          name: "",\r\n          parentId: "",\r\n          childPerms: [\r\n            {\r\n              name: "",\r\n            },\r\n          ],\r\n        },\r\n      ],\r\n      defaultProps: {\r\n        children: "childTree",\r\n        label: "name",\r\n      },\r\n      expandAll: true,\r\n    };\r\n  },\r\n  mounted() {\r\n    this.getMenu();\r\n  },\r\n  methods: {\r\n    closeDialog() {\r\n      this.$refs["ruleForm"].resetFields();\r\n      this.form = {\r\n        role: {},\r\n        permissions: [], //权限\r\n      };\r\n      this.$emit("reportPermissionDialogClosed");\r\n    },\r\n    getPermissionsByRole(id) {\r\n      Common.ajax({\r\n        url: "/web/v1/permission/getTreeByRole",\r\n        type: "POST",\r\n        dataType: "json",\r\n        contentType: "application/json",\r\n        data: {\r\n          roleId: id,\r\n        },\r\n        success: response => {\r\n          this.form.role = response.data ? response.data.role : "";\r\n          this.$refs.tree.setCheckedKeys([]);\r\n          this.form.permissions = response.data\r\n            ? response.data.permissions\r\n            : "";\r\n          this.$refs.tree.setCheckedKeys(this.form.permissions);\r\n        },\r\n        error: response => {\r\n          this.$message({\r\n            message: response.message,\r\n            type: "warning",\r\n          });\r\n        },\r\n      });\r\n    },\r\n\r\n    getMenu() {\r\n      Common.ajax({\r\n        url: "/web/v1/permission/getTree",\r\n        type: "POST",\r\n        dataType: "json",\r\n        success: response => {\r\n          this.permTree = response.data ? response.data.list : "";\r\n        },\r\n        error: response => {\r\n          this.$message({\r\n            message: response.message,\r\n            type: "warning",\r\n          });\r\n        },\r\n      });\r\n    },\r\n    saveRoleSet(flag) {\r\n      let self = this;\r\n      let confirmTips = "";\r\n      let url = "web/v1/role/";\r\n      let checkPers = this.$refs.tree.getCheckedKeys();\r\n      let params = {\r\n        name: this.form.role.name,\r\n        permissions: checkPers,\r\n      };\r\n      if (!this.form.role.name) {\r\n        this.$message("请输入角色名称");\r\n        return false;\r\n      }\r\n      if (!checkPers) {\r\n        this.$message("请选择权限名称");\r\n        return false;\r\n      }\r\n      if (flag == 0) {\r\n        //编辑\r\n        confirmTips = "您的编辑将对这个角色下的所有用户生效，是否确认?";\r\n        url += "edit";\r\n        params.id = this.roleId;\r\n      } else {\r\n        confirmTips = "确认新增该角色?";\r\n        url += "add";\r\n      }\r\n      this.$confirm("您的编辑将对这个角色下的所有用户生效，是否确认?", "提示", {\r\n        confirmButtonText: "确认",\r\n        cancelButtonText: "取消",\r\n        type: "warning",\r\n      })\r\n        .then(() => {\r\n          Common.ajax({\r\n            url: url,\r\n            type: "post",\r\n            dataType: "json",\r\n            contentType: "application/json",\r\n            data: params,\r\n            success(response) {\r\n              self.$alert(response.message, "", {\r\n                type: "success",\r\n                confirmButtonText: "知道了",\r\n                callback: action => {\r\n                  self.closeDialog();\r\n                },\r\n              });\r\n            },\r\n            error(response) {\r\n              self.$message({\r\n                message: response.message,\r\n                type: "warning",\r\n              });\r\n            },\r\n          });\r\n        })\r\n        .catch(() => {});\r\n    },\r\n  },\r\n  watch: {\r\n    reportPermissionDialogVisible(val) {\r\n      this.dialogVisible = val;\r\n      if (this.roleId) {\r\n        this.getPermissionsByRole(this.roleId);\r\n      }\r\n    },\r\n    addOrEdit: {\r\n      deep: true,\r\n      handler: function(val, oldVal) {\r\n        if (val.status == 1) {\r\n          this.$refs.tree.setCheckedKeys([]);\r\n          this.form = {\r\n            role: {},\r\n            permissions: [], //权限\r\n          };\r\n        }\r\n      },\r\n    },\r\n  },\r\n};\r\n<\/script>\r\n']}])},514:function(e,r,n){"use strict";var t=n(157);n.n(t).a},515:function(e,r,n){(e.exports=n(4)(!0)).push([e.i,"\n.el-table th > .cell[data-v-7a3726d1] {\r\n  text-align: center;\n}\n.create[data-v-7a3726d1] {\r\n  float: right;\r\n  margin-bottom: 20px;\n}\n.mb-10[data-v-7a3726d1] {\r\n  margin-bottom: 10px;\n}\r\n","",{version:3,sources:["src/views/contents/permission/roleManage.vue"],names:[],mappings:";AA6CA;EACA,kBAAA;AACA;AAEA;EACA,YAAA;EACA,mBAAA;AACA;AAEA;EACA,mBAAA;AACA",file:"roleManage.vue?vue&type=style&index=0&id=7a3726d1&scoped=true&lang=css&",sourcesContent:["\x3c!--\r\n * @Description: \r\n * @Author: jinxiaojian\r\n * @Email: jinxiaojian@youxin.com\r\n * @Date: 2019-07-12 16:17:33\r\n * @LastEditTime: 2019-07-17 19:42:02\r\n * @LastEditors: 王娇(wangjiao)\r\n --\x3e\r\n<template>\r\n  <tab-page ref=\"tabPage\">\r\n    <template slot=\"roleManage\">\r\n      <data-table :data-table=\"dataTable\" ref=\"dataTable\">\r\n        <div slot=\"conditions\" style=\"margin-bottom:15px\">\r\n          <el-button\r\n            type=\"primary\"\r\n            size=\"small\"\r\n            class=\"create\"\r\n            @click=\"openReportPermissionPage(0,1)\"\r\n          >&nbsp;&nbsp;新建&nbsp;&nbsp;</el-button>\r\n        </div>\r\n        <template slot=\"columns\">\r\n          <el-table-column prop=\"name\" label=\"角色\" width></el-table-column>\r\n          <el-table-column label=\"状态\">\r\n            <template slot-scope=\"scope\">\r\n              <el-tag :type=\"scope.row.flag | flagFilter\">{{scope.row.flag == 0?'使用中':'已失效'}}</el-tag>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"操作\" width>\r\n            <template slot-scope=\"scope\">\r\n              <el-button type=\"text\" size=\"small\" @click=\"openReportPermissionPage(scope.row,0)\">编辑</el-button>\r\n              <el-button type=\"text\" size=\"small\" @click=\"deleteRole(scope.row)\">删除</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </template>\r\n      </data-table>\r\n      <report-permission\r\n        :reportPermissionDialogVisible=\"reportPermissionDialogVisible\"\r\n        v-on:reportPermissionDialogClosed=\"dialogClosed\"\r\n        :roleId=\"roleId\"\r\n        :addOrEdit=\"addOrEdit\"\r\n      ></report-permission>\r\n    </template>\r\n  </tab-page>\r\n</template>\r\n<style scoped>\r\n.el-table th > .cell {\r\n  text-align: center;\r\n}\r\n\r\n.create {\r\n  float: right;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.mb-10 {\r\n  margin-bottom: 10px;\r\n}\r\n</style>\r\n<script>\r\nimport Common from '../../../utils/common';\r\nimport DataTable from '../../../components/DataTable';\r\nimport TabPage from '../../../components/TabPage';\r\nimport ReportPermission from '../permission/rolePermissionsDialog.vue';\r\nexport default {\r\n  components: {\r\n    DataTable,\r\n    TabPage,\r\n    ReportPermission,\r\n    Common\r\n  },\r\n  data() {\r\n    return {\r\n      reportPermissionDialogVisible: false,\r\n      roleId: '',\r\n      addOrEdit: {\r\n        status: '',\r\n        dialogTitle: '',\r\n        dialogBtn: ''\r\n      },\r\n      dialogBtn: '',\r\n      dataTable: {\r\n        pageSize: 1000,\r\n        pageSizes: [10, 20, 50, 100, 1000],\r\n        url: '/web/v1/role/list',\r\n        emptyText: '没有记录'\r\n      }\r\n    };\r\n  },\r\n  filters: {\r\n    flagFilter(item) {\r\n      const itemsMap = {\r\n        0: 'success',\r\n        1: 'error'\r\n      };\r\n      return itemsMap[item];\r\n    }\r\n  },\r\n  mounted() {\r\n    var defaultPage = {\r\n      label: '角色管理',\r\n      name: 'roleManage',\r\n      slotName: 'roleManage',\r\n      closable: false\r\n    };\r\n    this.$refs.tabPage.$emit('open-tab', defaultPage);\r\n  },\r\n  methods: {\r\n    loadLists() {\r\n      this.$refs.dataTable.$emit('load-data');\r\n    },\r\n    openReportPermissionPage(obj, flag) {\r\n      this.reportPermissionDialogVisible = true;\r\n      this.roleId = obj ? obj.id : '';\r\n      this.addOrEdit.status = flag;\r\n      this.addOrEdit.dialogTitle = flag ? '新建' : '编辑';\r\n      this.addOrEdit.dialogBtn = flag ? '确定' : '保存';\r\n    },\r\n    deleteRole(obj) {\r\n      let self = this;\r\n      this.$confirm('删除后，该角色下的所有用户将被删除，是否确认?', '提示', {\r\n        confirmButtonText: '确认',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      })\r\n        .then(() => {\r\n          Common.ajax({\r\n            url: '/web/v1/role/delete',\r\n            type: 'post',\r\n            data: {\r\n              id: obj.id\r\n            },\r\n            dataType: 'json',\r\n            contentType: 'application/json',\r\n            success(response) {\r\n              self.$alert('删除成功', '', {\r\n                type: 'success',\r\n                confirmButtonText: '知道了',\r\n                callback: action => {\r\n                  self.$refs.dataTable.$emit('load-data');\r\n                  self.$refs.history && this.$refs.history.$emit('load-data');\r\n                }\r\n              });\r\n            },\r\n            error(response) {\r\n              self.$message({\r\n                message: response.message,\r\n                type: 'warning'\r\n              });\r\n            }\r\n          });\r\n        })\r\n        .catch(() => {});\r\n    },\r\n    dialogClosed() {\r\n      this.reportPermissionDialogVisible = false;\r\n      this.roleId = '';\r\n      this.loadLists();\r\n    }\r\n  }\r\n};\r\n<\/script>\r\n"]}])}}]);
//# sourceMappingURL=61.b3c9766c5472ecf455ea.js.map