{"version":3,"sources":["webpack:///src/views/contents/risk/customerMonitoring.vue","webpack:///./src/data/customerLine.js","webpack:///./src/views/contents/risk/customerMonitoring.vue","webpack:///./src/views/contents/risk/customerMonitoring.vue?2a87","webpack:///./src/views/contents/risk/customerMonitoring.vue?8f9b","webpack:///./src/utils/common.js","webpack:///delegated ../node_modules/_babel-runtime@6.26.0@babel-runtime/helpers/typeof.js from dll-reference vendor_b35904a9f84fabbc839d","webpack:///./src/views/contents/risk/customerMonitoring.vue?f240","webpack:///./src/views/contents/risk/customerMonitoring.vue?b146"],"names":["Math","abs","h","backgroundColor","title","text","tooltip","trigger","axisPointer","type","label","legend","top","data","toolbox","right","feature","magicType","dataView","restore","show","saveAsImage","pixelRatio","grid","left","bottom","containLabel","xAxis","boundaryGap","yAxis","dataZoom","height","xAxisIndex","start","end","handleSize","yAxisIndex","filterMode","width","showDataShadow","series","x","Object","f","a","props","components","e","Date","t","setDate","getDate","closable","line","deviceOptions","value","name","customTypes","paramCategory","attributes","hashes","searchParam","customType","category","attribute","device","dateRange","date","startMonth","endMonth","startWeek","endWeek","seriesStep","weeks","months","activeName","showDetail","isFullScreen","clearable","startWeekClearabe","endWeekClearabe","chartType","weekOptions","firstDayOfWeek","lineGroup","showPercent","noPercentOptions","percentSeriesArr","percentLineOptions","computed","methods","formatDate","getFullYear","getMonth","r","getHours","getDevices","this","s","ajax","url","contentType","success","list","error","getCustomerTypes","length","customerTypes","push","getAttributes","page","pageSize","dataType","forEach","hash","uuid","message","n","Notification","getYear","month2","year2","parseInt","getPreMonthDay","i","o","l","c","getPreDay","calcAddDate","_year2","_month2","_day2","calcReduceDate","clearLine","axisLabel","formatter","setTitle","some","formaterWeek","getWeekNumber","formateMonth","setOptions","map","formatSeriesAndLegend","normal","areaStyle","Array","fill","extractPercentSeriesArr","xIndex","total","formatHashxAxisData","formatSeriesxAxisData","setPercentOptions","u","indexOf","toFixed","test","prototype","toString","call","color","seriesName","search","d","m","p","y","A","g","$message","startDate","endDate","$refs","showLoading","maskColor","hideLoading","status","categories","dates","handleClick","index","handleCategoryChange","console","dir","handleAttributeChange","switchPercent","created","mounted","css","resize","beforeDestroy","watch","setCurrentValue","$createElement","_self","_c","on","tab-click","model","callback","expression","attrs","staticClass","staticStyle","slot","placeholder","change","$set","_l","key","_v","directives","rawName","ref","picker-options","format","min","max","icon","click","options","theme","auto-resize","description","show-icon","exports","locals","default","Common","api","auth","_timestamp","_authTokenObj","getOldToken","_authToken","uploadFiles","$","headers","Authorization","Timestamp","traditional","async","processData","response","alert","location","XMLHttpRequest","complete","timeout","Error","arr","obj","resultQuery","hasOwnProperty","jQuery","version","sources","names","mappings","file","sourcesContent"],"mappings":"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","file":"dist/js/63.6a4a1aaf57bd34e7e0e8.js","sourcesContent":["<!--\r\n * @Description: \r\n * @Author: jinxiaojian\r\n * @Email: jinxiaojian@youxin.com\r\n * @Date: 2019-07-12 16:17:33\r\n * @LastEditTime: 2019-07-16 14:29:24\r\n * @LastEditors: 靳肖健\r\n -->\r\n<template>\r\n    <el-tabs v-model=\"activeName\" @tab-click=\"handleClick\">\r\n        <el-tab-pane label=\"客群监控\" name=\"first\">\r\n            <div class=\"p_6\">\r\n                <div class=\"search-wrapper\">\r\n                    <div class=\"search-content\">\r\n                        <el-select v-model=\"searchParam.category\"\r\n                                   @change=\"handleCategoryChange\"\r\n                                   slot=\"prepend\"\r\n                                   placeholder=\"查询类别\"\r\n                                   style=\"width: 100px;\">\r\n                            <el-option\r\n                                v-for=\"item in paramCategory\"\r\n                                :key=\"item.value\"\r\n                                :label=\"item.name\"\r\n                                :value=\"item.value\">\r\n                            </el-option>\r\n                        </el-select>\r\n                        <el-date-picker\r\n                            v-show=\"searchParam.category === 1\"\r\n                            v-model=\"searchParam.dateRange\"\r\n                            type=\"daterange\"\r\n                            placeholder=\"选择日期范围\">\r\n                        </el-date-picker>\r\n                        <el-date-picker\r\n                            ref=\"startWeek\"\r\n                            v-show=\"searchParam.category === 2\"\r\n                            v-model=\"searchParam.startWeek\"\r\n                            :picker-options=\"weekOptions\"\r\n                            :clearable=\"startWeekClearabe\"\r\n                            type=\"week\"\r\n                            format=\"yyyy 第 WW 周\"\r\n                            placeholder=\"选择开始周\">\r\n                        </el-date-picker>\r\n                        <el-date-picker\r\n                            ref=\"endWeek\"\r\n                            v-show=\"searchParam.category === 2\"\r\n                            v-model=\"searchParam.endWeek\"\r\n                            :picker-options=\"weekOptions\"\r\n                            :clearable=\"endWeekClearabe\"\r\n                            type=\"week\"\r\n                            format=\"yyyy 第 WW 周\"\r\n                            placeholder=\"选择结束周\">\r\n                        </el-date-picker>\r\n                        <el-date-picker\r\n                            ref=\"startMonth\"\r\n                            v-show=\"searchParam.category === 3\"\r\n                            v-model=\"searchParam.startMonth\"\r\n                            type=\"month\"\r\n                            placeholder=\"选择月\">\r\n                        </el-date-picker>\r\n                        <el-date-picker\r\n                            ref=\"endMonth\"\r\n                            v-show=\"searchParam.category === 3\"\r\n                            v-model=\"searchParam.endMonth\"\r\n                            type=\"month\"\r\n                            placeholder=\"选择月\">\r\n                        </el-date-picker>\r\n                        <el-date-picker\r\n                            v-show=\"searchParam.category === 4||searchParam.category === 5\"\r\n                            v-model=\"searchParam.date\"\r\n                            type=\"date\"\r\n                            placeholder=\"选择日期\">\r\n                        </el-date-picker>\r\n                        <div v-show=\"searchParam.category === 4\" class=\"input-weeks\">\r\n                            <el-input-number ref=\"weeks\"\r\n                                             v-model=\"weeks\"\r\n                                             :min=\"1\" :max=\"100\"\r\n                                             style=\"width: 120px;\"></el-input-number>\r\n                        </div>\r\n                        <!--<div v-if=\"searchParam.category === 5\"-->\r\n                        <!--style=\"display: inline-block;position: relative;vertical-align:middle;\">同期前-->\r\n                        <!--</div>-->\r\n                        <div v-show=\"searchParam.category === 5\" class=\"input-months\">\r\n                            <!--style=\"display: inline-block;position: relative;vertical-align:middle;\">-->\r\n                            <el-input-number ref=\"months\"\r\n                                             v-model=\"months\"\r\n                                             :min=\"1\" :max=\"100\"\r\n                                             style=\"width: 120px;\"></el-input-number>\r\n                        </div>\r\n                        <!--<div v-if=\"searchParam.category === 5\"-->\r\n                        <!--style=\"display: inline-block;position: relative;vertical-align:middle;\">月-->\r\n                        <!--</div>-->\r\n\r\n                        <!--<el-form-item label=\"手机设备\">-->\r\n                        <!--<el-select v-model=\"searchParam.device\" slot=\"prepend\" placeholder=\"手机设备\" style=\"width: 100px;\">-->\r\n                        <!--<el-option-->\r\n                        <!--v-for=\"item in deviceOptions\"-->\r\n                        <!--:key=\"item.value\"-->\r\n                        <!--:label=\"item.name\"-->\r\n                        <!--:value=\"item.value\">-->\r\n                        <!--</el-option>-->\r\n                        <!--</el-select>-->\r\n                        <!--</el-form-item>-->\r\n                        <el-select v-model=\"searchParam.customType\" slot=\"prepend\" placeholder=\"请选择客群\"\r\n                                   style=\"width: 130px;\">\r\n                            <el-option\r\n                                v-for=\"item in customTypes\"\r\n                                :key=\"item.value\"\r\n                                :label=\"item.name\"\r\n                                :value=\"item.value\">\r\n                            </el-option>\r\n                        </el-select>\r\n                        <el-select v-model=\"searchParam.attribute\"\r\n                                   :clearable=\"clearable\"\r\n                                   @change=\"handleAttributeChange\"\r\n                                   slot=\"prepend\"\r\n                                   placeholder=\"请选择属性\"\r\n                                   style=\"width: 260px;\">\r\n                            <el-option\r\n                                v-for=\"item in attributes\"\r\n                                :key=\"item.uuid\"\r\n                                :label=\"item.name\"\r\n                                :value=\"item.uuid\">\r\n                            </el-option>\r\n                        </el-select>\r\n                        <!--<el-input v-show=\"chartType =='series'\"-->\r\n                        <!--placeholder=\"\"-->\r\n                        <!--style=\"width:120px;\"-->\r\n                        <!--v-model=\"searchParam.seriesStep\">-->\r\n                        <!--<template slot=\"prepend\">步长</template>-->\r\n                        <!--</el-input>-->\r\n                    </div>\r\n                    <div class=\"search-btn\">\r\n                        <el-button slot=\"append\" icon=\"search\" @click=\"search\" style=\"width:80px; \">查询</el-button>\r\n                    </div>\r\n                </div>\r\n                <hr>\r\n                <div class=\"mrg-tb-10\" v-show=\"chartType=='hash'\">\r\n                    <span slot=\"prepend\">百分比模式</span>\r\n                    <el-switch\r\n                        v-model=\"showPercent\"\r\n                        @change=\"switchPercent\">\r\n                    </el-switch>\r\n                </div>\r\n                <chart :options=\"line\" ref=\"line\" theme=\"ovilia-green\" auto-resize class=\"chartClass\"></chart>\r\n                <el-alert\r\n                    title=\"\"\r\n                    type=\"info\"\r\n                    description=\"提示：图表下方和右侧灰色区域两头可拖动控制相应联动区域的缩小和放大，方便数据查看，光标在图表区域内鼠标滑轮滑动亦可以！\"\r\n                    show-icon :closable=\"closable\">\r\n                </el-alert>\r\n                <el-alert\r\n                    title=\"\"\r\n                    description=\"警告：图表右上角工具条数据视图点开情况下，请勿点击查询按钮，如点击查询再点击数据视图内刷新后会与前一查询结果重合且图表类型变化，可点击工具条还原按钮还原！\"\r\n                    show-icon type=\"warning\" :closable=\"closable\">\r\n                </el-alert>\r\n            </div>\r\n        </el-tab-pane>\r\n    </el-tabs>\r\n</template>\r\n\r\n<style scoped>\r\n    .el-select .el-input {\r\n        width: 200px;\r\n    }\r\n\r\n    .pagination_position {\r\n        padding-top: 20px;\r\n    }\r\n\r\n    .search-wrapper {\r\n        margin: 0px auto 10px;\r\n    }\r\n\r\n    .chart-wrapper {\r\n        display: -webkit-flex; /* Safari */\r\n        display: flex;\r\n        display: -ms-flex;\r\n\r\n        /*flex主轴方向和主轴溢出排版方式的简写*/\r\n        -webkit-flex-flow: row wrap;\r\n        flex-flow: row wrap;\r\n        -ms-flex-flow: row wrap;\r\n\r\n        /*内容在主轴上的对齐方式*/\r\n        -webkit-justify-content: space-between;\r\n        justify-content: space-between;\r\n        -ms-justify-content: space-between;\r\n\r\n        /*内容项目在交叉轴上的对齐方式*/\r\n        -webkit-align-items: stretch;\r\n        align-items: stretch;\r\n        -ms-align-items: stretch;\r\n\r\n        /*多轴的时候轴线的对齐方式*/\r\n        -webkit-align-content: stretch;\r\n        align-content: stretch;\r\n        -ms-align-content: stretch;\r\n    }\r\n\r\n    .echarts {\r\n        width: 100%;\r\n        /*min-height: 400px;*/\r\n        /*height: 100%;*/\r\n        /*height: calc(100% - 100px);*/\r\n        /*!*Firefox*!*/\r\n        /*height: -moz-calc(100% - 100px);*/\r\n        /*!*chrome safari*!*/\r\n        /*height: -webkit-calc(100% - 100px);*/\r\n    }\r\n\r\n    .right {\r\n        float: right;\r\n    }\r\n\r\n    .input-weeks::before {\r\n        position: absolute;\r\n        margin-top: 10px;\r\n        margin-left: -40px;\r\n        display: inline-block;\r\n        content: '同期前';\r\n        vertical-align: middle;\r\n    }\r\n\r\n    .input-weeks {\r\n        margin-left: 40px;\r\n        margin-right: 20px;\r\n        display: inline-block;\r\n        position: relative;\r\n        vertical-align: middle;\r\n    }\r\n\r\n    .input-weeks::after {\r\n        position: absolute;\r\n        margin-top: 10px;\r\n        margin-left: 5px;\r\n        margin-right: -20px;\r\n        display: inline-block;\r\n        content: '周';\r\n        vertical-align: middle;\r\n    }\r\n\r\n    .input-months::before {\r\n        position: absolute;\r\n        margin-top: 10px;\r\n        margin-left: -40px;\r\n        display: inline-block;\r\n        content: '同期前';\r\n        vertical-align: middle;\r\n    }\r\n\r\n    .input-months {\r\n        margin-left: 40px;\r\n        margin-right: 20px;\r\n        display: inline-block;\r\n        position: relative;\r\n        vertical-align: middle;\r\n    }\r\n\r\n    .input-months::after {\r\n        position: absolute;\r\n        margin-top: 10px;\r\n        margin-left: 5px;\r\n        margin-right: -20px;\r\n        display: inline-block;\r\n        content: '月';\r\n        vertical-align: middle;\r\n    }\r\n\r\n    .mrg-tb-10 {\r\n        margin: 10px 0 10px;\r\n    }\r\n\r\n    .warning {\r\n        color: #F7BA2A;\r\n    }\r\n</style>\r\n\r\n<script>\r\n    import Common from '../../../utils/common'\r\n    import auth from '../../../utils/authenticate'\r\n    import {Notification} from 'element-ui'\r\n\r\n    // import {getWeekNumber, formatDate} from '../../../../node_modules/element-ui/packages/date-picker/src/util/index'\r\n\r\n    //引入Echats图表组件\r\n    //  import VueECharts from 'vue-echarts/components/ECharts.vue'\r\n\r\n    import 'echarts/lib/component/grid'\r\n    import 'echarts/lib/component/toolbox'\r\n    import 'echarts/lib/component/tooltip'\r\n    import 'echarts/lib/component/legend'\r\n\r\n    // built-in theme\r\n    import 'echarts/theme/dark'\r\n    import customerLineData from '../../../data/customerLine'\r\n\r\n    import $ from 'jquery'\r\n    import deepcopy from \"deepcopy\"\r\n    //  import Vue from 'vue'\r\n\r\n    export default {\r\n\r\n        props: [],\r\n        components: {},\r\n        data(){\r\n            let date = new Date();\r\n            let prevMonth = new Date(date.setDate(date.getDate() - 7));\r\n            let now = new Date();\r\n            let currentWeekNumber = new Date();\r\n\r\n            return {\r\n                closable: false,\r\n                line: customerLineData,\r\n                deviceOptions: [\r\n                    {\r\n                        value: 'ALL',\r\n                        name: 'ALL',\r\n                    },\r\n                    {\r\n                        value: 'iPhone',\r\n                        name: 'iOS',\r\n                    },\r\n                    {\r\n                        value: 'Android',\r\n                        name: 'Android'\r\n                    }],\r\n                customTypes: [\r\n                    {\r\n                        name: '进件客群',\r\n                        value: 0,\r\n                    },\r\n                    {\r\n                        name: '通过审核客群',\r\n                        value: 1,\r\n                    }\r\n                ],\r\n                paramCategory: [\r\n                    {\r\n                        name: '按天',\r\n                        value: 1\r\n                    },\r\n                    {\r\n                        name: '按周',\r\n                        value: 2\r\n                    },\r\n                    {\r\n                        name: '按月',\r\n                        value: 3\r\n                    },\r\n                    {\r\n                        name: '周同期',\r\n                        value: 4\r\n                    },\r\n                    {\r\n                        name: '月同期',\r\n                        value: 5\r\n                    },\r\n                ],\r\n                attributes: [],\r\n                hashes: [1],\r\n                searchParam: {\r\n                    customType: 0,\r\n                    category: 1,\r\n                    attribute: \"\",\r\n                    device: \"ALL\",\r\n                    dateRange: [prevMonth, now],\r\n                    date: now,\r\n                    startMonth: '',\r\n                    endMonth: '',\r\n                    startWeek: '',//new Date(this.getDate(currentWeekNumber,-49)),\r\n                    endWeek: '',//currentWeekNumber,\r\n                    seriesStep: '',\r\n//                  weeks:4,\r\n//                  months:4,\r\n                },\r\n                weeks: 4,\r\n                months: 4,\r\n                activeName: 'first',\r\n                showDetail: false,\r\n                name: 'detail',\r\n                isFullScreen: false,\r\n                clearable: false,\r\n                startWeekClearabe: true,\r\n                endWeekClearabe: true,\r\n                chartType: \"hash\",\r\n                weekOptions: {\r\n                    firstDayOfWeek: 7,\r\n                },\r\n                lineGroup: {},\r\n                showPercent: false,//切换百分比模式\r\n                noPercentOptions: {},\r\n                percentSeriesArr: [],\r\n                percentLineOptions: {},\r\n            }\r\n        },\r\n        computed: {},\r\n        methods: {\r\n               formatDate(date) {\r\n      if (typeof date == \"number\" || typeof date == \"string\") {\r\n        date = new Date(date);\r\n      }\r\n      var _year = date.getFullYear();\r\n      var _month = date.getMonth();\r\n      var _day = date.getDate();\r\n      var _hour = date.getHours();\r\n      _day = _day < 10 ? \"0\" + _day : _day;\r\n      _month = _month < 9 ? \"0\" + (_month + 1) : _month + 1;\r\n      return `${_year}/${_month}/${_day} ${_hour}`;\r\n    },\r\n            getDevices(){\r\n                Common.ajax({\r\n                    url: '/web/requestParam/device',\r\n                    type: 'GET',\r\n                    contentType: 'application/json',\r\n                    success: (response) => {\r\n                        if (response.data && response.data.list) {\r\n                            this.deviceOptions = response.data.list;\r\n                        }\r\n                    },\r\n                    error: (err) => {\r\n                        this.deviceOptions = [{\r\n                            value: 'ALL',\r\n                            name: 'ALL',\r\n                        }, {\r\n                            value: 'iPhone',\r\n                            name: 'IOS',\r\n                        }, {\r\n                            value: 'Android',\r\n                            name: 'Android'\r\n                        }];\r\n                    }\r\n                });\r\n            },\r\n\r\n            getCustomerTypes(){\r\n                Common.ajax({\r\n                    url: 'web/requestParam/customerTypes',\r\n                    type: 'GET',\r\n                    contentType: \"application/json\",\r\n                    data: {},\r\n                    success: (response) => {\r\n                        if (response.data && response.data.list) {\r\n                            let customerTypes = response.data.list;\r\n                            let len = customerTypes.length;\r\n                            this.customerTypes = [];\r\n                            for (var i = 0; i < len; i++) {\r\n                                this.customTypes.push(customerTypes[i]);\r\n                            }\r\n                        }\r\n                    },\r\n                    error(err){\r\n                        /*            let error = err.message || err;\r\n                         Notification.error({\r\n                         title: '错误',\r\n                         message: error\r\n                         });*/\r\n                    }\r\n                });\r\n            },\r\n            getAttributes(){\r\n                Common.ajax({\r\n                    url: '/web/v1/attribute',\r\n                    type: 'GET',\r\n                    contentType: 'application/json',\r\n                    data: {\r\n                    \tpage:1,\r\n                        pageSize:1000\r\n                    },\r\n                    dataType:'json',\r\n                    success: (response) => {\r\n                        if (response.data && response.data.list) {\r\n                            this.hashes = [];\r\n                            this.attributes = response.data.list;\r\n                            this.attributes.forEach((item, index, arr) => {\r\n                                if (item.hash) {\r\n                                    this.hashes.push(item.uuid);\r\n                                }\r\n                            });\r\n                        }\r\n                    },\r\n                    error: (err) => {\r\n                        let error = err.message || err;\r\n                        Notification.error({\r\n                            title: '接口错误',\r\n                            message: error\r\n                        });\r\n                    }\r\n                });\r\n            },\r\n\r\n            getYear(year, month){\r\n                if (month2 <= 0) {\r\n                    year2 = year2 - parseInt(parseInt(month2 / 12) == 0 ? 1 : parseInt(month2 / 12));\r\n                } else {\r\n\r\n                }\r\n            },\r\n\r\n            getPreMonthDay: function (date, monthNum) {\r\n                var year = date.getFullYear(); //获取当前日期的年份\r\n                var month = date.getMonth(); //获取当前日期的月份\r\n                var day = date.getDate(); //获取当前日期的日\r\n\r\n                var year2 = year;\r\n                var month2 = month + 1 - monthNum;\r\n                if (month2 <= 0) {\r\n                    year2 = year2 - parseInt(parseInt(Math.abs(month2) / 12) == 0 ? 1 : parseInt(Math.abs(month2) / 12));\r\n                    month2 = 12 - (Math.abs(month2) % 12);\r\n                }\r\n                var day2 = day;\r\n                var days2 = new Date(year2, month2, 0);\r\n                days2 = days2.getDate();\r\n                if (day2 > days2) {\r\n                    day2 = days2;\r\n                }\r\n                if (day2 < 10) {\r\n                    day2 = '0' + day2;\r\n                }\r\n                if (month2 < 10) {\r\n                    month2 = '0' + month2;\r\n                }\r\n                var t2 = year2 + '-' + month2 + '-' + day2;\r\n                return t2;\r\n            },\r\n\r\n            getPreDay: function (date, num) {\r\n                if (!num)return;\r\n                var _year = date.getFullYear();\r\n                var _month = date.getMonth();\r\n                var _day = date.getDate();\r\n\r\n                var _year2 = _year;\r\n                var _month2 = _month + 1;\r\n                var _day2 = _day - num;\r\n                if (_day2 <= 0) {\r\n                    _month2 = _month2 - 1;\r\n                    if (_month2 <= 0) {\r\n                        _year2 = _year - 1;\r\n                        _month2 = 12 - (Math.abs(_month2) % 12);\r\n                    }\r\n                    _day2 = (new Date(_year2, _month2, 0)).getDate();\r\n                }\r\n\r\n                _day2 = _day2 < 10 ? '0' + _day2 : _day2;\r\n                _month2 = _month2 < 10 ? '0' + _month2 : _month2;\r\n\r\n                return `${_year2}-${_month2}-${_day2}`;\r\n\r\n            },\r\n\r\n            /**\r\n             * 计算加多少天\r\n             */\r\n            calcAddDate(year, month, day, days){\r\n                let _year2 = year;\r\n                let _month2 = month;\r\n                let _day2 = day;\r\n                let _days = days;\r\n                let obj = {};\r\n                if (_day2 > _days) {\r\n                    _day2 = _day2 - _days;\r\n                    _month2 = Math.abs(_month2 + 1) % 12;\r\n                    _year2 = _month2 === 1 ? _year2 + 1 : _year2;\r\n                    _days = (new Date(_year2, _month2, 0)).getDate();\r\n                    if (_days > _day2) {\r\n                        obj = {\r\n                            _year2: _year2,\r\n                            _month2: _month2,\r\n                            _day2: _day2,\r\n                        };\r\n                    } else {\r\n                        obj = this.calcAddDate(_year2, _month2, _day2, _days);\r\n                    }\r\n                } else {\r\n                    obj = {\r\n                        _year2: _year2,\r\n                        _month2: _month2,\r\n                        _day2: _day2,\r\n                    }\r\n                }\r\n                ;\r\n                return obj;\r\n            },\r\n\r\n            /**\r\n             * 计算减去多少天\r\n             */\r\n            calcReduceDate(year, month, day){\r\n                let _year2 = year;\r\n                let _month2 = month;\r\n                let _day2 = day;\r\n                let _days;\r\n                let obj = {};\r\n\r\n                if (_day2 <= 0) {\r\n                    _month2 = _month2 - 1;\r\n                    if (_month2 <= 0) {\r\n                        _year2 = _year2 - 1;\r\n                        _month2 = 12 - (Math.abs(_month2) % 12);\r\n                    }\r\n                    _days = (new Date(_year2, _month2, 0)).getDate();\r\n                    _day2 = _days + _day2;\r\n                    if (_day2 > 0) {\r\n                        obj = {\r\n                            _year2: _year2,\r\n                            _month2: _month2,\r\n                            _day2: _day2,\r\n                        };\r\n                    } else {\r\n                        obj = this.calcReduceDate(_year2, _month2, _day2);\r\n                    }\r\n                } else {\r\n                    obj = {\r\n                        _year2: _year2,\r\n                        _month2: _month2,\r\n                        _day2: _day2,\r\n                    }\r\n                }\r\n                return obj;\r\n            },\r\n\r\n            /**\r\n             *\r\n             */\r\n            getDate(date, day, format){\r\n                var _year = date.getFullYear();\r\n                var _month = date.getMonth();\r\n                var _day = date.getDate();\r\n\r\n                var _year2 = _year;\r\n                var _month2 = _month + 1;\r\n                var _day2 = _day + day;\r\n\r\n                var _days;\r\n                var _cDate;\r\n                if (day > 0) {\r\n                    _days = (new Date(_year2, _month2, 0)).getDate();\r\n                    _cDate = this.calcAddDate(_year2, _month2, _day2, _days);\r\n                    _year2 = _cDate._year2;\r\n                    _month2 = _cDate._month2;\r\n                    _day2 = _cDate._day2;\r\n                } else {\r\n                    _cDate = this.calcReduceDate(_year2, _month2, _day2, _days);\r\n                    _year2 = _cDate._year2;\r\n                    _month2 = _cDate._month2;\r\n                    _day2 = _cDate._day2;\r\n                }\r\n\r\n                _day2 = _day2 < 10 ? '0' + _day2 : _day2;\r\n                _month2 = _month2 < 10 ? '0' + _month2 : _month2;\r\n\r\n                return `${_year2}-${_month2}-${_day2}`;\r\n\r\n            },\r\n\r\n            clearLine(){\r\n                this.line.legend.data = [];\r\n                this.line.xAxis && (this.line.xAxis[0].data = []);\r\n                this.line.series = [];\r\n                this.showPercent = false;\r\n                this.line.yAxis[0].axisLabel = {\r\n                    formatter: '{value}'\r\n                };\r\n                //格式化tooltip的坐标轴指示器显示数值\r\n                this.line.tooltip.formatter = null;\r\n                this.line.tooltip.axisPointer.label = {formatter: \"{value}\"};\r\n            },\r\n\r\n            /**\r\n             * 根据查询客群类别和属性更新图表title\r\n             * @param customerType 客群类别\r\n             * @param attribute 客群属性\r\n             */\r\n            setTitle(customerType, attribute) {\r\n                //获取类型name\r\n                let customerTypeName = '';\r\n                this.customerTypes.some((item, index, arr) => {\r\n                    let rv = false;\r\n                    if (item.value == customerType) {\r\n                        customerTypeName = item.name;\r\n                        rv = true;\r\n                    }\r\n                    return rv\r\n                });\r\n\r\n                //获取属性name\r\n                let attributeName = '';\r\n                this.attributes.some((item, index, arr) => {\r\n                    let rv = false;\r\n                    if (item.value == attribute) {\r\n                        attributeName = item.name;\r\n                        rv = true;\r\n                    }\r\n                    return rv\r\n                });\r\n                this.line.title.text = customerTypeName + '-' + attributeName;\r\n            },\r\n\r\n            /**\r\n             *  自定义格式化周显示\r\n             */\r\n            formaterWeek(date){\r\n                let _date = this.getDate(new Date(date), 1);\r\n                let _datetime = new Date(_date);\r\n                let _week = getWeekNumber(_datetime);\r\n                return `${_date} 第${_week}周`;\r\n            },\r\n            /**\r\n             * 自定义格式化月显示\r\n             */\r\n            formateMonth(date){\r\n                return this.formatDate(date, 'yyyy-MM');\r\n            },\r\n            /**\r\n             * 配置chart图表数据\r\n             * @param categorys\r\n             * @param xAxisData\r\n             */\r\n            setOptions(categorys, xAxisData, type){\r\n                let len = xAxisData.length;\r\n                this.line.xAxis[0].data = xAxisData;\r\n                if (type) {\r\n                    categorys.map((item, index, arr) => {\r\n                        arr[index] = this.formatSeriesAndLegend(type, item);\r\n                    });\r\n                }\r\n                this.line.legend.data = categorys;\r\n\r\n                for (var i = 0; i < categorys.length; i++) {\r\n                    //标记series的索引对应的category\r\n                    this.lineGroup[categorys[i]] = i;\r\n                    this.line.series.push({\r\n                        name: categorys[i],//this.formatSeriesAndLegend(type,categorys[i]),\r\n                        type: 'line',\r\n                        label: {\r\n                            normal: {\r\n                                show: true,\r\n                            }\r\n                        },\r\n                        areaStyle: {normal: {}},\r\n                        data: Array(len).fill(0),\r\n//               data:Array.apply(null, Array(len)).map(() => 0)\r\n                    });\r\n                }\r\n                this.percentSeriesArr = Array(len).fill(\"\");\r\n            },\r\n\r\n            /**\r\n             * 提取数据为百分比需求数据，便于后续转化为百分比格式处理\r\n             * @param dataIdx\r\n             * @param item\r\n             */\r\n            extractPercentSeriesArr: function (dataIdx, item) {\r\n                !this.percentSeriesArr[dataIdx] && (this.percentSeriesArr[dataIdx] = {});\r\n                this.percentSeriesArr[dataIdx][item.category] = item.value;\r\n                let num = Number(item.value);\r\n                num = !!num ? num : 0;\r\n//      //console.log('number-------',this.percentSeriesArr,item,num);\r\n                this.percentSeriesArr[dataIdx].xIndex = dataIdx;\r\n                if (this.percentSeriesArr[dataIdx].total) {\r\n                    this.percentSeriesArr[dataIdx].total += num;\r\n                } else {\r\n                    this.percentSeriesArr[dataIdx].total = num;\r\n                }\r\n            },\r\n\r\n            /**\r\n             *\r\n             */\r\n            formatSeriesAndLegend(type, date){\r\n                let returnValue;\r\n                returnValue = type === 2 ? this.formaterWeek(date) : type === 3 ? this.formateMonth(date) : date;\r\n                return returnValue;\r\n            },\r\n            /**\r\n             *  格式散列图表周和月的xAxisData\r\n             */\r\n            formatHashxAxisData(type){\r\n                if (type === 2) {//格式化周数据\r\n                    this.line.xAxis[0].data.map((item, index, arr) => {\r\n                        arr[index] = this.formaterWeek(item);\r\n                    });\r\n                } else if (type === 3) {//格式化月数据\r\n                    this.line.xAxis[0].data.map((item, index, arr) => {\r\n                        arr[index] = this.formateMonth(item);\r\n                    });\r\n                }\r\n            },\r\n            /**\r\n             * 已取消使用\r\n             */\r\n            formatSeriesxAxisData(type){\r\n                //console.log('formatSeriesxAxisData', this.line);\r\n                if (type === 2) {//格式化周数据\r\n                    this.line.legend.data.map((item, index, arr) => {\r\n                        arr[index] = this.formaterWeek(item);\r\n                    });\r\n                    this.line.series.map((item, index, arr) => {\r\n                        arr[index].name = this.formaterWeek(item.name);\r\n                    });\r\n\r\n                } else if (type === 3) {//格式化月数据\r\n                    this.line.legend.data.map((item, index, arr) => {\r\n                        arr[index] = this.formateMonth(item);\r\n                    });\r\n                    this.line.series.map((item, index, arr) => {\r\n                        arr[index].name = this.formateMonth(item.name);\r\n                    });\r\n                }\r\n            },\r\n            /**\r\n             * 设置百分比图表options数据\r\n             */\r\n            setPercentOptions: function () {\r\n                this.percentLineOptions = deepcopy(this.line);\r\n                //格式化数据计算转换为百分比数据值\r\n                this.percentSeriesArr.forEach((item, index, arr) => {\r\n                    for (var key in item) {\r\n                        if (['xIndex', 'legendIndex', 'total'].indexOf(key) === -1) {\r\n                            let legendIndex = this.line.legend.data.indexOf(key);\r\n                            let pct = (item[key] / item.total).toFixed(4) * 100;\r\n                            pct = /^(\\+)?\\d+$/.test(pct) ? pct : pct.toFixed(2);\r\n                            this.percentLineOptions.series[legendIndex].data[item.xIndex] = pct;\r\n                            this.percentLineOptions.series[legendIndex].label.normal.formatter = \"{c}%\";\r\n                        }\r\n                    }\r\n                });\r\n                //格式化提示工具条内数据\r\n                this.percentLineOptions.tooltip.formatter = function (params, ticket, callback) {\r\n                    if (Object.prototype.toString.call(params) == '[object Array]') {\r\n                        let len = params.length;\r\n                        let retValue = params[0].name;\r\n                        for (var i = 0; i < len; i++) {\r\n                            retValue += '<br><span style=\"display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:' + params[i].color + '\"></span>' + params[i].seriesName + ' : ' + params[i].value + \"% \"\r\n                        }\r\n                        return retValue;\r\n                    }\r\n                };\r\n                //格式化y轴纵坐标刻度值\r\n                this.percentLineOptions.yAxis[0].axisLabel = {\r\n                    formatter: '{value} %'\r\n                };\r\n                //格式化tooltip的坐标轴指示器显示数值\r\n                this.percentLineOptions.tooltip.axisPointer.label = {\r\n//        \tformatter:\"{value}%\"\r\n                    formatter: function (params) {\r\n                        if (typeof params.value === 'number') {\r\n                            return params.value.toFixed(2) + '%';\r\n                        } else {\r\n                            return `${params.value}`;\r\n                        }\r\n                    }\r\n                };\r\n            }, /**\r\n             * 查询\r\n             */\r\n            search(){\r\n                let {customType, category, attribute, dateRange, startWeek, endWeek, startMonth, endMonth, date} = this.searchParam;\r\n                let weeks = this.weeks;\r\n                let months = this.months;\r\n                let startWeekDate;\r\n                let startMonthDate;\r\n\r\n                let queryData = {};\r\n\r\n                if (!attribute) {\r\n                    this.$message('属性不能为空！');\r\n                    return;\r\n                }\r\n\r\n                switch (category) {\r\n                    case 1:\r\n                        if (!dateRange[0]) {\r\n                            this.$message('时间范围不能为空！');\r\n                            return;\r\n                        }\r\n                        queryData = {\r\n                            category: category,\r\n                            customType: customType,\r\n                            attribute: attribute,\r\n                            startDate: this.formatDate(dateRange[0], 'yyyy-MM-dd'),\r\n                            endDate: this.formatDate(dateRange[1], 'yyyy-MM-dd'),\r\n                        };\r\n                        //console.log(queryData);\r\n                        break;\r\n                    case 2:\r\n                        if (!startWeek) {\r\n                            this.$message('开始周不能为空！');\r\n                            return;\r\n                        }\r\n                        if (!endWeek) {\r\n                            this.$message('结束周不能为空！');\r\n                            return;\r\n                        }\r\n\r\n                        queryData = {\r\n                            category: category,\r\n                            customType: customType,\r\n                            attribute: attribute,\r\n                            startDate: this.getPreDay(startWeek, 1),\r\n                            endDate: this.getPreDay(endWeek, 1),\r\n//              startWeekNumber:getWeekNumber(startWeek),\r\n//              endWeekNumber:getWeekNumber(startWeek),\r\n                        };\r\n                        //console.log(queryData);\r\n                        break;\r\n                    case 3:\r\n                        if (!startMonth) {\r\n                            this.$message('开始月份不能为空！');\r\n                            return;\r\n                        }\r\n                        if (!endMonth) {\r\n                            this.$message('结束月份不能为空！');\r\n                            return;\r\n                        }\r\n                        //console.log(this.formatDate(startMonth, 'yyyy-MM-dd'));\r\n                        //console.log(this.formatDate(endMonth, 'yyyy-MM-dd'));\r\n                        queryData = {\r\n                            category: category,\r\n                            customType: customType,\r\n                            attribute: attribute,\r\n                            startDate: this.formatDate(startMonth, 'yyyy-MM-dd'),\r\n                            endDate: this.formatDate(endMonth, 'yyyy-MM-dd'),\r\n                        };\r\n                        //console.log(queryData);\r\n                        break;\r\n                    case 4:\r\n                        if (!date) {\r\n                            this.$message('比较基础日期不能为空！');\r\n                            return;\r\n                        }\r\n                        if (!weeks) {\r\n                            this.$message('请选择往前同期的周数！');\r\n                            return;\r\n                        }\r\n                        //console.log('周同期', date, -weeks * 7);\r\n                        startWeekDate = this.getDate(date, -weeks * 7);\r\n                        queryData = {\r\n                            category: category,\r\n                            customType: customType,\r\n                            attribute: attribute,\r\n                            startDate: startWeekDate,\r\n                            endDate: this.formatDate(date, 'yyyy-MM-dd'),\r\n                        };\r\n                        //console.log(queryData);\r\n                        break;\r\n                    case 5:\r\n                        if (!date) {\r\n                            this.$message('比较基础日期不能为空！');\r\n                            return;\r\n                        }\r\n                        if (!months) {\r\n                            this.$message('请选择往前同期的月数！');\r\n                            return;\r\n                        }\r\n                        //console.log('月同期', date, months);\r\n                        startMonthDate = this.getPreMonthDay(date, months);\r\n                        queryData = {\r\n                            category: category,\r\n                            customType: customType,\r\n                            attribute: attribute,\r\n                            startDate: startMonthDate,\r\n                            endDate: this.formatDate(date, 'yyyy-MM-dd'),\r\n                        };\r\n                        //console.log(queryData);\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n                //根据查询客群类别和属性更新图表title\r\n                //this.setTitle(customerType, attribute);\r\n\r\n//                if(this.chartType =='series'){\r\n//                    if(seriesStep){\r\n//                    queryData.step = seriesStep;\r\n//                  }else{\r\n//                    this.$message('请设定统计的划分刻度值！');\r\n//                    return;\r\n//                  }\r\n//                }\r\n\r\n                this.$refs.line.showLoading({\r\n                    text: '正在加载',\r\n                    color: '#4ea397',\r\n                    maskColor: 'rgba(255, 255, 255, 0.4)'\r\n                });\r\n\r\n                Common.ajax({\r\n                    url: \"/web/v1/statistic/query\",\r\n                    type: 'post',\r\n                    contentType: \"application/json\",\r\n                    data: queryData,\r\n                    success: (response) => {\r\n                        this.$refs.line.hideLoading();\r\n                        let resData;\r\n                        this.clearLine();\r\n                        if (response.data && response.data.list) {\r\n                            resData = response.data;\r\n                            if (!response.status) {\r\n                                if (this.chartType == 'hash') {\r\n                                    this.setOptions(resData.categories, resData.dates);\r\n                                    resData.list.forEach((item, index, arr) => {\r\n                                        let idx = this.lineGroup[item.category];\r\n                                        let dataIdx = this.line.xAxis[0].data.indexOf(item.date);\r\n                                        this.line.series[idx].data[dataIdx] = item.value;\r\n//                                      //console.log('idx:',idx,'dataIdx:',dataIdx,item.value,this.percentSeriesArr);\r\n                                        //保存为切换百分比模式处理数据\r\n                                        this.extractPercentSeriesArr(dataIdx, item);\r\n//                                      //console.log('this.percentSeriesArr',this.percentSeriesArr);\r\n                                    });\r\n\r\n                                    //格式化周和月的横坐标显示\r\n                                    this.formatHashxAxisData(category);\r\n\r\n                                    //设置百分比模式的配置options\r\n                                    this.setPercentOptions();\r\n\r\n                                } else {\r\n                                    this.setOptions(resData.dates, resData.categories, category);\r\n                                    resData.list.forEach((item, index, arr) => {\r\n                                        let idx = this.lineGroup[this.formatSeriesAndLegend(category, item.date)];\r\n                                        let dataIdx = this.line.xAxis[0].data.indexOf(item.category);\r\n                                        this.line.series[idx].data[dataIdx] = item.value;\r\n                                    });\r\n                                    //this.formatSeriesxAxisData(category);\r\n                                }\r\n                            }\r\n                        }\r\n                    },\r\n                    error: (err) => {\r\n                        this.$refs.line.hideLoading();\r\n                        let error = err.message || err;\r\n                        Notification.error({\r\n                            title: '错误',\r\n                            message: error\r\n                        });\r\n                    },\r\n                });\r\n            },\r\n            handleClick(tab, event) {\r\n                let index = tab.index;\r\n                if (index == 0) {\r\n                    this.activeName = 'first';\r\n                }\r\n            },\r\n            handleCategoryChange(value){\r\n                console.dir(this.searchParam);\r\n            },\r\n            handleAttributeChange(value){\r\n\r\n                //根据属性更换对应图形类型\r\n                if (this.hashes.indexOf(value) >= 0) {\r\n                    this.chartType = 'hash';\r\n                } else {\r\n                    this.chartType = 'series';\r\n                }\r\n                //console.log('attribute:', value, this.hashes, this.chartType);\r\n                this.showPercent = false;\r\n            },\r\n            switchPercent(value){\r\n              if(!this.percentLineOptions.series){\r\n                this.$message('请重新查询后再切换百分比模式！');\r\n                this.clearLine();\r\n              \treturn;\r\n\r\n              }\r\n            \tif(!this.line.series.length) return;\r\n                if (value) {\r\n                    this.noPercentOptions = deepcopy(this.line);\r\n                    this.line = this.percentLineOptions;\r\n                } else {\r\n                    this.line = this.noPercentOptions;\r\n                }\r\n            },\r\n        },\r\n        created(){\r\n\r\n        },\r\n        mounted(){\r\n            let cvHeight = $('.contents').height() - 180;\r\n            $('.chartClass').css('height', cvHeight)//.find('canvas').css('height',cvHeight).parent('div').css('height',cvHeight);\r\n            //调用echarts实例resize函数\r\n            this.$refs.line.resize();\r\n\r\n            let line = this.$refs.line;\r\n            line.showLoading({\r\n                text: '正在加载',\r\n                color: '#4ea397',\r\n                maskColor: 'rgba(255, 255, 255, 0.4)'\r\n            });\r\n//            this.getCustomerTypes();\r\n//          this.getDevices();\r\n            this.getAttributes();\r\n            //this.search();\r\n            line.hideLoading();\r\n        },\r\n        beforeDestroy(){\r\n        \tthis.clearLine();\r\n        },\r\n        watch: {\r\n            weeks: function (value, oldValue) {\r\n                function isInteger(obj) {\r\n                    return parseInt(obj, 10) === obj\r\n                }\r\n\r\n                if (!isInteger(value)) {\r\n                    this.$refs.weeks.setCurrentValue(parseInt(value, 10));\r\n                }\r\n            },\r\n            months: function (value, oldValue) {\r\n                function isInteger(obj) {\r\n                    return parseInt(obj, 10) === obj\r\n                }\r\n\r\n                if (!isInteger(value)) {\r\n                    this.$refs.months.setCurrentValue(parseInt(value, 10));\r\n                }\r\n\r\n            }\r\n        },\r\n    }\r\n</script>\r\n","/**\r\n * Created by 焦丙乾(jiaobingqian) on 2017/5/8.\r\n */\r\nexport  default {\r\n  backgroundColor: \"#f3f3f3\",\r\n  title: {\r\n    text: '客群属性监控图'\r\n  },\r\n  tooltip: {\r\n    trigger: 'axis',\r\n    axisPointer: {\r\n      type: 'cross',\r\n      label: {\r\n        backgroundColor: '#6a7985'\r\n      }\r\n    },\r\n  },\r\n  legend: {\r\n    // align:'left',\r\n    top: '30',\r\n    // data:['通过审核客群','进件客群']\r\n    data: []\r\n  },\r\n  toolbox: {\r\n    right: 20,\r\n    feature: {\r\n      magicType: {\r\n        type: ['line', 'bar', 'stack', 'tiled']\r\n      },\r\n      dataView: {\r\n      },\r\n      restore: {\r\n        show: true\r\n      },\r\n      saveAsImage: {\r\n        pixelRatio: 2\r\n      }\r\n    }\r\n  },\r\n  grid: {\r\n    left: '2%',\r\n    right: '4%',\r\n    bottom: '50',\r\n    top: '85',\r\n    containLabel: true\r\n  },\r\n  \r\n  xAxis: [\r\n    {\r\n      type: 'category',\r\n      boundaryGap: false,\r\n      data: []\r\n    }\r\n  ],\r\n  yAxis: [\r\n    {\r\n      type: 'value'\r\n    }\r\n  ],\r\n  dataZoom: [\r\n    {\r\n      show: true,\r\n      height: 30,\r\n      xAxisIndex: [\r\n        0\r\n      ],\r\n      bottom: 10,\r\n      start: 0,\r\n      end: 100,\r\n      handleSize: '110%',\r\n      // handleIcon: 'M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4v1.3h1.3v-1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z',\r\n       // handleIcon: 'path://M306.1,413c0,2.2-1.8,4-4,4h-59.8c-2.2,0-4-1.8-4-4V200.8c0-2.2,1.8-4,4-4h59.8c2.2,0,4,1.8,4,4V413z',\r\n      // handleStyle:{\r\n      //   color:\"#d3dee5\",\r\n      //\r\n      // },\r\n      // textStyle:{\r\n      //   color:\"#fff\"\r\n      // },\r\n      // borderColor:\"#90979c\"\r\n    },\r\n    {\r\n      type: \"inside\",\r\n      show: true,\r\n      height: 15,\r\n      start: 1,\r\n      end: 35\r\n    },\r\n    {\r\n      type: 'slider',\r\n      show: true,\r\n      yAxisIndex: 0,\r\n      filterMode: 'empty',\r\n      width: 15,\r\n      height: '60%',\r\n      handleSize: 10,\r\n      // handleIcon: 'path://M306.1,413c0,2.2-1.8,4-4,4h-59.8c-2.2,0-4-1.8-4-4V200.8c0-2.2,1.8-4,4-4h59.8c2.2,0,4,1.8,4,4V413z',\r\n      showDataShadow: false,\r\n      left: '97%'\r\n    }\r\n  ],\r\n  series: [\r\n    // {\r\n    //   name: '男',\r\n    //   type: 'line',\r\n    //   // stack: '总量',\r\n    //   label: {\r\n    //     normal: {\r\n    //       show: true,\r\n    //     }\r\n    //   },\r\n    //   areaStyle: {normal: {}},\r\n    //   data: [120, 132, 1101, 134, 90, 230, 210]\r\n    // },\r\n    // {\r\n    //   name: '女',\r\n    //   type: 'line',\r\n    //   // stack: '总量',\r\n    //   label: {\r\n    //     normal: {\r\n    //       show: true,\r\n    //       position: 'top'\r\n    //     }\r\n    //   },\r\n    //   areaStyle: {normal: {}},\r\n    //   data: [820, 932, 901, 934, 1290, 1330, 1320]\r\n    // }\r\n  ]\r\n}\r\n","import { render, staticRenderFns } from \"./customerMonitoring.vue?vue&type=template&id=08c01ff2&scoped=true&\"\nimport script from \"./customerMonitoring.vue?vue&type=script&lang=js&\"\nexport * from \"./customerMonitoring.vue?vue&type=script&lang=js&\"\nimport style0 from \"./customerMonitoring.vue?vue&type=style&index=0&id=08c01ff2&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"08c01ff2\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-tabs',{on:{\"tab-click\":_vm.handleClick},model:{value:(_vm.activeName),callback:function ($$v) {_vm.activeName=$$v},expression:\"activeName\"}},[_c('el-tab-pane',{attrs:{\"label\":\"客群监控\",\"name\":\"first\"}},[_c('div',{staticClass:\"p_6\"},[_c('div',{staticClass:\"search-wrapper\"},[_c('div',{staticClass:\"search-content\"},[_c('el-select',{staticStyle:{\"width\":\"100px\"},attrs:{\"slot\":\"prepend\",\"placeholder\":\"查询类别\"},on:{\"change\":_vm.handleCategoryChange},slot:\"prepend\",model:{value:(_vm.searchParam.category),callback:function ($$v) {_vm.$set(_vm.searchParam, \"category\", $$v)},expression:\"searchParam.category\"}},_vm._l((_vm.paramCategory),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.name,\"value\":item.value}})}),1),_vm._v(\" \"),_c('el-date-picker',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.searchParam.category === 1),expression:\"searchParam.category === 1\"}],attrs:{\"type\":\"daterange\",\"placeholder\":\"选择日期范围\"},model:{value:(_vm.searchParam.dateRange),callback:function ($$v) {_vm.$set(_vm.searchParam, \"dateRange\", $$v)},expression:\"searchParam.dateRange\"}}),_vm._v(\" \"),_c('el-date-picker',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.searchParam.category === 2),expression:\"searchParam.category === 2\"}],ref:\"startWeek\",attrs:{\"picker-options\":_vm.weekOptions,\"clearable\":_vm.startWeekClearabe,\"type\":\"week\",\"format\":\"yyyy 第 WW 周\",\"placeholder\":\"选择开始周\"},model:{value:(_vm.searchParam.startWeek),callback:function ($$v) {_vm.$set(_vm.searchParam, \"startWeek\", $$v)},expression:\"searchParam.startWeek\"}}),_vm._v(\" \"),_c('el-date-picker',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.searchParam.category === 2),expression:\"searchParam.category === 2\"}],ref:\"endWeek\",attrs:{\"picker-options\":_vm.weekOptions,\"clearable\":_vm.endWeekClearabe,\"type\":\"week\",\"format\":\"yyyy 第 WW 周\",\"placeholder\":\"选择结束周\"},model:{value:(_vm.searchParam.endWeek),callback:function ($$v) {_vm.$set(_vm.searchParam, \"endWeek\", $$v)},expression:\"searchParam.endWeek\"}}),_vm._v(\" \"),_c('el-date-picker',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.searchParam.category === 3),expression:\"searchParam.category === 3\"}],ref:\"startMonth\",attrs:{\"type\":\"month\",\"placeholder\":\"选择月\"},model:{value:(_vm.searchParam.startMonth),callback:function ($$v) {_vm.$set(_vm.searchParam, \"startMonth\", $$v)},expression:\"searchParam.startMonth\"}}),_vm._v(\" \"),_c('el-date-picker',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.searchParam.category === 3),expression:\"searchParam.category === 3\"}],ref:\"endMonth\",attrs:{\"type\":\"month\",\"placeholder\":\"选择月\"},model:{value:(_vm.searchParam.endMonth),callback:function ($$v) {_vm.$set(_vm.searchParam, \"endMonth\", $$v)},expression:\"searchParam.endMonth\"}}),_vm._v(\" \"),_c('el-date-picker',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.searchParam.category === 4||_vm.searchParam.category === 5),expression:\"searchParam.category === 4||searchParam.category === 5\"}],attrs:{\"type\":\"date\",\"placeholder\":\"选择日期\"},model:{value:(_vm.searchParam.date),callback:function ($$v) {_vm.$set(_vm.searchParam, \"date\", $$v)},expression:\"searchParam.date\"}}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.searchParam.category === 4),expression:\"searchParam.category === 4\"}],staticClass:\"input-weeks\"},[_c('el-input-number',{ref:\"weeks\",staticStyle:{\"width\":\"120px\"},attrs:{\"min\":1,\"max\":100},model:{value:(_vm.weeks),callback:function ($$v) {_vm.weeks=$$v},expression:\"weeks\"}})],1),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.searchParam.category === 5),expression:\"searchParam.category === 5\"}],staticClass:\"input-months\"},[_c('el-input-number',{ref:\"months\",staticStyle:{\"width\":\"120px\"},attrs:{\"min\":1,\"max\":100},model:{value:(_vm.months),callback:function ($$v) {_vm.months=$$v},expression:\"months\"}})],1),_vm._v(\" \"),_c('el-select',{staticStyle:{\"width\":\"130px\"},attrs:{\"slot\":\"prepend\",\"placeholder\":\"请选择客群\"},slot:\"prepend\",model:{value:(_vm.searchParam.customType),callback:function ($$v) {_vm.$set(_vm.searchParam, \"customType\", $$v)},expression:\"searchParam.customType\"}},_vm._l((_vm.customTypes),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.name,\"value\":item.value}})}),1),_vm._v(\" \"),_c('el-select',{staticStyle:{\"width\":\"260px\"},attrs:{\"slot\":\"prepend\",\"clearable\":_vm.clearable,\"placeholder\":\"请选择属性\"},on:{\"change\":_vm.handleAttributeChange},slot:\"prepend\",model:{value:(_vm.searchParam.attribute),callback:function ($$v) {_vm.$set(_vm.searchParam, \"attribute\", $$v)},expression:\"searchParam.attribute\"}},_vm._l((_vm.attributes),function(item){return _c('el-option',{key:item.uuid,attrs:{\"label\":item.name,\"value\":item.uuid}})}),1)],1),_vm._v(\" \"),_c('div',{staticClass:\"search-btn\"},[_c('el-button',{staticStyle:{\"width\":\"80px\"},attrs:{\"slot\":\"append\",\"icon\":\"search\"},on:{\"click\":_vm.search},slot:\"append\"},[_vm._v(\"查询\")])],1)]),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.chartType=='hash'),expression:\"chartType=='hash'\"}],staticClass:\"mrg-tb-10\"},[_c('span',{attrs:{\"slot\":\"prepend\"},slot:\"prepend\"},[_vm._v(\"百分比模式\")]),_vm._v(\" \"),_c('el-switch',{on:{\"change\":_vm.switchPercent},model:{value:(_vm.showPercent),callback:function ($$v) {_vm.showPercent=$$v},expression:\"showPercent\"}})],1),_vm._v(\" \"),_c('chart',{ref:\"line\",staticClass:\"chartClass\",attrs:{\"options\":_vm.line,\"theme\":\"ovilia-green\",\"auto-resize\":\"\"}}),_vm._v(\" \"),_c('el-alert',{attrs:{\"title\":\"\",\"type\":\"info\",\"description\":\"提示：图表下方和右侧灰色区域两头可拖动控制相应联动区域的缩小和放大，方便数据查看，光标在图表区域内鼠标滑轮滑动亦可以！\",\"show-icon\":\"\",\"closable\":_vm.closable}}),_vm._v(\" \"),_c('el-alert',{attrs:{\"title\":\"\",\"description\":\"警告：图表右上角工具条数据视图点开情况下，请勿点击查询按钮，如点击查询再点击数据视图内刷新后会与前一查询结果重合且图表类型变化，可点击工具条还原按钮还原！\",\"show-icon\":\"\",\"type\":\"warning\",\"closable\":_vm.closable}})],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/_css-loader@3.1.0@css-loader/dist/cjs.js?sourceMap!../../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/index.js??vue-loader-options!./customerMonitoring.vue?vue&type=style&index=0&id=08c01ff2&scoped=true&lang=css&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/_vue-style-loader@4.1.2@vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"5db178a9\", content, true, {});","/**\r\n * Created by 焦丙乾(jiaobingqian) on 17/3/3.\r\n */\r\nimport jQuery from 'jquery'\r\nimport auth from './authenticate'\r\n\r\nconst Common = (function(api,$){\r\n    api.title=\"好分期报表系统\";\r\n    api.ajax = function(options){\r\n        api.token = auth.getToken();\r\n        //var url = '/api' + options.url;\r\n        var url = options.url;\r\n        var _authToken;\r\n        var _timestamp = +new Date();\r\n        if(url.indexOf(\"api/\")>=0){\r\n            var _authTokenObj = auth.getOldToken();\r\n            _timestamp = _authTokenObj.timestamp;\r\n            _authToken = _authTokenObj.token;\r\n            \r\n        }else{\r\n            _authToken = api.token;\r\n        }\r\n        if(!options.uploadFiles){\r\n          if(options.type){\r\n            if(options.type.toLowerCase() =='get'){\r\n              if( typeof options.data === 'object' ){\r\n                // url += api.formatQuery(options.data);\r\n                // options.data = {};\r\n              }\r\n            }else{\r\n              if( typeof options.data === 'object' ) options.data = JSON.stringify(options.data);\r\n            }\r\n          }else{\r\n            if( typeof options.data === 'object' ) options.data = JSON.stringify(options.data);\r\n          }\r\n        }\r\n        \r\n        // if(options.type && options.type.toUpperCase() =='POST'){\r\n        //   if( typeof options.data === 'object' ) options.data = JSON.stringify(options.data);\r\n        // }else{\r\n        //   //url += api.formatQuery(options.data);\r\n        //   //options.data = {};\r\n        // }\r\n      \r\n        $.ajax({\r\n            headers:{\r\n                'Authorization':_authToken,\r\n                'Timestamp':_timestamp,\r\n            },\r\n            url: url,\r\n            type: options.type || \"GET\",\r\n            traditional: true,\r\n            data: options.data || {},\r\n            async: options.async || true,\r\n            processData: (options.processData === undefined ? true : options.processData),\r\n            contentType: (options.contentType === undefined ? $.ajaxSettings.contentType : options.contentType),\r\n            dataType: options.dataType || 'json',\r\n            success: function (response) {\r\n                if (response.status && response.status !== '0') {\r\n                    if (response.status == -1) {\r\n                      // 登陆失效\r\n                      alert(`警告: ${response.message}`);\r\n                      auth.setAsLoggedOut();\r\n                      location.href = '/#/login';\r\n                    } else if (options.error) {\r\n                      options.error(response);\r\n                    } else {\r\n                      alert(`警告: ${response.message}\\n错误：${response.status}`);\r\n                    }\r\n                    return;\r\n                }\r\n                \r\n                options.success && options.success(response);\r\n\r\n            },\r\n            error: function (XMLHttpRequest, textStatus, errorThrown) {\r\n                if (options.error) {\r\n                    if(XMLHttpRequest.response) {\r\n                        options.error(XMLHttpRequest.response);\r\n                    }\r\n                    else{\r\n                        options.error({\r\n                            message: '请求失败'\r\n                        });\r\n                    }\r\n                } else {\r\n                }\r\n            },\r\n            complete: options.complete || undefined,\r\n            timeout:options.timeout||null\r\n        });\r\n    };\r\n    api.hasDuplicate= function(obj,arr){\r\n        if(Object.prototype.toString.call(arr) !== \"[object Array]\"){\r\n            throw new Error('invalid argument');\r\n        }\r\n        for(let i=0,l=arr.length;i<l;i++){\r\n            if(obj == arr[i]){\r\n                return true;\r\n            }\r\n        }\r\n        return false\r\n    };\r\n    api.formatQuery = function(param){\r\n      if(Object.prototype.toString.call(param) !== \"[object Object]\"){\r\n        throw new Error('invalid argument');\r\n      }\r\n      let searchParam = param;\r\n      let resultQuery = '?';//session=' + api.session;\r\n      for(var i in searchParam){\r\n        if (searchParam.hasOwnProperty(i)) { //filter,只输出man的私有属性\r\n          resultQuery+= i+'='+searchParam[i]+'&';\r\n        }\r\n      }\r\n      \r\n      return resultQuery;\r\n    };\r\n\r\n    return api;\r\n})(Common||{}, jQuery);\r\n\r\nexport default Common;\r\n\r\n","module.exports = (__webpack_require__(45))(3);","import mod from \"-!../../../../node_modules/_extract-text-webpack-plugin@4.0.0-beta.0@extract-text-webpack-plugin/dist/loader.js??ref--4-0!../../../../node_modules/_vue-style-loader@4.1.2@vue-style-loader/index.js!../../../../node_modules/_css-loader@3.1.0@css-loader/dist/cjs.js?sourceMap!../../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/index.js??vue-loader-options!./customerMonitoring.vue?vue&type=style&index=0&id=08c01ff2&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/_extract-text-webpack-plugin@4.0.0-beta.0@extract-text-webpack-plugin/dist/loader.js??ref--4-0!../../../../node_modules/_vue-style-loader@4.1.2@vue-style-loader/index.js!../../../../node_modules/_css-loader@3.1.0@css-loader/dist/cjs.js?sourceMap!../../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/index.js??vue-loader-options!./customerMonitoring.vue?vue&type=style&index=0&id=08c01ff2&scoped=true&lang=css&\"","exports = module.exports = require(\"../../../../node_modules/_css-loader@3.1.0@css-loader/dist/runtime/api.js\")(true);\n// Module\nexports.push([module.id, \"\\n.el-select .el-input[data-v-08c01ff2] {\\n    width: 200px;\\n}\\n.pagination_position[data-v-08c01ff2] {\\n    padding-top: 20px;\\n}\\n.search-wrapper[data-v-08c01ff2] {\\n    margin: 0px auto 10px;\\n}\\n.chart-wrapper[data-v-08c01ff2] {\\n    display: -webkit-flex; /* Safari */\\n    display: flex;\\n    display: -ms-flex;\\n\\n    /*flex主轴方向和主轴溢出排版方式的简写*/\\n    -webkit-flex-flow: row wrap;\\n    flex-flow: row wrap;\\n    -ms-flex-flow: row wrap;\\n\\n    /*内容在主轴上的对齐方式*/\\n    -webkit-justify-content: space-between;\\n    justify-content: space-between;\\n    -ms-justify-content: space-between;\\n\\n    /*内容项目在交叉轴上的对齐方式*/\\n    -webkit-align-items: stretch;\\n    align-items: stretch;\\n    -ms-align-items: stretch;\\n\\n    /*多轴的时候轴线的对齐方式*/\\n    -webkit-align-content: stretch;\\n    align-content: stretch;\\n    -ms-align-content: stretch;\\n}\\n.echarts[data-v-08c01ff2] {\\n    width: 100%;\\n    /*min-height: 400px;*/\\n    /*height: 100%;*/\\n    /*height: calc(100% - 100px);*/\\n    /*!*Firefox*!*/\\n    /*height: -moz-calc(100% - 100px);*/\\n    /*!*chrome safari*!*/\\n    /*height: -webkit-calc(100% - 100px);*/\\n}\\n.right[data-v-08c01ff2] {\\n    float: right;\\n}\\n.input-weeks[data-v-08c01ff2]::before {\\n    position: absolute;\\n    margin-top: 10px;\\n    margin-left: -40px;\\n    display: inline-block;\\n    content: '同期前';\\n    vertical-align: middle;\\n}\\n.input-weeks[data-v-08c01ff2] {\\n    margin-left: 40px;\\n    margin-right: 20px;\\n    display: inline-block;\\n    position: relative;\\n    vertical-align: middle;\\n}\\n.input-weeks[data-v-08c01ff2]::after {\\n    position: absolute;\\n    margin-top: 10px;\\n    margin-left: 5px;\\n    margin-right: -20px;\\n    display: inline-block;\\n    content: '周';\\n    vertical-align: middle;\\n}\\n.input-months[data-v-08c01ff2]::before {\\n    position: absolute;\\n    margin-top: 10px;\\n    margin-left: -40px;\\n    display: inline-block;\\n    content: '同期前';\\n    vertical-align: middle;\\n}\\n.input-months[data-v-08c01ff2] {\\n    margin-left: 40px;\\n    margin-right: 20px;\\n    display: inline-block;\\n    position: relative;\\n    vertical-align: middle;\\n}\\n.input-months[data-v-08c01ff2]::after {\\n    position: absolute;\\n    margin-top: 10px;\\n    margin-left: 5px;\\n    margin-right: -20px;\\n    display: inline-block;\\n    content: '月';\\n    vertical-align: middle;\\n}\\n.mrg-tb-10[data-v-08c01ff2] {\\n    margin: 10px 0 10px;\\n}\\n.warning[data-v-08c01ff2] {\\n    color: #F7BA2A;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"src/views/contents/risk/customerMonitoring.vue\"],\"names\":[],\"mappings\":\";AAiKA;IACA,YAAA;AACA;AAEA;IACA,iBAAA;AACA;AAEA;IACA,qBAAA;AACA;AAEA;IACA,qBAAA,EAAA,WAAA;IACA,aAAA;IACA,iBAAA;;IAEA,uBAAA;IACA,2BAAA;IACA,mBAAA;IACA,uBAAA;;IAEA,cAAA;IACA,sCAAA;IACA,8BAAA;IACA,kCAAA;;IAEA,iBAAA;IACA,4BAAA;IACA,oBAAA;IACA,wBAAA;;IAEA,eAAA;IACA,8BAAA;IACA,sBAAA;IACA,0BAAA;AACA;AAEA;IACA,WAAA;IACA,qBAAA;IACA,gBAAA;IACA,8BAAA;IACA,cAAA;IACA,mCAAA;IACA,oBAAA;IACA,sCAAA;AACA;AAEA;IACA,YAAA;AACA;AAEA;IACA,kBAAA;IACA,gBAAA;IACA,kBAAA;IACA,qBAAA;IACA,cAAA;IACA,sBAAA;AACA;AAEA;IACA,iBAAA;IACA,kBAAA;IACA,qBAAA;IACA,kBAAA;IACA,sBAAA;AACA;AAEA;IACA,kBAAA;IACA,gBAAA;IACA,gBAAA;IACA,mBAAA;IACA,qBAAA;IACA,YAAA;IACA,sBAAA;AACA;AAEA;IACA,kBAAA;IACA,gBAAA;IACA,kBAAA;IACA,qBAAA;IACA,cAAA;IACA,sBAAA;AACA;AAEA;IACA,iBAAA;IACA,kBAAA;IACA,qBAAA;IACA,kBAAA;IACA,sBAAA;AACA;AAEA;IACA,kBAAA;IACA,gBAAA;IACA,gBAAA;IACA,mBAAA;IACA,qBAAA;IACA,YAAA;IACA,sBAAA;AACA;AAEA;IACA,mBAAA;AACA;AAEA;IACA,cAAA;AACA\",\"file\":\"customerMonitoring.vue?vue&type=style&index=0&id=08c01ff2&scoped=true&lang=css&\",\"sourcesContent\":[\"<!--\\r\\n * @Description: \\r\\n * @Author: jinxiaojian\\r\\n * @Email: jinxiaojian@youxin.com\\r\\n * @Date: 2019-07-12 16:17:33\\r\\n * @LastEditTime: 2019-07-16 14:29:24\\r\\n * @LastEditors: 靳肖健\\r\\n -->\\r\\n<template>\\r\\n    <el-tabs v-model=\\\"activeName\\\" @tab-click=\\\"handleClick\\\">\\r\\n        <el-tab-pane label=\\\"客群监控\\\" name=\\\"first\\\">\\r\\n            <div class=\\\"p_6\\\">\\r\\n                <div class=\\\"search-wrapper\\\">\\r\\n                    <div class=\\\"search-content\\\">\\r\\n                        <el-select v-model=\\\"searchParam.category\\\"\\r\\n                                   @change=\\\"handleCategoryChange\\\"\\r\\n                                   slot=\\\"prepend\\\"\\r\\n                                   placeholder=\\\"查询类别\\\"\\r\\n                                   style=\\\"width: 100px;\\\">\\r\\n                            <el-option\\r\\n                                v-for=\\\"item in paramCategory\\\"\\r\\n                                :key=\\\"item.value\\\"\\r\\n                                :label=\\\"item.name\\\"\\r\\n                                :value=\\\"item.value\\\">\\r\\n                            </el-option>\\r\\n                        </el-select>\\r\\n                        <el-date-picker\\r\\n                            v-show=\\\"searchParam.category === 1\\\"\\r\\n                            v-model=\\\"searchParam.dateRange\\\"\\r\\n                            type=\\\"daterange\\\"\\r\\n                            placeholder=\\\"选择日期范围\\\">\\r\\n                        </el-date-picker>\\r\\n                        <el-date-picker\\r\\n                            ref=\\\"startWeek\\\"\\r\\n                            v-show=\\\"searchParam.category === 2\\\"\\r\\n                            v-model=\\\"searchParam.startWeek\\\"\\r\\n                            :picker-options=\\\"weekOptions\\\"\\r\\n                            :clearable=\\\"startWeekClearabe\\\"\\r\\n                            type=\\\"week\\\"\\r\\n                            format=\\\"yyyy 第 WW 周\\\"\\r\\n                            placeholder=\\\"选择开始周\\\">\\r\\n                        </el-date-picker>\\r\\n                        <el-date-picker\\r\\n                            ref=\\\"endWeek\\\"\\r\\n                            v-show=\\\"searchParam.category === 2\\\"\\r\\n                            v-model=\\\"searchParam.endWeek\\\"\\r\\n                            :picker-options=\\\"weekOptions\\\"\\r\\n                            :clearable=\\\"endWeekClearabe\\\"\\r\\n                            type=\\\"week\\\"\\r\\n                            format=\\\"yyyy 第 WW 周\\\"\\r\\n                            placeholder=\\\"选择结束周\\\">\\r\\n                        </el-date-picker>\\r\\n                        <el-date-picker\\r\\n                            ref=\\\"startMonth\\\"\\r\\n                            v-show=\\\"searchParam.category === 3\\\"\\r\\n                            v-model=\\\"searchParam.startMonth\\\"\\r\\n                            type=\\\"month\\\"\\r\\n                            placeholder=\\\"选择月\\\">\\r\\n                        </el-date-picker>\\r\\n                        <el-date-picker\\r\\n                            ref=\\\"endMonth\\\"\\r\\n                            v-show=\\\"searchParam.category === 3\\\"\\r\\n                            v-model=\\\"searchParam.endMonth\\\"\\r\\n                            type=\\\"month\\\"\\r\\n                            placeholder=\\\"选择月\\\">\\r\\n                        </el-date-picker>\\r\\n                        <el-date-picker\\r\\n                            v-show=\\\"searchParam.category === 4||searchParam.category === 5\\\"\\r\\n                            v-model=\\\"searchParam.date\\\"\\r\\n                            type=\\\"date\\\"\\r\\n                            placeholder=\\\"选择日期\\\">\\r\\n                        </el-date-picker>\\r\\n                        <div v-show=\\\"searchParam.category === 4\\\" class=\\\"input-weeks\\\">\\r\\n                            <el-input-number ref=\\\"weeks\\\"\\r\\n                                             v-model=\\\"weeks\\\"\\r\\n                                             :min=\\\"1\\\" :max=\\\"100\\\"\\r\\n                                             style=\\\"width: 120px;\\\"></el-input-number>\\r\\n                        </div>\\r\\n                        <!--<div v-if=\\\"searchParam.category === 5\\\"-->\\r\\n                        <!--style=\\\"display: inline-block;position: relative;vertical-align:middle;\\\">同期前-->\\r\\n                        <!--</div>-->\\r\\n                        <div v-show=\\\"searchParam.category === 5\\\" class=\\\"input-months\\\">\\r\\n                            <!--style=\\\"display: inline-block;position: relative;vertical-align:middle;\\\">-->\\r\\n                            <el-input-number ref=\\\"months\\\"\\r\\n                                             v-model=\\\"months\\\"\\r\\n                                             :min=\\\"1\\\" :max=\\\"100\\\"\\r\\n                                             style=\\\"width: 120px;\\\"></el-input-number>\\r\\n                        </div>\\r\\n                        <!--<div v-if=\\\"searchParam.category === 5\\\"-->\\r\\n                        <!--style=\\\"display: inline-block;position: relative;vertical-align:middle;\\\">月-->\\r\\n                        <!--</div>-->\\r\\n\\r\\n                        <!--<el-form-item label=\\\"手机设备\\\">-->\\r\\n                        <!--<el-select v-model=\\\"searchParam.device\\\" slot=\\\"prepend\\\" placeholder=\\\"手机设备\\\" style=\\\"width: 100px;\\\">-->\\r\\n                        <!--<el-option-->\\r\\n                        <!--v-for=\\\"item in deviceOptions\\\"-->\\r\\n                        <!--:key=\\\"item.value\\\"-->\\r\\n                        <!--:label=\\\"item.name\\\"-->\\r\\n                        <!--:value=\\\"item.value\\\">-->\\r\\n                        <!--</el-option>-->\\r\\n                        <!--</el-select>-->\\r\\n                        <!--</el-form-item>-->\\r\\n                        <el-select v-model=\\\"searchParam.customType\\\" slot=\\\"prepend\\\" placeholder=\\\"请选择客群\\\"\\r\\n                                   style=\\\"width: 130px;\\\">\\r\\n                            <el-option\\r\\n                                v-for=\\\"item in customTypes\\\"\\r\\n                                :key=\\\"item.value\\\"\\r\\n                                :label=\\\"item.name\\\"\\r\\n                                :value=\\\"item.value\\\">\\r\\n                            </el-option>\\r\\n                        </el-select>\\r\\n                        <el-select v-model=\\\"searchParam.attribute\\\"\\r\\n                                   :clearable=\\\"clearable\\\"\\r\\n                                   @change=\\\"handleAttributeChange\\\"\\r\\n                                   slot=\\\"prepend\\\"\\r\\n                                   placeholder=\\\"请选择属性\\\"\\r\\n                                   style=\\\"width: 260px;\\\">\\r\\n                            <el-option\\r\\n                                v-for=\\\"item in attributes\\\"\\r\\n                                :key=\\\"item.uuid\\\"\\r\\n                                :label=\\\"item.name\\\"\\r\\n                                :value=\\\"item.uuid\\\">\\r\\n                            </el-option>\\r\\n                        </el-select>\\r\\n                        <!--<el-input v-show=\\\"chartType =='series'\\\"-->\\r\\n                        <!--placeholder=\\\"\\\"-->\\r\\n                        <!--style=\\\"width:120px;\\\"-->\\r\\n                        <!--v-model=\\\"searchParam.seriesStep\\\">-->\\r\\n                        <!--<template slot=\\\"prepend\\\">步长</template>-->\\r\\n                        <!--</el-input>-->\\r\\n                    </div>\\r\\n                    <div class=\\\"search-btn\\\">\\r\\n                        <el-button slot=\\\"append\\\" icon=\\\"search\\\" @click=\\\"search\\\" style=\\\"width:80px; \\\">查询</el-button>\\r\\n                    </div>\\r\\n                </div>\\r\\n                <hr>\\r\\n                <div class=\\\"mrg-tb-10\\\" v-show=\\\"chartType=='hash'\\\">\\r\\n                    <span slot=\\\"prepend\\\">百分比模式</span>\\r\\n                    <el-switch\\r\\n                        v-model=\\\"showPercent\\\"\\r\\n                        @change=\\\"switchPercent\\\">\\r\\n                    </el-switch>\\r\\n                </div>\\r\\n                <chart :options=\\\"line\\\" ref=\\\"line\\\" theme=\\\"ovilia-green\\\" auto-resize class=\\\"chartClass\\\"></chart>\\r\\n                <el-alert\\r\\n                    title=\\\"\\\"\\r\\n                    type=\\\"info\\\"\\r\\n                    description=\\\"提示：图表下方和右侧灰色区域两头可拖动控制相应联动区域的缩小和放大，方便数据查看，光标在图表区域内鼠标滑轮滑动亦可以！\\\"\\r\\n                    show-icon :closable=\\\"closable\\\">\\r\\n                </el-alert>\\r\\n                <el-alert\\r\\n                    title=\\\"\\\"\\r\\n                    description=\\\"警告：图表右上角工具条数据视图点开情况下，请勿点击查询按钮，如点击查询再点击数据视图内刷新后会与前一查询结果重合且图表类型变化，可点击工具条还原按钮还原！\\\"\\r\\n                    show-icon type=\\\"warning\\\" :closable=\\\"closable\\\">\\r\\n                </el-alert>\\r\\n            </div>\\r\\n        </el-tab-pane>\\r\\n    </el-tabs>\\r\\n</template>\\r\\n\\r\\n<style scoped>\\r\\n    .el-select .el-input {\\r\\n        width: 200px;\\r\\n    }\\r\\n\\r\\n    .pagination_position {\\r\\n        padding-top: 20px;\\r\\n    }\\r\\n\\r\\n    .search-wrapper {\\r\\n        margin: 0px auto 10px;\\r\\n    }\\r\\n\\r\\n    .chart-wrapper {\\r\\n        display: -webkit-flex; /* Safari */\\r\\n        display: flex;\\r\\n        display: -ms-flex;\\r\\n\\r\\n        /*flex主轴方向和主轴溢出排版方式的简写*/\\r\\n        -webkit-flex-flow: row wrap;\\r\\n        flex-flow: row wrap;\\r\\n        -ms-flex-flow: row wrap;\\r\\n\\r\\n        /*内容在主轴上的对齐方式*/\\r\\n        -webkit-justify-content: space-between;\\r\\n        justify-content: space-between;\\r\\n        -ms-justify-content: space-between;\\r\\n\\r\\n        /*内容项目在交叉轴上的对齐方式*/\\r\\n        -webkit-align-items: stretch;\\r\\n        align-items: stretch;\\r\\n        -ms-align-items: stretch;\\r\\n\\r\\n        /*多轴的时候轴线的对齐方式*/\\r\\n        -webkit-align-content: stretch;\\r\\n        align-content: stretch;\\r\\n        -ms-align-content: stretch;\\r\\n    }\\r\\n\\r\\n    .echarts {\\r\\n        width: 100%;\\r\\n        /*min-height: 400px;*/\\r\\n        /*height: 100%;*/\\r\\n        /*height: calc(100% - 100px);*/\\r\\n        /*!*Firefox*!*/\\r\\n        /*height: -moz-calc(100% - 100px);*/\\r\\n        /*!*chrome safari*!*/\\r\\n        /*height: -webkit-calc(100% - 100px);*/\\r\\n    }\\r\\n\\r\\n    .right {\\r\\n        float: right;\\r\\n    }\\r\\n\\r\\n    .input-weeks::before {\\r\\n        position: absolute;\\r\\n        margin-top: 10px;\\r\\n        margin-left: -40px;\\r\\n        display: inline-block;\\r\\n        content: '同期前';\\r\\n        vertical-align: middle;\\r\\n    }\\r\\n\\r\\n    .input-weeks {\\r\\n        margin-left: 40px;\\r\\n        margin-right: 20px;\\r\\n        display: inline-block;\\r\\n        position: relative;\\r\\n        vertical-align: middle;\\r\\n    }\\r\\n\\r\\n    .input-weeks::after {\\r\\n        position: absolute;\\r\\n        margin-top: 10px;\\r\\n        margin-left: 5px;\\r\\n        margin-right: -20px;\\r\\n        display: inline-block;\\r\\n        content: '周';\\r\\n        vertical-align: middle;\\r\\n    }\\r\\n\\r\\n    .input-months::before {\\r\\n        position: absolute;\\r\\n        margin-top: 10px;\\r\\n        margin-left: -40px;\\r\\n        display: inline-block;\\r\\n        content: '同期前';\\r\\n        vertical-align: middle;\\r\\n    }\\r\\n\\r\\n    .input-months {\\r\\n        margin-left: 40px;\\r\\n        margin-right: 20px;\\r\\n        display: inline-block;\\r\\n        position: relative;\\r\\n        vertical-align: middle;\\r\\n    }\\r\\n\\r\\n    .input-months::after {\\r\\n        position: absolute;\\r\\n        margin-top: 10px;\\r\\n        margin-left: 5px;\\r\\n        margin-right: -20px;\\r\\n        display: inline-block;\\r\\n        content: '月';\\r\\n        vertical-align: middle;\\r\\n    }\\r\\n\\r\\n    .mrg-tb-10 {\\r\\n        margin: 10px 0 10px;\\r\\n    }\\r\\n\\r\\n    .warning {\\r\\n        color: #F7BA2A;\\r\\n    }\\r\\n</style>\\r\\n\\r\\n<script>\\r\\n    import Common from '../../../utils/common'\\r\\n    import auth from '../../../utils/authenticate'\\r\\n    import {Notification} from 'element-ui'\\r\\n\\r\\n    // import {getWeekNumber, formatDate} from '../../../../node_modules/element-ui/packages/date-picker/src/util/index'\\r\\n\\r\\n    //引入Echats图表组件\\r\\n    //  import VueECharts from 'vue-echarts/components/ECharts.vue'\\r\\n\\r\\n    import 'echarts/lib/component/grid'\\r\\n    import 'echarts/lib/component/toolbox'\\r\\n    import 'echarts/lib/component/tooltip'\\r\\n    import 'echarts/lib/component/legend'\\r\\n\\r\\n    // built-in theme\\r\\n    import 'echarts/theme/dark'\\r\\n    import customerLineData from '../../../data/customerLine'\\r\\n\\r\\n    import $ from 'jquery'\\r\\n    import deepcopy from \\\"deepcopy\\\"\\r\\n    //  import Vue from 'vue'\\r\\n\\r\\n    export default {\\r\\n\\r\\n        props: [],\\r\\n        components: {},\\r\\n        data(){\\r\\n            let date = new Date();\\r\\n            let prevMonth = new Date(date.setDate(date.getDate() - 7));\\r\\n            let now = new Date();\\r\\n            let currentWeekNumber = new Date();\\r\\n\\r\\n            return {\\r\\n                closable: false,\\r\\n                line: customerLineData,\\r\\n                deviceOptions: [\\r\\n                    {\\r\\n                        value: 'ALL',\\r\\n                        name: 'ALL',\\r\\n                    },\\r\\n                    {\\r\\n                        value: 'iPhone',\\r\\n                        name: 'iOS',\\r\\n                    },\\r\\n                    {\\r\\n                        value: 'Android',\\r\\n                        name: 'Android'\\r\\n                    }],\\r\\n                customTypes: [\\r\\n                    {\\r\\n                        name: '进件客群',\\r\\n                        value: 0,\\r\\n                    },\\r\\n                    {\\r\\n                        name: '通过审核客群',\\r\\n                        value: 1,\\r\\n                    }\\r\\n                ],\\r\\n                paramCategory: [\\r\\n                    {\\r\\n                        name: '按天',\\r\\n                        value: 1\\r\\n                    },\\r\\n                    {\\r\\n                        name: '按周',\\r\\n                        value: 2\\r\\n                    },\\r\\n                    {\\r\\n                        name: '按月',\\r\\n                        value: 3\\r\\n                    },\\r\\n                    {\\r\\n                        name: '周同期',\\r\\n                        value: 4\\r\\n                    },\\r\\n                    {\\r\\n                        name: '月同期',\\r\\n                        value: 5\\r\\n                    },\\r\\n                ],\\r\\n                attributes: [],\\r\\n                hashes: [1],\\r\\n                searchParam: {\\r\\n                    customType: 0,\\r\\n                    category: 1,\\r\\n                    attribute: \\\"\\\",\\r\\n                    device: \\\"ALL\\\",\\r\\n                    dateRange: [prevMonth, now],\\r\\n                    date: now,\\r\\n                    startMonth: '',\\r\\n                    endMonth: '',\\r\\n                    startWeek: '',//new Date(this.getDate(currentWeekNumber,-49)),\\r\\n                    endWeek: '',//currentWeekNumber,\\r\\n                    seriesStep: '',\\r\\n//                  weeks:4,\\r\\n//                  months:4,\\r\\n                },\\r\\n                weeks: 4,\\r\\n                months: 4,\\r\\n                activeName: 'first',\\r\\n                showDetail: false,\\r\\n                name: 'detail',\\r\\n                isFullScreen: false,\\r\\n                clearable: false,\\r\\n                startWeekClearabe: true,\\r\\n                endWeekClearabe: true,\\r\\n                chartType: \\\"hash\\\",\\r\\n                weekOptions: {\\r\\n                    firstDayOfWeek: 7,\\r\\n                },\\r\\n                lineGroup: {},\\r\\n                showPercent: false,//切换百分比模式\\r\\n                noPercentOptions: {},\\r\\n                percentSeriesArr: [],\\r\\n                percentLineOptions: {},\\r\\n            }\\r\\n        },\\r\\n        computed: {},\\r\\n        methods: {\\r\\n               formatDate(date) {\\r\\n      if (typeof date == \\\"number\\\" || typeof date == \\\"string\\\") {\\r\\n        date = new Date(date);\\r\\n      }\\r\\n      var _year = date.getFullYear();\\r\\n      var _month = date.getMonth();\\r\\n      var _day = date.getDate();\\r\\n      var _hour = date.getHours();\\r\\n      _day = _day < 10 ? \\\"0\\\" + _day : _day;\\r\\n      _month = _month < 9 ? \\\"0\\\" + (_month + 1) : _month + 1;\\r\\n      return `${_year}/${_month}/${_day} ${_hour}`;\\r\\n    },\\r\\n            getDevices(){\\r\\n                Common.ajax({\\r\\n                    url: '/web/requestParam/device',\\r\\n                    type: 'GET',\\r\\n                    contentType: 'application/json',\\r\\n                    success: (response) => {\\r\\n                        if (response.data && response.data.list) {\\r\\n                            this.deviceOptions = response.data.list;\\r\\n                        }\\r\\n                    },\\r\\n                    error: (err) => {\\r\\n                        this.deviceOptions = [{\\r\\n                            value: 'ALL',\\r\\n                            name: 'ALL',\\r\\n                        }, {\\r\\n                            value: 'iPhone',\\r\\n                            name: 'IOS',\\r\\n                        }, {\\r\\n                            value: 'Android',\\r\\n                            name: 'Android'\\r\\n                        }];\\r\\n                    }\\r\\n                });\\r\\n            },\\r\\n\\r\\n            getCustomerTypes(){\\r\\n                Common.ajax({\\r\\n                    url: 'web/requestParam/customerTypes',\\r\\n                    type: 'GET',\\r\\n                    contentType: \\\"application/json\\\",\\r\\n                    data: {},\\r\\n                    success: (response) => {\\r\\n                        if (response.data && response.data.list) {\\r\\n                            let customerTypes = response.data.list;\\r\\n                            let len = customerTypes.length;\\r\\n                            this.customerTypes = [];\\r\\n                            for (var i = 0; i < len; i++) {\\r\\n                                this.customTypes.push(customerTypes[i]);\\r\\n                            }\\r\\n                        }\\r\\n                    },\\r\\n                    error(err){\\r\\n                        /*            let error = err.message || err;\\r\\n                         Notification.error({\\r\\n                         title: '错误',\\r\\n                         message: error\\r\\n                         });*/\\r\\n                    }\\r\\n                });\\r\\n            },\\r\\n            getAttributes(){\\r\\n                Common.ajax({\\r\\n                    url: '/web/v1/attribute',\\r\\n                    type: 'GET',\\r\\n                    contentType: 'application/json',\\r\\n                    data: {\\r\\n                    \\tpage:1,\\r\\n                        pageSize:1000\\r\\n                    },\\r\\n                    dataType:'json',\\r\\n                    success: (response) => {\\r\\n                        if (response.data && response.data.list) {\\r\\n                            this.hashes = [];\\r\\n                            this.attributes = response.data.list;\\r\\n                            this.attributes.forEach((item, index, arr) => {\\r\\n                                if (item.hash) {\\r\\n                                    this.hashes.push(item.uuid);\\r\\n                                }\\r\\n                            });\\r\\n                        }\\r\\n                    },\\r\\n                    error: (err) => {\\r\\n                        let error = err.message || err;\\r\\n                        Notification.error({\\r\\n                            title: '接口错误',\\r\\n                            message: error\\r\\n                        });\\r\\n                    }\\r\\n                });\\r\\n            },\\r\\n\\r\\n            getYear(year, month){\\r\\n                if (month2 <= 0) {\\r\\n                    year2 = year2 - parseInt(parseInt(month2 / 12) == 0 ? 1 : parseInt(month2 / 12));\\r\\n                } else {\\r\\n\\r\\n                }\\r\\n            },\\r\\n\\r\\n            getPreMonthDay: function (date, monthNum) {\\r\\n                var year = date.getFullYear(); //获取当前日期的年份\\r\\n                var month = date.getMonth(); //获取当前日期的月份\\r\\n                var day = date.getDate(); //获取当前日期的日\\r\\n\\r\\n                var year2 = year;\\r\\n                var month2 = month + 1 - monthNum;\\r\\n                if (month2 <= 0) {\\r\\n                    year2 = year2 - parseInt(parseInt(Math.abs(month2) / 12) == 0 ? 1 : parseInt(Math.abs(month2) / 12));\\r\\n                    month2 = 12 - (Math.abs(month2) % 12);\\r\\n                }\\r\\n                var day2 = day;\\r\\n                var days2 = new Date(year2, month2, 0);\\r\\n                days2 = days2.getDate();\\r\\n                if (day2 > days2) {\\r\\n                    day2 = days2;\\r\\n                }\\r\\n                if (day2 < 10) {\\r\\n                    day2 = '0' + day2;\\r\\n                }\\r\\n                if (month2 < 10) {\\r\\n                    month2 = '0' + month2;\\r\\n                }\\r\\n                var t2 = year2 + '-' + month2 + '-' + day2;\\r\\n                return t2;\\r\\n            },\\r\\n\\r\\n            getPreDay: function (date, num) {\\r\\n                if (!num)return;\\r\\n                var _year = date.getFullYear();\\r\\n                var _month = date.getMonth();\\r\\n                var _day = date.getDate();\\r\\n\\r\\n                var _year2 = _year;\\r\\n                var _month2 = _month + 1;\\r\\n                var _day2 = _day - num;\\r\\n                if (_day2 <= 0) {\\r\\n                    _month2 = _month2 - 1;\\r\\n                    if (_month2 <= 0) {\\r\\n                        _year2 = _year - 1;\\r\\n                        _month2 = 12 - (Math.abs(_month2) % 12);\\r\\n                    }\\r\\n                    _day2 = (new Date(_year2, _month2, 0)).getDate();\\r\\n                }\\r\\n\\r\\n                _day2 = _day2 < 10 ? '0' + _day2 : _day2;\\r\\n                _month2 = _month2 < 10 ? '0' + _month2 : _month2;\\r\\n\\r\\n                return `${_year2}-${_month2}-${_day2}`;\\r\\n\\r\\n            },\\r\\n\\r\\n            /**\\r\\n             * 计算加多少天\\r\\n             */\\r\\n            calcAddDate(year, month, day, days){\\r\\n                let _year2 = year;\\r\\n                let _month2 = month;\\r\\n                let _day2 = day;\\r\\n                let _days = days;\\r\\n                let obj = {};\\r\\n                if (_day2 > _days) {\\r\\n                    _day2 = _day2 - _days;\\r\\n                    _month2 = Math.abs(_month2 + 1) % 12;\\r\\n                    _year2 = _month2 === 1 ? _year2 + 1 : _year2;\\r\\n                    _days = (new Date(_year2, _month2, 0)).getDate();\\r\\n                    if (_days > _day2) {\\r\\n                        obj = {\\r\\n                            _year2: _year2,\\r\\n                            _month2: _month2,\\r\\n                            _day2: _day2,\\r\\n                        };\\r\\n                    } else {\\r\\n                        obj = this.calcAddDate(_year2, _month2, _day2, _days);\\r\\n                    }\\r\\n                } else {\\r\\n                    obj = {\\r\\n                        _year2: _year2,\\r\\n                        _month2: _month2,\\r\\n                        _day2: _day2,\\r\\n                    }\\r\\n                }\\r\\n                ;\\r\\n                return obj;\\r\\n            },\\r\\n\\r\\n            /**\\r\\n             * 计算减去多少天\\r\\n             */\\r\\n            calcReduceDate(year, month, day){\\r\\n                let _year2 = year;\\r\\n                let _month2 = month;\\r\\n                let _day2 = day;\\r\\n                let _days;\\r\\n                let obj = {};\\r\\n\\r\\n                if (_day2 <= 0) {\\r\\n                    _month2 = _month2 - 1;\\r\\n                    if (_month2 <= 0) {\\r\\n                        _year2 = _year2 - 1;\\r\\n                        _month2 = 12 - (Math.abs(_month2) % 12);\\r\\n                    }\\r\\n                    _days = (new Date(_year2, _month2, 0)).getDate();\\r\\n                    _day2 = _days + _day2;\\r\\n                    if (_day2 > 0) {\\r\\n                        obj = {\\r\\n                            _year2: _year2,\\r\\n                            _month2: _month2,\\r\\n                            _day2: _day2,\\r\\n                        };\\r\\n                    } else {\\r\\n                        obj = this.calcReduceDate(_year2, _month2, _day2);\\r\\n                    }\\r\\n                } else {\\r\\n                    obj = {\\r\\n                        _year2: _year2,\\r\\n                        _month2: _month2,\\r\\n                        _day2: _day2,\\r\\n                    }\\r\\n                }\\r\\n                return obj;\\r\\n            },\\r\\n\\r\\n            /**\\r\\n             *\\r\\n             */\\r\\n            getDate(date, day, format){\\r\\n                var _year = date.getFullYear();\\r\\n                var _month = date.getMonth();\\r\\n                var _day = date.getDate();\\r\\n\\r\\n                var _year2 = _year;\\r\\n                var _month2 = _month + 1;\\r\\n                var _day2 = _day + day;\\r\\n\\r\\n                var _days;\\r\\n                var _cDate;\\r\\n                if (day > 0) {\\r\\n                    _days = (new Date(_year2, _month2, 0)).getDate();\\r\\n                    _cDate = this.calcAddDate(_year2, _month2, _day2, _days);\\r\\n                    _year2 = _cDate._year2;\\r\\n                    _month2 = _cDate._month2;\\r\\n                    _day2 = _cDate._day2;\\r\\n                } else {\\r\\n                    _cDate = this.calcReduceDate(_year2, _month2, _day2, _days);\\r\\n                    _year2 = _cDate._year2;\\r\\n                    _month2 = _cDate._month2;\\r\\n                    _day2 = _cDate._day2;\\r\\n                }\\r\\n\\r\\n                _day2 = _day2 < 10 ? '0' + _day2 : _day2;\\r\\n                _month2 = _month2 < 10 ? '0' + _month2 : _month2;\\r\\n\\r\\n                return `${_year2}-${_month2}-${_day2}`;\\r\\n\\r\\n            },\\r\\n\\r\\n            clearLine(){\\r\\n                this.line.legend.data = [];\\r\\n                this.line.xAxis && (this.line.xAxis[0].data = []);\\r\\n                this.line.series = [];\\r\\n                this.showPercent = false;\\r\\n                this.line.yAxis[0].axisLabel = {\\r\\n                    formatter: '{value}'\\r\\n                };\\r\\n                //格式化tooltip的坐标轴指示器显示数值\\r\\n                this.line.tooltip.formatter = null;\\r\\n                this.line.tooltip.axisPointer.label = {formatter: \\\"{value}\\\"};\\r\\n            },\\r\\n\\r\\n            /**\\r\\n             * 根据查询客群类别和属性更新图表title\\r\\n             * @param customerType 客群类别\\r\\n             * @param attribute 客群属性\\r\\n             */\\r\\n            setTitle(customerType, attribute) {\\r\\n                //获取类型name\\r\\n                let customerTypeName = '';\\r\\n                this.customerTypes.some((item, index, arr) => {\\r\\n                    let rv = false;\\r\\n                    if (item.value == customerType) {\\r\\n                        customerTypeName = item.name;\\r\\n                        rv = true;\\r\\n                    }\\r\\n                    return rv\\r\\n                });\\r\\n\\r\\n                //获取属性name\\r\\n                let attributeName = '';\\r\\n                this.attributes.some((item, index, arr) => {\\r\\n                    let rv = false;\\r\\n                    if (item.value == attribute) {\\r\\n                        attributeName = item.name;\\r\\n                        rv = true;\\r\\n                    }\\r\\n                    return rv\\r\\n                });\\r\\n                this.line.title.text = customerTypeName + '-' + attributeName;\\r\\n            },\\r\\n\\r\\n            /**\\r\\n             *  自定义格式化周显示\\r\\n             */\\r\\n            formaterWeek(date){\\r\\n                let _date = this.getDate(new Date(date), 1);\\r\\n                let _datetime = new Date(_date);\\r\\n                let _week = getWeekNumber(_datetime);\\r\\n                return `${_date} 第${_week}周`;\\r\\n            },\\r\\n            /**\\r\\n             * 自定义格式化月显示\\r\\n             */\\r\\n            formateMonth(date){\\r\\n                return this.formatDate(date, 'yyyy-MM');\\r\\n            },\\r\\n            /**\\r\\n             * 配置chart图表数据\\r\\n             * @param categorys\\r\\n             * @param xAxisData\\r\\n             */\\r\\n            setOptions(categorys, xAxisData, type){\\r\\n                let len = xAxisData.length;\\r\\n                this.line.xAxis[0].data = xAxisData;\\r\\n                if (type) {\\r\\n                    categorys.map((item, index, arr) => {\\r\\n                        arr[index] = this.formatSeriesAndLegend(type, item);\\r\\n                    });\\r\\n                }\\r\\n                this.line.legend.data = categorys;\\r\\n\\r\\n                for (var i = 0; i < categorys.length; i++) {\\r\\n                    //标记series的索引对应的category\\r\\n                    this.lineGroup[categorys[i]] = i;\\r\\n                    this.line.series.push({\\r\\n                        name: categorys[i],//this.formatSeriesAndLegend(type,categorys[i]),\\r\\n                        type: 'line',\\r\\n                        label: {\\r\\n                            normal: {\\r\\n                                show: true,\\r\\n                            }\\r\\n                        },\\r\\n                        areaStyle: {normal: {}},\\r\\n                        data: Array(len).fill(0),\\r\\n//               data:Array.apply(null, Array(len)).map(() => 0)\\r\\n                    });\\r\\n                }\\r\\n                this.percentSeriesArr = Array(len).fill(\\\"\\\");\\r\\n            },\\r\\n\\r\\n            /**\\r\\n             * 提取数据为百分比需求数据，便于后续转化为百分比格式处理\\r\\n             * @param dataIdx\\r\\n             * @param item\\r\\n             */\\r\\n            extractPercentSeriesArr: function (dataIdx, item) {\\r\\n                !this.percentSeriesArr[dataIdx] && (this.percentSeriesArr[dataIdx] = {});\\r\\n                this.percentSeriesArr[dataIdx][item.category] = item.value;\\r\\n                let num = Number(item.value);\\r\\n                num = !!num ? num : 0;\\r\\n//      //console.log('number-------',this.percentSeriesArr,item,num);\\r\\n                this.percentSeriesArr[dataIdx].xIndex = dataIdx;\\r\\n                if (this.percentSeriesArr[dataIdx].total) {\\r\\n                    this.percentSeriesArr[dataIdx].total += num;\\r\\n                } else {\\r\\n                    this.percentSeriesArr[dataIdx].total = num;\\r\\n                }\\r\\n            },\\r\\n\\r\\n            /**\\r\\n             *\\r\\n             */\\r\\n            formatSeriesAndLegend(type, date){\\r\\n                let returnValue;\\r\\n                returnValue = type === 2 ? this.formaterWeek(date) : type === 3 ? this.formateMonth(date) : date;\\r\\n                return returnValue;\\r\\n            },\\r\\n            /**\\r\\n             *  格式散列图表周和月的xAxisData\\r\\n             */\\r\\n            formatHashxAxisData(type){\\r\\n                if (type === 2) {//格式化周数据\\r\\n                    this.line.xAxis[0].data.map((item, index, arr) => {\\r\\n                        arr[index] = this.formaterWeek(item);\\r\\n                    });\\r\\n                } else if (type === 3) {//格式化月数据\\r\\n                    this.line.xAxis[0].data.map((item, index, arr) => {\\r\\n                        arr[index] = this.formateMonth(item);\\r\\n                    });\\r\\n                }\\r\\n            },\\r\\n            /**\\r\\n             * 已取消使用\\r\\n             */\\r\\n            formatSeriesxAxisData(type){\\r\\n                //console.log('formatSeriesxAxisData', this.line);\\r\\n                if (type === 2) {//格式化周数据\\r\\n                    this.line.legend.data.map((item, index, arr) => {\\r\\n                        arr[index] = this.formaterWeek(item);\\r\\n                    });\\r\\n                    this.line.series.map((item, index, arr) => {\\r\\n                        arr[index].name = this.formaterWeek(item.name);\\r\\n                    });\\r\\n\\r\\n                } else if (type === 3) {//格式化月数据\\r\\n                    this.line.legend.data.map((item, index, arr) => {\\r\\n                        arr[index] = this.formateMonth(item);\\r\\n                    });\\r\\n                    this.line.series.map((item, index, arr) => {\\r\\n                        arr[index].name = this.formateMonth(item.name);\\r\\n                    });\\r\\n                }\\r\\n            },\\r\\n            /**\\r\\n             * 设置百分比图表options数据\\r\\n             */\\r\\n            setPercentOptions: function () {\\r\\n                this.percentLineOptions = deepcopy(this.line);\\r\\n                //格式化数据计算转换为百分比数据值\\r\\n                this.percentSeriesArr.forEach((item, index, arr) => {\\r\\n                    for (var key in item) {\\r\\n                        if (['xIndex', 'legendIndex', 'total'].indexOf(key) === -1) {\\r\\n                            let legendIndex = this.line.legend.data.indexOf(key);\\r\\n                            let pct = (item[key] / item.total).toFixed(4) * 100;\\r\\n                            pct = /^(\\\\+)?\\\\d+$/.test(pct) ? pct : pct.toFixed(2);\\r\\n                            this.percentLineOptions.series[legendIndex].data[item.xIndex] = pct;\\r\\n                            this.percentLineOptions.series[legendIndex].label.normal.formatter = \\\"{c}%\\\";\\r\\n                        }\\r\\n                    }\\r\\n                });\\r\\n                //格式化提示工具条内数据\\r\\n                this.percentLineOptions.tooltip.formatter = function (params, ticket, callback) {\\r\\n                    if (Object.prototype.toString.call(params) == '[object Array]') {\\r\\n                        let len = params.length;\\r\\n                        let retValue = params[0].name;\\r\\n                        for (var i = 0; i < len; i++) {\\r\\n                            retValue += '<br><span style=\\\"display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:' + params[i].color + '\\\"></span>' + params[i].seriesName + ' : ' + params[i].value + \\\"% \\\"\\r\\n                        }\\r\\n                        return retValue;\\r\\n                    }\\r\\n                };\\r\\n                //格式化y轴纵坐标刻度值\\r\\n                this.percentLineOptions.yAxis[0].axisLabel = {\\r\\n                    formatter: '{value} %'\\r\\n                };\\r\\n                //格式化tooltip的坐标轴指示器显示数值\\r\\n                this.percentLineOptions.tooltip.axisPointer.label = {\\r\\n//        \\tformatter:\\\"{value}%\\\"\\r\\n                    formatter: function (params) {\\r\\n                        if (typeof params.value === 'number') {\\r\\n                            return params.value.toFixed(2) + '%';\\r\\n                        } else {\\r\\n                            return `${params.value}`;\\r\\n                        }\\r\\n                    }\\r\\n                };\\r\\n            }, /**\\r\\n             * 查询\\r\\n             */\\r\\n            search(){\\r\\n                let {customType, category, attribute, dateRange, startWeek, endWeek, startMonth, endMonth, date} = this.searchParam;\\r\\n                let weeks = this.weeks;\\r\\n                let months = this.months;\\r\\n                let startWeekDate;\\r\\n                let startMonthDate;\\r\\n\\r\\n                let queryData = {};\\r\\n\\r\\n                if (!attribute) {\\r\\n                    this.$message('属性不能为空！');\\r\\n                    return;\\r\\n                }\\r\\n\\r\\n                switch (category) {\\r\\n                    case 1:\\r\\n                        if (!dateRange[0]) {\\r\\n                            this.$message('时间范围不能为空！');\\r\\n                            return;\\r\\n                        }\\r\\n                        queryData = {\\r\\n                            category: category,\\r\\n                            customType: customType,\\r\\n                            attribute: attribute,\\r\\n                            startDate: this.formatDate(dateRange[0], 'yyyy-MM-dd'),\\r\\n                            endDate: this.formatDate(dateRange[1], 'yyyy-MM-dd'),\\r\\n                        };\\r\\n                        //console.log(queryData);\\r\\n                        break;\\r\\n                    case 2:\\r\\n                        if (!startWeek) {\\r\\n                            this.$message('开始周不能为空！');\\r\\n                            return;\\r\\n                        }\\r\\n                        if (!endWeek) {\\r\\n                            this.$message('结束周不能为空！');\\r\\n                            return;\\r\\n                        }\\r\\n\\r\\n                        queryData = {\\r\\n                            category: category,\\r\\n                            customType: customType,\\r\\n                            attribute: attribute,\\r\\n                            startDate: this.getPreDay(startWeek, 1),\\r\\n                            endDate: this.getPreDay(endWeek, 1),\\r\\n//              startWeekNumber:getWeekNumber(startWeek),\\r\\n//              endWeekNumber:getWeekNumber(startWeek),\\r\\n                        };\\r\\n                        //console.log(queryData);\\r\\n                        break;\\r\\n                    case 3:\\r\\n                        if (!startMonth) {\\r\\n                            this.$message('开始月份不能为空！');\\r\\n                            return;\\r\\n                        }\\r\\n                        if (!endMonth) {\\r\\n                            this.$message('结束月份不能为空！');\\r\\n                            return;\\r\\n                        }\\r\\n                        //console.log(this.formatDate(startMonth, 'yyyy-MM-dd'));\\r\\n                        //console.log(this.formatDate(endMonth, 'yyyy-MM-dd'));\\r\\n                        queryData = {\\r\\n                            category: category,\\r\\n                            customType: customType,\\r\\n                            attribute: attribute,\\r\\n                            startDate: this.formatDate(startMonth, 'yyyy-MM-dd'),\\r\\n                            endDate: this.formatDate(endMonth, 'yyyy-MM-dd'),\\r\\n                        };\\r\\n                        //console.log(queryData);\\r\\n                        break;\\r\\n                    case 4:\\r\\n                        if (!date) {\\r\\n                            this.$message('比较基础日期不能为空！');\\r\\n                            return;\\r\\n                        }\\r\\n                        if (!weeks) {\\r\\n                            this.$message('请选择往前同期的周数！');\\r\\n                            return;\\r\\n                        }\\r\\n                        //console.log('周同期', date, -weeks * 7);\\r\\n                        startWeekDate = this.getDate(date, -weeks * 7);\\r\\n                        queryData = {\\r\\n                            category: category,\\r\\n                            customType: customType,\\r\\n                            attribute: attribute,\\r\\n                            startDate: startWeekDate,\\r\\n                            endDate: this.formatDate(date, 'yyyy-MM-dd'),\\r\\n                        };\\r\\n                        //console.log(queryData);\\r\\n                        break;\\r\\n                    case 5:\\r\\n                        if (!date) {\\r\\n                            this.$message('比较基础日期不能为空！');\\r\\n                            return;\\r\\n                        }\\r\\n                        if (!months) {\\r\\n                            this.$message('请选择往前同期的月数！');\\r\\n                            return;\\r\\n                        }\\r\\n                        //console.log('月同期', date, months);\\r\\n                        startMonthDate = this.getPreMonthDay(date, months);\\r\\n                        queryData = {\\r\\n                            category: category,\\r\\n                            customType: customType,\\r\\n                            attribute: attribute,\\r\\n                            startDate: startMonthDate,\\r\\n                            endDate: this.formatDate(date, 'yyyy-MM-dd'),\\r\\n                        };\\r\\n                        //console.log(queryData);\\r\\n                        break;\\r\\n                    default:\\r\\n                        break;\\r\\n                }\\r\\n                //根据查询客群类别和属性更新图表title\\r\\n                //this.setTitle(customerType, attribute);\\r\\n\\r\\n//                if(this.chartType =='series'){\\r\\n//                    if(seriesStep){\\r\\n//                    queryData.step = seriesStep;\\r\\n//                  }else{\\r\\n//                    this.$message('请设定统计的划分刻度值！');\\r\\n//                    return;\\r\\n//                  }\\r\\n//                }\\r\\n\\r\\n                this.$refs.line.showLoading({\\r\\n                    text: '正在加载',\\r\\n                    color: '#4ea397',\\r\\n                    maskColor: 'rgba(255, 255, 255, 0.4)'\\r\\n                });\\r\\n\\r\\n                Common.ajax({\\r\\n                    url: \\\"/web/v1/statistic/query\\\",\\r\\n                    type: 'post',\\r\\n                    contentType: \\\"application/json\\\",\\r\\n                    data: queryData,\\r\\n                    success: (response) => {\\r\\n                        this.$refs.line.hideLoading();\\r\\n                        let resData;\\r\\n                        this.clearLine();\\r\\n                        if (response.data && response.data.list) {\\r\\n                            resData = response.data;\\r\\n                            if (!response.status) {\\r\\n                                if (this.chartType == 'hash') {\\r\\n                                    this.setOptions(resData.categories, resData.dates);\\r\\n                                    resData.list.forEach((item, index, arr) => {\\r\\n                                        let idx = this.lineGroup[item.category];\\r\\n                                        let dataIdx = this.line.xAxis[0].data.indexOf(item.date);\\r\\n                                        this.line.series[idx].data[dataIdx] = item.value;\\r\\n//                                      //console.log('idx:',idx,'dataIdx:',dataIdx,item.value,this.percentSeriesArr);\\r\\n                                        //保存为切换百分比模式处理数据\\r\\n                                        this.extractPercentSeriesArr(dataIdx, item);\\r\\n//                                      //console.log('this.percentSeriesArr',this.percentSeriesArr);\\r\\n                                    });\\r\\n\\r\\n                                    //格式化周和月的横坐标显示\\r\\n                                    this.formatHashxAxisData(category);\\r\\n\\r\\n                                    //设置百分比模式的配置options\\r\\n                                    this.setPercentOptions();\\r\\n\\r\\n                                } else {\\r\\n                                    this.setOptions(resData.dates, resData.categories, category);\\r\\n                                    resData.list.forEach((item, index, arr) => {\\r\\n                                        let idx = this.lineGroup[this.formatSeriesAndLegend(category, item.date)];\\r\\n                                        let dataIdx = this.line.xAxis[0].data.indexOf(item.category);\\r\\n                                        this.line.series[idx].data[dataIdx] = item.value;\\r\\n                                    });\\r\\n                                    //this.formatSeriesxAxisData(category);\\r\\n                                }\\r\\n                            }\\r\\n                        }\\r\\n                    },\\r\\n                    error: (err) => {\\r\\n                        this.$refs.line.hideLoading();\\r\\n                        let error = err.message || err;\\r\\n                        Notification.error({\\r\\n                            title: '错误',\\r\\n                            message: error\\r\\n                        });\\r\\n                    },\\r\\n                });\\r\\n            },\\r\\n            handleClick(tab, event) {\\r\\n                let index = tab.index;\\r\\n                if (index == 0) {\\r\\n                    this.activeName = 'first';\\r\\n                }\\r\\n            },\\r\\n            handleCategoryChange(value){\\r\\n                console.dir(this.searchParam);\\r\\n            },\\r\\n            handleAttributeChange(value){\\r\\n\\r\\n                //根据属性更换对应图形类型\\r\\n                if (this.hashes.indexOf(value) >= 0) {\\r\\n                    this.chartType = 'hash';\\r\\n                } else {\\r\\n                    this.chartType = 'series';\\r\\n                }\\r\\n                //console.log('attribute:', value, this.hashes, this.chartType);\\r\\n                this.showPercent = false;\\r\\n            },\\r\\n            switchPercent(value){\\r\\n              if(!this.percentLineOptions.series){\\r\\n                this.$message('请重新查询后再切换百分比模式！');\\r\\n                this.clearLine();\\r\\n              \\treturn;\\r\\n\\r\\n              }\\r\\n            \\tif(!this.line.series.length) return;\\r\\n                if (value) {\\r\\n                    this.noPercentOptions = deepcopy(this.line);\\r\\n                    this.line = this.percentLineOptions;\\r\\n                } else {\\r\\n                    this.line = this.noPercentOptions;\\r\\n                }\\r\\n            },\\r\\n        },\\r\\n        created(){\\r\\n\\r\\n        },\\r\\n        mounted(){\\r\\n            let cvHeight = $('.contents').height() - 180;\\r\\n            $('.chartClass').css('height', cvHeight)//.find('canvas').css('height',cvHeight).parent('div').css('height',cvHeight);\\r\\n            //调用echarts实例resize函数\\r\\n            this.$refs.line.resize();\\r\\n\\r\\n            let line = this.$refs.line;\\r\\n            line.showLoading({\\r\\n                text: '正在加载',\\r\\n                color: '#4ea397',\\r\\n                maskColor: 'rgba(255, 255, 255, 0.4)'\\r\\n            });\\r\\n//            this.getCustomerTypes();\\r\\n//          this.getDevices();\\r\\n            this.getAttributes();\\r\\n            //this.search();\\r\\n            line.hideLoading();\\r\\n        },\\r\\n        beforeDestroy(){\\r\\n        \\tthis.clearLine();\\r\\n        },\\r\\n        watch: {\\r\\n            weeks: function (value, oldValue) {\\r\\n                function isInteger(obj) {\\r\\n                    return parseInt(obj, 10) === obj\\r\\n                }\\r\\n\\r\\n                if (!isInteger(value)) {\\r\\n                    this.$refs.weeks.setCurrentValue(parseInt(value, 10));\\r\\n                }\\r\\n            },\\r\\n            months: function (value, oldValue) {\\r\\n                function isInteger(obj) {\\r\\n                    return parseInt(obj, 10) === obj\\r\\n                }\\r\\n\\r\\n                if (!isInteger(value)) {\\r\\n                    this.$refs.months.setCurrentValue(parseInt(value, 10));\\r\\n                }\\r\\n\\r\\n            }\\r\\n        },\\r\\n    }\\r\\n</script>\\r\\n\"]}]);\n"],"sourceRoot":""}