(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{1052:function(e,n,r){"use strict";r.r(n);var t=r(11),a=r.n(t),l=(r(2),r(1)),i=r(9),o=r(8),s={components:{DataTable:i.a,TabPage:o.a},data:function(){return{deviceCheckAll:!1,deviceOptions:[{value:"iOS",label:"iOS"},{value:"Android",label:"Android"}],ksjkOptions:[{value:"是",label:"是"},{value:"否",label:"否"}],initBeginTime:"",initEndTime:"",queryParams:{isksjk:"",device:"",beginTime:"",endTime:""},dataTable:{pageSize:50,pageSizes:[10,20,50,100,1e3,5e3,1e4,2e4],url:"/web/v1/market/queryH5",emptyText:"没有记录",showSummary:!0,summaryMethod:this.getSummaries},hiddenColumns:[],columnsOptions:[{value:"date",label:"date"},{value:"plat",label:"plat"},{value:"ksjk_existing",label:"ksjk_existing"},{value:"uv",label:"uv"},{value:"phones_count",label:"phones_count"},{value:"register_count",label:"register_count"},{value:"activation_count",label:"activation_count"},{value:"jinjian",label:"jinjian"},{value:"approval",label:"approval"},{value:"emitCn",label:"emitCn"},{value:"emitMoney",label:"emitMoney"},{value:"act_reg_rate",label:"act_reg_rate"},{value:"jj_jh_rate",label:"jj_jh_rate"},{value:"review_jinj_rate",label:"review_jinj_rate"},{value:"jinjian_t7",label:"jinjian_t7"},{value:"approval_t7",label:"approval_t7"},{value:"emitCn_t7",label:"emitCn_t7"},{value:"emitMoney_t7",label:"emitMoney_t7"},{value:"review_jinj_rate",label:"review_jinj_rate"}]}},mounted:function(){this.dataTable.queryParams=this.queryParams;var e=new Date,n=new Date(e.setDate(e.getDate()-7));this.initBeginTime=this.dealDate(n),this.initEndTime=this.dealDate(new Date),this.dataTable.queryParams.beginTime=this.initBeginTime+" 00:00:00",this.dataTable.queryParams.endTime=this.initEndTime+" 23:59:59",this.$refs.tabPage.$emit("open-tab",{label:"H5总计",name:"h5Statistics",slotName:"h5Statistics",closable:!1})},methods:{loadLists:function(){this.$refs.dataTable.$emit("load-data")},onSubmit:function(){this.dataTable.queryParams=this.queryParams,this.warnTime(this.dataTable.queryParams.beginTime,this.dataTable.queryParams.endTime)||(this.dataTable.queryParams.beginTime=this.dealDate(this.dataTable.queryParams.beginTime)+" 00:00:00",this.dataTable.queryParams.endTime=this.dealDate(this.dataTable.queryParams.endTime)+" 23:59:59",this.dataTable.url="/web/v1/market/queryH5",this.$refs.dataTable.$emit("load-data"))},warnTime:function(e,n){return e?n?!!(new Date(e).getTime()>new Date(n).getTime())&&(this.$notify({message:"查询开始时间不能大于结束时间",type:"warning"}),!0):(this.$notify({message:"查询结束时间不能为空！",type:"warning"}),!0):(this.$notify({message:"查询开始时间不能为空！",type:"warning"}),!0)},dealTime:function(e){return Object(l.a)(new Date(e),"yyyy-MM-dd hh:mm:ss")},dealDate:function(e){return Object(l.a)(new Date(e),"yyyy-MM-dd")},formatterDate:function(e){return Object(l.a)(e.date,"yyyy-MM-dd")},getSummaries:function(e){var n=e.columns,r=e.data,t=[];return n.forEach(function(e,n){var a;0!==n?(a=13===n||14===n||15===n?r.map(function(n){if(null!==n[e.property])return+n[e.property].replace("%","")}):r.map(function(n){return+n[e.property]})).every(function(e){return isNaN(e)})?t[n]="N/A":(t[n]=a.reduce(function(e,n){return isNaN(+n)?e:e+n},0),(13===n||14===n||15===n)&&(t[n]=(t[n]/r.length).toFixed(2)+" %")):t[n]="总计"}),t},exportExcel:function(){var e=this,n={};a()(n,this.dataTable.queryParams),n.pageSize=this.$refs.dataTable.total,n.page=1,this.$refs.dataTable.$emit("export-data",n),Promise.all([r.e(0),r.e(2)]).then(function(){var n=r(1028).export_json_to_excel,t=["日期","T7进件","T7审核","T7放款","T7放款金额","uv","设备","快速借款用户","手机号","注册","激活","进件","审核","放款","放款金额","激活/注册","进件/激活","审核/进件","留手机号新用户"],a=["date","jinjian_t7","approval_t7","emitCn_t7","emitMoney_t7","uv","plat","ksjk_existing","phones_count","register_count","activation_count","jinjian","approval","emitCn","emitMoney","act_reg_rate","jj_jh_rate","review_jinj_rate","take_phone_new"];setTimeout(function(){var r=e.$refs.dataTable.dataListA,l=e.formatJson(a,r);n(t,l,"H5总计")},300)}.bind(null,r)).catch(r.oe)},formatJson:function(e,n){return n.map(function(n){return e.map(function(e){return"operator"===e?n[e].name:n[e]})})},checkAllSelection:function(e){for(var n=this.$refs[e].optionsCount,r=0;r<n;r++)!function(n,r){setTimeout(function(){r.$refs[e].handleOptionSelect(r.$refs[e].options[n])},0)}(r,this)},handleCheckAllDeviceChange:function(){this.checkAllSelection("deviceSelect"),this.deviceCheckAll=!this.deviceCheckAll},setCheckAllStyle:function(e,n){var r=n+"CheckAll",t=n+"Select";this[r]?e.length<this.$refs[t].optionsCount&&(this[r]=!this[r]):e.length===this.$refs[t].optionsCount&&(this[r]=!this[r])},deviceChange:function(e){this.setCheckAllStyle(e,"device")}}},m=(r(598),r(600),r(3)),u=Object(m.a)(s,function(){var e=this,n=e.$createElement,r=e._self._c||n;return r("div",[r("tab-page",{ref:"tabPage"},[r("template",{slot:"h5Statistics"},[r("data-table",{ref:"dataTable",attrs:{"data-table":e.dataTable}},[r("div",{staticStyle:{"margin-bottom":"15px"},attrs:{slot:"conditions"},slot:"conditions"},[r("el-form",{attrs:{inline:!0,model:e.queryParams}},[r("el-form-item",[r("el-date-picker",{staticStyle:{width:"170px"},attrs:{type:"date",placeholder:"选择日期时间",size:"small"},model:{value:e.queryParams.beginTime,callback:function(n){e.$set(e.queryParams,"beginTime",n)},expression:"queryParams.beginTime"}})],1),e._v(" "),r("span",{staticClass:"span-style"},[e._v("至")]),e._v(" "),r("el-form-item",[r("el-date-picker",{staticStyle:{width:"170px"},attrs:{type:"date",placeholder:"选择日期时间",size:"small"},model:{value:e.queryParams.endTime,callback:function(n){e.$set(e.queryParams,"endTime",n)},expression:"queryParams.endTime"}})],1),e._v(" "),r("el-form-item",[r("el-select",{attrs:{clearable:"",filterable:"",placeholder:"设备",size:"small"},model:{value:e.queryParams.device,callback:function(n){e.$set(e.queryParams,"device",n)},expression:"queryParams.device"}},e._l(e.deviceOptions,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),r("el-form-item",[r("el-select",{attrs:{clearable:"",filterable:"",placeholder:"快速借款",size:"small"},model:{value:e.queryParams.isksjk,callback:function(n){e.$set(e.queryParams,"isksjk",n)},expression:"queryParams.isksjk"}},e._l(e.ksjkOptions,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),r("el-form-item",[r("el-button",{staticStyle:{"margin-top":"0"},attrs:{type:"primary",size:"small"},on:{click:e.onSubmit}},[e._v("查询\n              ")])],1)],1),e._v(" "),r("el-button",{staticClass:"right mb-10",attrs:{type:"primary",size:"small",icon:"el-icon-document"},on:{click:e.exportExcel}},[e._v("导出excel\n          ")])],1),e._v(" "),r("template",{slot:"columns"},[r("el-table-column",{attrs:{type:"index",label:"序号",width:"60"}}),e._v(" "),r("el-table-column",{attrs:{sortable:"",prop:"date",label:"日期",width:"120"}}),e._v(" "),r("el-table-column",{attrs:{sortable:"",prop:"plat",label:"设备",width:"100"}}),e._v(" "),r("el-table-column",{attrs:{sortable:"",prop:"ksjk_existing",label:"快速借款用户",width:"120"}}),e._v(" "),r("el-table-column",{attrs:{sortable:"",prop:"uv",label:"uv"}}),e._v(" "),r("el-table-column",{attrs:{sortable:"",prop:"phones_count",label:"手机号"}}),e._v(" "),r("el-table-column",{attrs:{sortable:"",prop:"take_phone_new",label:"留手机号新用户"}}),e._v(" "),r("el-table-column",{attrs:{sortable:"",prop:"register_count",label:"注册"}}),e._v(" "),r("el-table-column",{attrs:{sortable:"",prop:"activation_count",label:"激活"}}),e._v(" "),r("el-table-column",{attrs:{sortable:"",prop:"jinjian",label:"当日进件"}}),e._v(" "),r("el-table-column",{attrs:{sortable:"",prop:"approval",label:"当日审核"}}),e._v(" "),r("el-table-column",{attrs:{sortable:"",prop:"emitCn",label:"当日放款"}}),e._v(" "),r("el-table-column",{attrs:{sortable:"",prop:"emitMoney",label:"放款金额"}}),e._v(" "),r("el-table-column",{attrs:{sortable:"",prop:"act_reg_rate",label:"激活/注册",width:"90"}}),e._v(" "),r("el-table-column",{attrs:{sortable:"",prop:"jj_jh_rate",label:"进件/激活",width:"90"}}),e._v(" "),r("el-table-column",{attrs:{sortable:"",prop:"review_jinj_rate",label:"审核/进件",width:"90"}}),e._v(" "),r("el-table-column",{attrs:{sortable:"",prop:"jinjian_t7",label:"T7进件"}}),e._v(" "),r("el-table-column",{attrs:{sortable:"",prop:"approval_t7",label:"T7审核"}}),e._v(" "),r("el-table-column",{attrs:{sortable:"",prop:"emitCn_t7",label:"T7放款"}}),e._v(" "),r("el-table-column",{attrs:{sortable:"",prop:"emitMoney_t7",label:"T7放款金额"}})],1)],2)],1)],2)],1)},[],!1,null,"7cdc00eb",null);n.default=u.exports},199:function(e,n,r){var t=r(599);"string"==typeof t&&(t=[[e.i,t,""]]),t.locals&&(e.exports=t.locals);(0,r(5).default)("354130c4",t,!0,{})},200:function(e,n,r){var t=r(601);"string"==typeof t&&(t=[[e.i,t,""]]),t.locals&&(e.exports=t.locals);(0,r(5).default)("07d32cb6",t,!0,{})},598:function(e,n,r){"use strict";var t=r(199);r.n(t).a},599:function(e,n,r){(e.exports=r(4)(!0)).push([e.i,"\n.el-form-item__content .el-button[data-v-7cdc00eb] {\n  margin-top: 20px;\n}\n.el-table--border th[data-v-7cdc00eb] {\n  text-align: center;\n}\n.el-table th .cell[data-v-7cdc00eb] {\n  text-align: center;\n}\n.el-form--inline .el-form-item[data-v-7cdc00eb] {\n  margin-right: 2px;\n}\n.el-form-item[data-v-7cdc00eb] {\n  margin-bottom: 2px;\n}\n.el-dialog__footer[data-v-7cdc00eb] {\n  padding: 10px 0px;\n  text-align: center;\n}\n.check-all-select[data-v-7cdc00eb] {\n  padding: 10px;\n}\n.check-all-select span.text-all[data-v-7cdc00eb] {\n  font-size: 14px;\n  font-weight: bold;\n}\n.check-all-select label[data-v-7cdc00eb] {\n  float: right;\n}\n.mb-10[data-v-7cdc00eb] {\n  margin-bottom: 10px;\n}\n","",{version:3,sources:["src/views/contents/market/h5Statistics.vue"],names:[],mappings:";AAiGA;EACA,gBAAA;AACA;AAEA;EACA,kBAAA;AACA;AAEA;EACA,kBAAA;AACA;AAEA;EACA,iBAAA;AACA;AAEA;EACA,kBAAA;AACA;AAEA;EACA,iBAAA;EACA,kBAAA;AACA;AAEA;EACA,aAAA;AACA;AAEA;EACA,eAAA;EACA,iBAAA;AACA;AAEA;EACA,YAAA;AACA;AAEA;EACA,mBAAA;AACA",file:"h5Statistics.vue?vue&type=style&index=0&id=7cdc00eb&scoped=true&lang=css&",sourcesContent:["<template>\r\n  <div>\r\n    <tab-page ref=\"tabPage\">\r\n      <template slot=\"h5Statistics\">\r\n        <data-table :data-table=\"dataTable\" ref=\"dataTable\">\r\n          <div slot=\"conditions\" style=\"margin-bottom:15px\">\r\n            <el-form :inline=\"true\" :model=\"queryParams\">\r\n              <el-form-item>\r\n                <el-date-picker\r\n                  v-model=\"queryParams.beginTime\"\r\n                  type=\"date\"\r\n                  placeholder=\"选择日期时间\" size=\"small\" style=\"width:170px\">\r\n                </el-date-picker>\r\n              </el-form-item>\r\n              <span class=\"span-style\">至</span>\r\n              <el-form-item>\r\n                <el-date-picker\r\n                  v-model=\"queryParams.endTime\"\r\n                  type=\"date\"\r\n                  placeholder=\"选择日期时间\" size=\"small\" style=\"width:170px\">\r\n                </el-date-picker>\r\n              </el-form-item>\r\n\r\n              <el-form-item>\r\n\r\n                <el-select v-model=\"queryParams.device\" clearable filterable placeholder=\"设备\"\r\n                           size=\"small\">\r\n                  <el-option\r\n                    v-for=\"item in deviceOptions\"\r\n                    :key=\"item.value\"\r\n                    :label=\"item.label\"\r\n                    :value=\"item.value\">\r\n                  </el-option>\r\n                </el-select>\r\n              </el-form-item>\r\n              <el-form-item>\r\n                <el-select v-model=\"queryParams.isksjk\" clearable filterable placeholder=\"快速借款\"\r\n                           size=\"small\">\r\n                  <el-option\r\n                    v-for=\"item in ksjkOptions\"\r\n                    :key=\"item.value\"\r\n                    :label=\"item.label\"\r\n                    :value=\"item.value\">\r\n                  </el-option>\r\n                </el-select>\r\n              </el-form-item>\r\n              \x3c!--<el-form-item>--\x3e\r\n                \x3c!--<el-select v-model=\"hiddenColumns\" multiple clearable filterable placeholder=\"隐藏列\"--\x3e\r\n                           \x3c!--size=\"small\">--\x3e\r\n                  \x3c!--<el-option--\x3e\r\n                    \x3c!--v-for=\"item in columnsOptions\"--\x3e\r\n                    \x3c!--:key=\"item.value\"--\x3e\r\n                    \x3c!--:label=\"item.label\"--\x3e\r\n                    \x3c!--:value=\"item.value\">--\x3e\r\n                  \x3c!--</el-option>--\x3e\r\n                \x3c!--</el-select>--\x3e\r\n              \x3c!--</el-form-item>--\x3e\r\n              <el-form-item>\r\n                <el-button type=\"primary\" @click=\"onSubmit\" size=\"small\" style=\"margin-top:0\">查询\r\n                </el-button>\r\n              </el-form-item>\r\n            </el-form>\r\n            <el-button class=\"right mb-10\" type=\"primary\" size=\"small\" icon=\"el-icon-document\"\r\n                       @click=\"exportExcel\">导出excel\r\n            </el-button>\r\n          </div>\r\n          <template slot=\"columns\">\r\n            <el-table-column type=\"index\" label=\"序号\" width=\"60\"></el-table-column>\r\n            <el-table-column sortable prop=\"date\" label=\"日期\" width=\"120\" ></el-table-column>\r\n\r\n            <el-table-column sortable prop=\"plat\" label=\"设备\" width=\"100\"></el-table-column>\r\n            <el-table-column sortable prop=\"ksjk_existing\" label=\"快速借款用户\" width=\"120\"></el-table-column>\r\n            <el-table-column sortable prop=\"uv\" label=\"uv\"></el-table-column>\r\n            <el-table-column sortable prop=\"phones_count\" label=\"手机号\"></el-table-column>\r\n            <el-table-column sortable prop=\"take_phone_new\" label=\"留手机号新用户\" ></el-table-column>\r\n            <el-table-column sortable prop=\"register_count\" label=\"注册\"></el-table-column>\r\n            <el-table-column sortable prop=\"activation_count\" label=\"激活\"></el-table-column>\r\n\r\n            <el-table-column sortable prop=\"jinjian\" label=\"当日进件\"></el-table-column>\r\n            <el-table-column sortable prop=\"approval\" label=\"当日审核\"></el-table-column>\r\n            <el-table-column sortable prop=\"emitCn\" label=\"当日放款\"></el-table-column>\r\n            <el-table-column sortable prop=\"emitMoney\" label=\"放款金额\"></el-table-column>\r\n            <el-table-column sortable prop=\"act_reg_rate\" label=\"激活/注册\" width=\"90\"></el-table-column>\r\n            <el-table-column sortable prop=\"jj_jh_rate\" label=\"进件/激活\" width=\"90\"></el-table-column>\r\n            <el-table-column sortable prop=\"review_jinj_rate\" label=\"审核/进件\" width=\"90\"></el-table-column>\r\n            <el-table-column sortable prop=\"jinjian_t7\" label=\"T7进件\" ></el-table-column>\r\n            <el-table-column sortable prop=\"approval_t7\" label=\"T7审核\" ></el-table-column>\r\n            <el-table-column sortable prop=\"emitCn_t7\" label=\"T7放款\" ></el-table-column>\r\n            <el-table-column sortable prop=\"emitMoney_t7\" label=\"T7放款金额\" ></el-table-column>\r\n\r\n          </template>\r\n        </data-table>\r\n      </template>\r\n    </tab-page>\r\n  </div>\r\n</template>\r\n<style scoped>\r\n  .el-form-item__content .el-button {\r\n    margin-top: 20px;\r\n  }\r\n\r\n  .el-table--border th {\r\n    text-align: center;\r\n  }\r\n\r\n  .el-table th .cell {\r\n    text-align: center;\r\n  }\r\n\r\n  .el-form--inline .el-form-item {\r\n    margin-right: 2px;\r\n  }\r\n\r\n  .el-form-item {\r\n    margin-bottom: 2px;\r\n  }\r\n\r\n  .el-dialog__footer {\r\n    padding: 10px 0px;\r\n    text-align: center;\r\n  }\r\n\r\n  .check-all-select {\r\n    padding: 10px;\r\n  }\r\n\r\n  .check-all-select span.text-all {\r\n    font-size: 14px;\r\n    font-weight: bold;\r\n  }\r\n\r\n  .check-all-select label {\r\n    float: right;\r\n  }\r\n\r\n  .mb-10 {\r\n    margin-bottom: 10px;\r\n  }\r\n</style>\r\n<script>\r\n  import common from '../../../utils/common'\r\n  import formatDate from '../../../utils/formatDate'\r\n  import DataTable from \"../../../components/DataTable\"\r\n  import TabPage from \"../../../components/TabPage\"\r\n  export default{\r\n    components: {\r\n      DataTable,\r\n      TabPage,\r\n    },\r\n    data(){\r\n      return {\r\n        deviceCheckAll: false,\r\n        deviceOptions: [\r\n          {\r\n            value: 'iOS',\r\n            label: 'iOS'\r\n          },\r\n          {\r\n            value: 'Android',\r\n            label: 'Android'\r\n          }\r\n        ],\r\n        ksjkOptions: [\r\n          {\r\n            value: '是',\r\n            label: '是'\r\n          },\r\n          {\r\n            value: '否',\r\n            label: '否'\r\n          }\r\n        ],\r\n        initBeginTime: '',\r\n        initEndTime: '',\r\n\r\n        queryParams: {\r\n          isksjk: '',\r\n          device: '',\r\n          beginTime: '',\r\n          endTime: '',\r\n        },\r\n        dataTable: {\r\n          pageSize: 50,\r\n          pageSizes: [10, 20, 50, 100, 1000,5000,10000,20000],\r\n          url: '/web/v1/market/queryH5',\r\n          emptyText: '没有记录',\r\n          showSummary: true,\r\n          summaryMethod: this.getSummaries,\r\n        },\r\n        hiddenColumns: [],\r\n        columnsOptions: [{\r\n            value: 'date',\r\n            label: 'date'\r\n          },\r\n          {\r\n            value: 'plat',\r\n            label: 'plat'\r\n          },\r\n          {\r\n            value: 'ksjk_existing',\r\n            label: 'ksjk_existing'\r\n          },\r\n          {\r\n            value: 'uv',\r\n            label: 'uv'\r\n          },\r\n          {\r\n            value: 'phones_count',\r\n            label: 'phones_count'\r\n          },\r\n          {\r\n            value: 'register_count',\r\n            label: 'register_count'\r\n          },\r\n          {\r\n            value: 'activation_count',\r\n            label: 'activation_count'\r\n          },\r\n          {\r\n            value: 'jinjian',\r\n            label: 'jinjian'\r\n          },\r\n          {\r\n            value: 'approval',\r\n            label: 'approval'\r\n          },\r\n          {\r\n            value: 'emitCn',\r\n            label: 'emitCn'\r\n          },\r\n          {\r\n            value: 'emitMoney',\r\n            label: 'emitMoney'\r\n          },\r\n          {\r\n            value: 'act_reg_rate',\r\n            label: 'act_reg_rate'\r\n          },\r\n          {\r\n            value: 'jj_jh_rate',\r\n            label: 'jj_jh_rate'\r\n          },\r\n          {\r\n            value: 'review_jinj_rate',\r\n            label: 'review_jinj_rate'\r\n          },\r\n          {\r\n            value: 'jinjian_t7',\r\n            label: 'jinjian_t7'\r\n          },\r\n          {\r\n            value: 'approval_t7',\r\n            label: 'approval_t7'\r\n          },\r\n          {\r\n            value: 'emitCn_t7',\r\n            label: 'emitCn_t7'\r\n          },\r\n          {\r\n            value: 'emitMoney_t7',\r\n            label: 'emitMoney_t7'\r\n          },\r\n          {\r\n            value: 'review_jinj_rate',\r\n            label: 'review_jinj_rate'\r\n          },\r\n        ],\r\n      }\r\n    },\r\n    mounted(){\r\n      this.dataTable.queryParams = this.queryParams;\r\n      let date = new Date();\r\n      let beginDate = new Date(date.setDate(date.getDate() - 7));\r\n      this.initBeginTime = this.dealDate(beginDate);\r\n      this.initEndTime = this.dealDate(new Date());\r\n      this.dataTable.queryParams.beginTime = this.initBeginTime + ' 00:00:00';\r\n      this.dataTable.queryParams.endTime = this.initEndTime + ' 23:59:59';\r\n\r\n      var defaultPage = {label: \"H5总计\", name: \"h5Statistics\", slotName: 'h5Statistics', closable: false};\r\n      this.$refs.tabPage.$emit(\"open-tab\", defaultPage);\r\n\r\n    },\r\n    methods: {\r\n\r\n      loadLists(){\r\n        this.$refs.dataTable.$emit('load-data');\r\n      },\r\n      onSubmit: function () {\r\n        this.dataTable.queryParams = this.queryParams;\r\n        var tag = this.warnTime(this.dataTable.queryParams.beginTime, this.dataTable.queryParams.endTime);\r\n        if (tag) {\r\n          return;\r\n        }\r\n        //console.log(Object.prototype.toString.call(this.dataTable.queryParams.beginTime));\r\n        this.dataTable.queryParams.beginTime = this.dealDate(this.dataTable.queryParams.beginTime) + ' 00:00:00';\r\n        this.dataTable.queryParams.endTime = this.dealDate(this.dataTable.queryParams.endTime) + ' 23:59:59';\r\n        this.dataTable.url = '/web/v1/market/queryH5';\r\n        this.$refs.dataTable.$emit('load-data');\r\n      },\r\n      warnTime(startTime, endTime){\r\n        if (!startTime) {\r\n          this.$notify({\r\n            message: '查询开始时间不能为空！',\r\n            type: 'warning'\r\n          });\r\n          return true;\r\n        }\r\n        if (!endTime) {\r\n          this.$notify({\r\n            message: '查询结束时间不能为空！',\r\n            type: 'warning'\r\n          });\r\n          return true;\r\n        }\r\n        let timeStart = new Date(startTime).getTime();\r\n        let timeEnd = new Date(endTime).getTime();\r\n        if (timeStart > timeEnd) {\r\n          this.$notify({\r\n            message: '查询开始时间不能大于结束时间',\r\n            type: 'warning'\r\n          });\r\n          return true;\r\n        }\r\n        return false;\r\n      },\r\n      dealTime(time){\r\n        return formatDate(new Date(time), 'yyyy-MM-dd hh:mm:ss');\r\n      },\r\n      dealDate(date){\r\n        return formatDate(new Date(date), 'yyyy-MM-dd');\r\n      },\r\n      formatterDate(row, column){\r\n        return formatDate(row.date, 'yyyy-MM-dd');\r\n      },\r\n      getSummaries (param) {\r\n        const {columns, data} = param;\r\n        const sums = [];\r\n        columns.forEach((column, index) => {\r\n          if (index === 0) {\r\n            sums[index] = '总计';\r\n            return;\r\n          }\r\n          var values;\r\n          if(index === 13||index === 14||index === 15){\r\n             values = data.map(item =>{\r\n               if(item[column.property]!==null){\r\n                 return Number(item[column.property].replace('%',''));\r\n               }\r\n             });\r\n          }else{\r\n            values = data.map(item => Number(item[column.property]));\r\n          }\r\n\r\n          if (!values.every(value => isNaN(value))) {\r\n            sums[index] = values.reduce((prev, curr) => {\r\n              const value = Number(curr);\r\n              if (!isNaN(value)) {\r\n                return prev + curr;\r\n              } else {\r\n                return prev;\r\n              }\r\n            }, 0);\r\n           if(index === 13||index === 14||index === 15){\r\n              sums[index]=(sums[index]/data.length).toFixed(2)+ ' %';\r\n            }\r\n            //sums[index] += ' 元';\r\n          } else {\r\n            sums[index] = 'N/A';\r\n          }\r\n        });\r\n\r\n        return sums;\r\n      },\r\n\r\n      exportExcel() {\r\n        let self=this;\r\n        var exportParams = {};\r\n        Object.assign(exportParams, this.dataTable.queryParams);\r\n        exportParams.pageSize = this.$refs.dataTable.total;\r\n        exportParams.page = 1;\r\n        this.$refs.dataTable.$emit('export-data',exportParams);\r\n        require.ensure([], () => {\r\n          const {export_json_to_excel} = require('vendor/Export2Excel');\r\n          const tHeader = ['日期',\r\n            'T7进件',\r\n            'T7审核',\r\n            'T7放款',\r\n            'T7放款金额',\r\n            'uv', '设备', '快速借款用户', '手机号', '注册', '激活', '进件', '审核', '放款', '放款金额', '激活/注册','进件/激活', '审核/进件', '留手机号新用户'];\r\n          const filterVal = ['date',\r\n            'jinjian_t7',\r\n            'approval_t7',\r\n            'emitCn_t7',\r\n            'emitMoney_t7',\r\n            'uv', 'plat', 'ksjk_existing', 'phones_count', 'register_count', 'activation_count', 'jinjian', 'approval', 'emitCn', 'emitMoney', 'act_reg_rate', 'jj_jh_rate', 'review_jinj_rate', 'take_phone_new'];\r\n          setTimeout(() => {\r\n            const list = this.$refs.dataTable.dataListA;\r\n            const data = this.formatJson(filterVal, list);\r\n            export_json_to_excel(tHeader, data, 'H5总计');\r\n          }, 300);\r\n\r\n        })\r\n      },\r\n      formatJson(filterVal, jsonData) {\r\n        return jsonData.map(v => filterVal.map(j => {\r\n          let returnValue;\r\n          if (j === 'operator') {\r\n            returnValue = v[j].name;\r\n          } else {\r\n            returnValue = v[j];\r\n          }\r\n          return returnValue;\r\n        }))\r\n      },\r\n\r\n      checkAllSelection(selectType){\r\n        let len = this.$refs[selectType].optionsCount;\r\n        for (var i = 0; i < len; i++) {\r\n          (function (index, _this) {\r\n            setTimeout(() => {\r\n              _this.$refs[selectType].handleOptionSelect(_this.$refs[selectType].options[index]);\r\n            }, 0);\r\n\r\n          })(i, this);\r\n        }\r\n        ;\r\n      },\r\n      handleCheckAllDeviceChange(event) {\r\n        this.checkAllSelection(\"deviceSelect\");\r\n        this.deviceCheckAll = !this.deviceCheckAll;\r\n      },\r\n      setCheckAllStyle(selectedCount, selectType){\r\n        let type = selectType + 'CheckAll'\r\n        let type_1 = selectType + 'Select'\r\n        if (this[type]) {\r\n          if (selectedCount.length < this.$refs[type_1].optionsCount) {\r\n            this[type] = !this[type];\r\n          }\r\n        } else {\r\n          if (selectedCount.length === this.$refs[type_1].optionsCount) {\r\n            this[type] = !this[type];\r\n          }\r\n        }\r\n      },\r\n      deviceChange(values){\r\n        this.setCheckAllStyle(values, \"device\");\r\n      },\r\n\r\n    },\r\n  }\r\n<\/script>\r\n<style>\r\n  .span-style {\r\n    display: inline-block;\r\n    margin-top: 8px;\r\n    font-size: 14px;\r\n  }\r\n</style>\r\n"]}])},600:function(e,n,r){"use strict";var t=r(200);r.n(t).a},601:function(e,n,r){(e.exports=r(4)(!0)).push([e.i,"\n.span-style {\n  display: inline-block;\n  margin-top: 8px;\n  font-size: 14px;\n}\n","",{version:3,sources:["src/views/contents/market/h5Statistics.vue"],names:[],mappings:";AAocA;EACA,qBAAA;EACA,eAAA;EACA,eAAA;AACA",file:"h5Statistics.vue?vue&type=style&index=1&lang=css&",sourcesContent:["<template>\r\n  <div>\r\n    <tab-page ref=\"tabPage\">\r\n      <template slot=\"h5Statistics\">\r\n        <data-table :data-table=\"dataTable\" ref=\"dataTable\">\r\n          <div slot=\"conditions\" style=\"margin-bottom:15px\">\r\n            <el-form :inline=\"true\" :model=\"queryParams\">\r\n              <el-form-item>\r\n                <el-date-picker\r\n                  v-model=\"queryParams.beginTime\"\r\n                  type=\"date\"\r\n                  placeholder=\"选择日期时间\" size=\"small\" style=\"width:170px\">\r\n                </el-date-picker>\r\n              </el-form-item>\r\n              <span class=\"span-style\">至</span>\r\n              <el-form-item>\r\n                <el-date-picker\r\n                  v-model=\"queryParams.endTime\"\r\n                  type=\"date\"\r\n                  placeholder=\"选择日期时间\" size=\"small\" style=\"width:170px\">\r\n                </el-date-picker>\r\n              </el-form-item>\r\n\r\n              <el-form-item>\r\n\r\n                <el-select v-model=\"queryParams.device\" clearable filterable placeholder=\"设备\"\r\n                           size=\"small\">\r\n                  <el-option\r\n                    v-for=\"item in deviceOptions\"\r\n                    :key=\"item.value\"\r\n                    :label=\"item.label\"\r\n                    :value=\"item.value\">\r\n                  </el-option>\r\n                </el-select>\r\n              </el-form-item>\r\n              <el-form-item>\r\n                <el-select v-model=\"queryParams.isksjk\" clearable filterable placeholder=\"快速借款\"\r\n                           size=\"small\">\r\n                  <el-option\r\n                    v-for=\"item in ksjkOptions\"\r\n                    :key=\"item.value\"\r\n                    :label=\"item.label\"\r\n                    :value=\"item.value\">\r\n                  </el-option>\r\n                </el-select>\r\n              </el-form-item>\r\n              \x3c!--<el-form-item>--\x3e\r\n                \x3c!--<el-select v-model=\"hiddenColumns\" multiple clearable filterable placeholder=\"隐藏列\"--\x3e\r\n                           \x3c!--size=\"small\">--\x3e\r\n                  \x3c!--<el-option--\x3e\r\n                    \x3c!--v-for=\"item in columnsOptions\"--\x3e\r\n                    \x3c!--:key=\"item.value\"--\x3e\r\n                    \x3c!--:label=\"item.label\"--\x3e\r\n                    \x3c!--:value=\"item.value\">--\x3e\r\n                  \x3c!--</el-option>--\x3e\r\n                \x3c!--</el-select>--\x3e\r\n              \x3c!--</el-form-item>--\x3e\r\n              <el-form-item>\r\n                <el-button type=\"primary\" @click=\"onSubmit\" size=\"small\" style=\"margin-top:0\">查询\r\n                </el-button>\r\n              </el-form-item>\r\n            </el-form>\r\n            <el-button class=\"right mb-10\" type=\"primary\" size=\"small\" icon=\"el-icon-document\"\r\n                       @click=\"exportExcel\">导出excel\r\n            </el-button>\r\n          </div>\r\n          <template slot=\"columns\">\r\n            <el-table-column type=\"index\" label=\"序号\" width=\"60\"></el-table-column>\r\n            <el-table-column sortable prop=\"date\" label=\"日期\" width=\"120\" ></el-table-column>\r\n\r\n            <el-table-column sortable prop=\"plat\" label=\"设备\" width=\"100\"></el-table-column>\r\n            <el-table-column sortable prop=\"ksjk_existing\" label=\"快速借款用户\" width=\"120\"></el-table-column>\r\n            <el-table-column sortable prop=\"uv\" label=\"uv\"></el-table-column>\r\n            <el-table-column sortable prop=\"phones_count\" label=\"手机号\"></el-table-column>\r\n            <el-table-column sortable prop=\"take_phone_new\" label=\"留手机号新用户\" ></el-table-column>\r\n            <el-table-column sortable prop=\"register_count\" label=\"注册\"></el-table-column>\r\n            <el-table-column sortable prop=\"activation_count\" label=\"激活\"></el-table-column>\r\n\r\n            <el-table-column sortable prop=\"jinjian\" label=\"当日进件\"></el-table-column>\r\n            <el-table-column sortable prop=\"approval\" label=\"当日审核\"></el-table-column>\r\n            <el-table-column sortable prop=\"emitCn\" label=\"当日放款\"></el-table-column>\r\n            <el-table-column sortable prop=\"emitMoney\" label=\"放款金额\"></el-table-column>\r\n            <el-table-column sortable prop=\"act_reg_rate\" label=\"激活/注册\" width=\"90\"></el-table-column>\r\n            <el-table-column sortable prop=\"jj_jh_rate\" label=\"进件/激活\" width=\"90\"></el-table-column>\r\n            <el-table-column sortable prop=\"review_jinj_rate\" label=\"审核/进件\" width=\"90\"></el-table-column>\r\n            <el-table-column sortable prop=\"jinjian_t7\" label=\"T7进件\" ></el-table-column>\r\n            <el-table-column sortable prop=\"approval_t7\" label=\"T7审核\" ></el-table-column>\r\n            <el-table-column sortable prop=\"emitCn_t7\" label=\"T7放款\" ></el-table-column>\r\n            <el-table-column sortable prop=\"emitMoney_t7\" label=\"T7放款金额\" ></el-table-column>\r\n\r\n          </template>\r\n        </data-table>\r\n      </template>\r\n    </tab-page>\r\n  </div>\r\n</template>\r\n<style scoped>\r\n  .el-form-item__content .el-button {\r\n    margin-top: 20px;\r\n  }\r\n\r\n  .el-table--border th {\r\n    text-align: center;\r\n  }\r\n\r\n  .el-table th .cell {\r\n    text-align: center;\r\n  }\r\n\r\n  .el-form--inline .el-form-item {\r\n    margin-right: 2px;\r\n  }\r\n\r\n  .el-form-item {\r\n    margin-bottom: 2px;\r\n  }\r\n\r\n  .el-dialog__footer {\r\n    padding: 10px 0px;\r\n    text-align: center;\r\n  }\r\n\r\n  .check-all-select {\r\n    padding: 10px;\r\n  }\r\n\r\n  .check-all-select span.text-all {\r\n    font-size: 14px;\r\n    font-weight: bold;\r\n  }\r\n\r\n  .check-all-select label {\r\n    float: right;\r\n  }\r\n\r\n  .mb-10 {\r\n    margin-bottom: 10px;\r\n  }\r\n</style>\r\n<script>\r\n  import common from '../../../utils/common'\r\n  import formatDate from '../../../utils/formatDate'\r\n  import DataTable from \"../../../components/DataTable\"\r\n  import TabPage from \"../../../components/TabPage\"\r\n  export default{\r\n    components: {\r\n      DataTable,\r\n      TabPage,\r\n    },\r\n    data(){\r\n      return {\r\n        deviceCheckAll: false,\r\n        deviceOptions: [\r\n          {\r\n            value: 'iOS',\r\n            label: 'iOS'\r\n          },\r\n          {\r\n            value: 'Android',\r\n            label: 'Android'\r\n          }\r\n        ],\r\n        ksjkOptions: [\r\n          {\r\n            value: '是',\r\n            label: '是'\r\n          },\r\n          {\r\n            value: '否',\r\n            label: '否'\r\n          }\r\n        ],\r\n        initBeginTime: '',\r\n        initEndTime: '',\r\n\r\n        queryParams: {\r\n          isksjk: '',\r\n          device: '',\r\n          beginTime: '',\r\n          endTime: '',\r\n        },\r\n        dataTable: {\r\n          pageSize: 50,\r\n          pageSizes: [10, 20, 50, 100, 1000,5000,10000,20000],\r\n          url: '/web/v1/market/queryH5',\r\n          emptyText: '没有记录',\r\n          showSummary: true,\r\n          summaryMethod: this.getSummaries,\r\n        },\r\n        hiddenColumns: [],\r\n        columnsOptions: [{\r\n            value: 'date',\r\n            label: 'date'\r\n          },\r\n          {\r\n            value: 'plat',\r\n            label: 'plat'\r\n          },\r\n          {\r\n            value: 'ksjk_existing',\r\n            label: 'ksjk_existing'\r\n          },\r\n          {\r\n            value: 'uv',\r\n            label: 'uv'\r\n          },\r\n          {\r\n            value: 'phones_count',\r\n            label: 'phones_count'\r\n          },\r\n          {\r\n            value: 'register_count',\r\n            label: 'register_count'\r\n          },\r\n          {\r\n            value: 'activation_count',\r\n            label: 'activation_count'\r\n          },\r\n          {\r\n            value: 'jinjian',\r\n            label: 'jinjian'\r\n          },\r\n          {\r\n            value: 'approval',\r\n            label: 'approval'\r\n          },\r\n          {\r\n            value: 'emitCn',\r\n            label: 'emitCn'\r\n          },\r\n          {\r\n            value: 'emitMoney',\r\n            label: 'emitMoney'\r\n          },\r\n          {\r\n            value: 'act_reg_rate',\r\n            label: 'act_reg_rate'\r\n          },\r\n          {\r\n            value: 'jj_jh_rate',\r\n            label: 'jj_jh_rate'\r\n          },\r\n          {\r\n            value: 'review_jinj_rate',\r\n            label: 'review_jinj_rate'\r\n          },\r\n          {\r\n            value: 'jinjian_t7',\r\n            label: 'jinjian_t7'\r\n          },\r\n          {\r\n            value: 'approval_t7',\r\n            label: 'approval_t7'\r\n          },\r\n          {\r\n            value: 'emitCn_t7',\r\n            label: 'emitCn_t7'\r\n          },\r\n          {\r\n            value: 'emitMoney_t7',\r\n            label: 'emitMoney_t7'\r\n          },\r\n          {\r\n            value: 'review_jinj_rate',\r\n            label: 'review_jinj_rate'\r\n          },\r\n        ],\r\n      }\r\n    },\r\n    mounted(){\r\n      this.dataTable.queryParams = this.queryParams;\r\n      let date = new Date();\r\n      let beginDate = new Date(date.setDate(date.getDate() - 7));\r\n      this.initBeginTime = this.dealDate(beginDate);\r\n      this.initEndTime = this.dealDate(new Date());\r\n      this.dataTable.queryParams.beginTime = this.initBeginTime + ' 00:00:00';\r\n      this.dataTable.queryParams.endTime = this.initEndTime + ' 23:59:59';\r\n\r\n      var defaultPage = {label: \"H5总计\", name: \"h5Statistics\", slotName: 'h5Statistics', closable: false};\r\n      this.$refs.tabPage.$emit(\"open-tab\", defaultPage);\r\n\r\n    },\r\n    methods: {\r\n\r\n      loadLists(){\r\n        this.$refs.dataTable.$emit('load-data');\r\n      },\r\n      onSubmit: function () {\r\n        this.dataTable.queryParams = this.queryParams;\r\n        var tag = this.warnTime(this.dataTable.queryParams.beginTime, this.dataTable.queryParams.endTime);\r\n        if (tag) {\r\n          return;\r\n        }\r\n        //console.log(Object.prototype.toString.call(this.dataTable.queryParams.beginTime));\r\n        this.dataTable.queryParams.beginTime = this.dealDate(this.dataTable.queryParams.beginTime) + ' 00:00:00';\r\n        this.dataTable.queryParams.endTime = this.dealDate(this.dataTable.queryParams.endTime) + ' 23:59:59';\r\n        this.dataTable.url = '/web/v1/market/queryH5';\r\n        this.$refs.dataTable.$emit('load-data');\r\n      },\r\n      warnTime(startTime, endTime){\r\n        if (!startTime) {\r\n          this.$notify({\r\n            message: '查询开始时间不能为空！',\r\n            type: 'warning'\r\n          });\r\n          return true;\r\n        }\r\n        if (!endTime) {\r\n          this.$notify({\r\n            message: '查询结束时间不能为空！',\r\n            type: 'warning'\r\n          });\r\n          return true;\r\n        }\r\n        let timeStart = new Date(startTime).getTime();\r\n        let timeEnd = new Date(endTime).getTime();\r\n        if (timeStart > timeEnd) {\r\n          this.$notify({\r\n            message: '查询开始时间不能大于结束时间',\r\n            type: 'warning'\r\n          });\r\n          return true;\r\n        }\r\n        return false;\r\n      },\r\n      dealTime(time){\r\n        return formatDate(new Date(time), 'yyyy-MM-dd hh:mm:ss');\r\n      },\r\n      dealDate(date){\r\n        return formatDate(new Date(date), 'yyyy-MM-dd');\r\n      },\r\n      formatterDate(row, column){\r\n        return formatDate(row.date, 'yyyy-MM-dd');\r\n      },\r\n      getSummaries (param) {\r\n        const {columns, data} = param;\r\n        const sums = [];\r\n        columns.forEach((column, index) => {\r\n          if (index === 0) {\r\n            sums[index] = '总计';\r\n            return;\r\n          }\r\n          var values;\r\n          if(index === 13||index === 14||index === 15){\r\n             values = data.map(item =>{\r\n               if(item[column.property]!==null){\r\n                 return Number(item[column.property].replace('%',''));\r\n               }\r\n             });\r\n          }else{\r\n            values = data.map(item => Number(item[column.property]));\r\n          }\r\n\r\n          if (!values.every(value => isNaN(value))) {\r\n            sums[index] = values.reduce((prev, curr) => {\r\n              const value = Number(curr);\r\n              if (!isNaN(value)) {\r\n                return prev + curr;\r\n              } else {\r\n                return prev;\r\n              }\r\n            }, 0);\r\n           if(index === 13||index === 14||index === 15){\r\n              sums[index]=(sums[index]/data.length).toFixed(2)+ ' %';\r\n            }\r\n            //sums[index] += ' 元';\r\n          } else {\r\n            sums[index] = 'N/A';\r\n          }\r\n        });\r\n\r\n        return sums;\r\n      },\r\n\r\n      exportExcel() {\r\n        let self=this;\r\n        var exportParams = {};\r\n        Object.assign(exportParams, this.dataTable.queryParams);\r\n        exportParams.pageSize = this.$refs.dataTable.total;\r\n        exportParams.page = 1;\r\n        this.$refs.dataTable.$emit('export-data',exportParams);\r\n        require.ensure([], () => {\r\n          const {export_json_to_excel} = require('vendor/Export2Excel');\r\n          const tHeader = ['日期',\r\n            'T7进件',\r\n            'T7审核',\r\n            'T7放款',\r\n            'T7放款金额',\r\n            'uv', '设备', '快速借款用户', '手机号', '注册', '激活', '进件', '审核', '放款', '放款金额', '激活/注册','进件/激活', '审核/进件', '留手机号新用户'];\r\n          const filterVal = ['date',\r\n            'jinjian_t7',\r\n            'approval_t7',\r\n            'emitCn_t7',\r\n            'emitMoney_t7',\r\n            'uv', 'plat', 'ksjk_existing', 'phones_count', 'register_count', 'activation_count', 'jinjian', 'approval', 'emitCn', 'emitMoney', 'act_reg_rate', 'jj_jh_rate', 'review_jinj_rate', 'take_phone_new'];\r\n          setTimeout(() => {\r\n            const list = this.$refs.dataTable.dataListA;\r\n            const data = this.formatJson(filterVal, list);\r\n            export_json_to_excel(tHeader, data, 'H5总计');\r\n          }, 300);\r\n\r\n        })\r\n      },\r\n      formatJson(filterVal, jsonData) {\r\n        return jsonData.map(v => filterVal.map(j => {\r\n          let returnValue;\r\n          if (j === 'operator') {\r\n            returnValue = v[j].name;\r\n          } else {\r\n            returnValue = v[j];\r\n          }\r\n          return returnValue;\r\n        }))\r\n      },\r\n\r\n      checkAllSelection(selectType){\r\n        let len = this.$refs[selectType].optionsCount;\r\n        for (var i = 0; i < len; i++) {\r\n          (function (index, _this) {\r\n            setTimeout(() => {\r\n              _this.$refs[selectType].handleOptionSelect(_this.$refs[selectType].options[index]);\r\n            }, 0);\r\n\r\n          })(i, this);\r\n        }\r\n        ;\r\n      },\r\n      handleCheckAllDeviceChange(event) {\r\n        this.checkAllSelection(\"deviceSelect\");\r\n        this.deviceCheckAll = !this.deviceCheckAll;\r\n      },\r\n      setCheckAllStyle(selectedCount, selectType){\r\n        let type = selectType + 'CheckAll'\r\n        let type_1 = selectType + 'Select'\r\n        if (this[type]) {\r\n          if (selectedCount.length < this.$refs[type_1].optionsCount) {\r\n            this[type] = !this[type];\r\n          }\r\n        } else {\r\n          if (selectedCount.length === this.$refs[type_1].optionsCount) {\r\n            this[type] = !this[type];\r\n          }\r\n        }\r\n      },\r\n      deviceChange(values){\r\n        this.setCheckAllStyle(values, \"device\");\r\n      },\r\n\r\n    },\r\n  }\r\n<\/script>\r\n<style>\r\n  .span-style {\r\n    display: inline-block;\r\n    margin-top: 8px;\r\n    font-size: 14px;\r\n  }\r\n</style>\r\n"]}])}}]);
//# sourceMappingURL=33.c92d56a225201042fafb.js.map